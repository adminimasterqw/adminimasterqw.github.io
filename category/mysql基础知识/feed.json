{
    "version": "https://jsonfeed.org/version/1",
    "title": "Andrésen • All posts by \"mysql基础知识\" category",
    "description": "",
    "home_page_url": "https://methiony.work",
    "items": [
        {
            "id": "https://methiony.work/2020/11/28/Platform-construction/MySQL/course-6/Centos7%E4%B8%8BLinux%E7%B3%BB%E7%BB%9FMySQL%E5%AE%89%E8%A3%85/",
            "url": "https://methiony.work/2020/11/28/Platform-construction/MySQL/course-6/Centos7%E4%B8%8BLinux%E7%B3%BB%E7%BB%9FMySQL%E5%AE%89%E8%A3%85/",
            "title": "Centos7下Linux系统MySQL安装",
            "date_published": "2020-11-28T04:32:27.000Z",
            "content_html": "<div class=\"note info\">\n<p>以下为个人学习笔记<br />\n课程：Linux 下安装 mysql-5.7.24@<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuamlhbnNodS5jb20vdS8yMGVjN2U5OWY5MDA=\">开心跳蚤</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC8yNzZkNTljYmM1Mjk=\">https://www.jianshu.com/p/276d59cbc529</span></p>\n</div>\n<h1 id=\"centos7下linux系统mysql-5724安装\"><a class=\"anchor\" href=\"#centos7下linux系统mysql-5724安装\">#</a> Centos7 下 Linux 系统 Mysql-5.7.24 安装</h1>\n<h2 id=\"一-检查\"><a class=\"anchor\" href=\"#一-检查\">#</a> 一、检查</h2>\n<p>检查是否已经安装过 mysql</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\"># rpm -qa | grep mysql</span></pre></td></tr></table></figure><p>如果存在 mysql, 执行删除命令</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\"># rpm -e --nodeps 相关 MySQL 版本</span></pre></td></tr></table></figure><p>执行查询命令，查看是否删除</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\"># rpm -qa | grep mysql</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\"># whereis mysql</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\"># find / -name mysql</span></pre></td></tr></table></figure><p>删除相关目录或文件</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\">#  rm -rf 相关文件</span></pre></td></tr></table></figure><p>执行查询命令，查看是否删除</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\"># whereis mysql</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\"># find / -name mysql</span></pre></td></tr></table></figure><p>检查 mysql 用户组和用户是否存在，如果没有，则创建</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /etc/group | grep mysql</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /etc/passwd |grep mysql</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\"># groupadd mysql</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\"># useradd -r -g mysql mysql</span></pre></td></tr></table></figure><h2 id=\"二-解压linux的mysql安装包\"><a class=\"anchor\" href=\"#二-解压linux的mysql安装包\">#</a> 二、解压 Linux 的 Mysql 安装包</h2>\n<p>解压并拷贝到 /usr/local/ 目录下</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\">#  tar xzvf mysql-5.7.24-linux-glibc2.12-x86_64.tar.gz -C /usr/local</span></pre></td></tr></table></figure><p>重命名</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\"># mv mysql-5.7.24-linux-glibc2.12-x86_64 mysql</span></pre></td></tr></table></figure><p>创建 data 目录</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\"># mkdir /usr/local/mysql/data</span></pre></td></tr></table></figure><p>更改 mysql 目录下所有的目录及文件夹所属的用户组和用户，以及权限</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\"># chown -R mysql:mysql /usr/local/mysql</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\"># chmod -R 755 /usr/local/mysql</span></pre></td></tr></table></figure><p>创建 /var/log/mariadb/mariadb.log 路径并给与权限</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\">#mkdir /var/log/mariadb </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\">#touch /var/log/mariadb/mariadb.log</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\">#chown -R mysql:mysql /var/log/mariadb/</span></pre></td></tr></table></figure><p>创建 var/lib/mysql 目录并给与权限</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\">#mkdir   /var/lib/mysql</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\">#chmod 777  /var/lib/mysql</span></pre></td></tr></table></figure><h2 id=\"三-配置mysql\"><a class=\"anchor\" href=\"#三-配置mysql\">#</a> 三、配置 Mysql</h2>\n<p>编译安装并初始化 mysql,<strong> 记住初始化输出日志末尾的密码</strong>（数据库管理员临时密码）</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\"># cd /usr/local/mysql/bin</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost bin<span class=\"token punctuation\">]</span><span class=\"token comment\"># ./mysqld --initialize --user=mysql --datadir=/usr/local/mysql/data --basedir=/usr/local/mysql</span></pre></td></tr></table></figure><p>编辑配置文件 my.cnf</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost bin<span class=\"token punctuation\">]</span><span class=\"token comment\">#  vi /etc/my.cnf</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">[</span>mysqld<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token assign-left variable\">datadir</span><span class=\"token operator\">=</span>/usr/local/mysql/data</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token assign-left variable\">socket</span><span class=\"token operator\">=</span>/var/lib/mysql/mysql.sock</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token assign-left variable\">port</span><span class=\"token operator\">=</span><span class=\"token number\">3306</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token assign-left variable\">sql_mode</span><span class=\"token operator\">=</span>NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token assign-left variable\">max_connections</span><span class=\"token operator\">=</span><span class=\"token number\">600</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token assign-left variable\">innodb_file_per_table</span><span class=\"token operator\">=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token assign-left variable\">lower_case_table_names</span><span class=\"token operator\">=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token assign-left variable\">character_set_server</span><span class=\"token operator\">=</span>utf8</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>symbolic-links<span class=\"token operator\">=</span><span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">[</span>client<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token assign-left variable\">port</span><span class=\"token operator\">=</span><span class=\"token number\">3306</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token assign-left variable\">socket</span><span class=\"token operator\">=</span>/var/lib/mysql/mysql.sock</pre></td></tr></table></figure><p>测试启动 mysql 服务器</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\"># /usr/local/mysql/support-files/mysql.server start</span></pre></td></tr></table></figure><p>添加软连接，并重启 mysql 服务</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\">#  ln -s /usr/local/src/mysql/support-files/mysql.server /etc/init.d/mysql </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\">#  ln -s /usr/local/src/mysql/bin/mysql /usr/bin/mysql</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\">#  service mysql restart</span></pre></td></tr></table></figure><p>登录 mysql，修改密码 (密码为生成的临时密码)</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\">#  mysql -u root -p 密码</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">#提示：-u 后面可以紧跟用户名，也可以加个空格，但密码后面一定不能加空格</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>mysql<span class=\"token operator\">></span>set password <span class=\"token keyword\">for</span> root@localhost <span class=\"token operator\">=</span> password<span class=\"token punctuation\">(</span><span class=\"token string\">'yourpass'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>开放远程连接</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>mysql<span class=\"token operator\">></span>use mysql<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>msyql<span class=\"token operator\">></span>update user <span class=\"token builtin class-name\">set</span> user.Host<span class=\"token operator\">=</span><span class=\"token string\">'%'</span> where user.User<span class=\"token operator\">=</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>mysql<span class=\"token operator\">></span>flush privileges<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h2 id=\"四-设置开机自动启动\"><a class=\"anchor\" href=\"#四-设置开机自动启动\">#</a> 四、设置开机自动启动</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token number\">1</span>、将服务文件拷贝到init.d下，并重命名为mysql</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\"># cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysqld</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token number\">2</span>、赋予可执行权限</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\"># chmod +x /etc/init.d/mysqld</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token number\">3</span>、添加服务</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\"># chkconfig --add mysqld</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token number\">4</span>、显示服务列表</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost /<span class=\"token punctuation\">]</span><span class=\"token comment\"># chkconfig --list</span></pre></td></tr></table></figure>",
            "tags": []
        }
    ]
}