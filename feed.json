{
    "version": "https://jsonfeed.org/version/1",
    "title": "AndrÃ©sen",
    "description": "",
    "home_page_url": "https://methiony.work",
    "items": [
        {
            "id": "https://methiony.work/2020/11/27/Platform-construction/Mapreduce/course-3/MapReduce%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/",
            "url": "https://methiony.work/2020/11/27/Platform-construction/Mapreduce/course-3/MapReduce%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/",
            "title": "MapReduceåŸºæœ¬æ¦‚å¿µ",
            "date_published": "2020-11-27T09:56:36.000Z",
            "content_html": "<p>:::note info<br />\n ä»¥ä¸‹ä¸ºä¸ªäººå­¦ä¹ ç¬”è®°<br />\nè¯¾ç¨‹ï¼š å¤§æ•°æ®è‡ªå­¦æ•™ç¨‹ Hadoop ä»é›¶åˆ°ç²¾é€šå®Œæ•´ç‰ˆ @<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zcGFjZS5iaWxpYmlsaS5jb20vNTg2Mzg5MDQ5\">é»‘é©¬ç¨‹åºå‘˜å¤§æ•°æ®æ•™ç¨‹</span><br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWVrNHkxMTdZcQ==\"> https://www.bilibili.com/video/BV1ek4y117Yq</span><br />\n:::</p>\n",
            "tags": []
        },
        {
            "id": "https://methiony.work/2020/11/26/Platform-construction/Hadoop/course-2/Hadoop%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/",
            "url": "https://methiony.work/2020/11/26/Platform-construction/Hadoop/course-2/Hadoop%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/",
            "title": "Hadoopé«˜å¯ç”¨é›†ç¾¤æ­å»º",
            "date_published": "2020-11-26T07:42:16.000Z",
            "content_html": "<p>::ğŸ““<br />\nä»¥ä¸‹ä¸ºä¸ªäººå­¦ä¹ ç¬”è®°<br />\nè¯¾ç¨‹ï¼š å¤§æ•°æ®è‡ªå­¦æ•™ç¨‹ Hadoop ä»é›¶åˆ°ç²¾é€šå®Œæ•´ç‰ˆ @<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zcGFjZS5iaWxpYmlsaS5jb20vNTg2Mzg5MDQ5\">é»‘é©¬ç¨‹åºå‘˜å¤§æ•°æ®æ•™ç¨‹</span><br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWVrNHkxMTdZcQ==\"> https://www.bilibili.com/video/BV1ek4y117Yq</span><br />\n:::</p>\n<h1 id=\"hadoopé«˜å¯ç”¨é›†ç¾¤æ­å»º\"><a class=\"anchor\" href=\"#hadoopé«˜å¯ç”¨é›†ç¾¤æ­å»º\">#</a> Hadoop é«˜å¯ç”¨é›†ç¾¤æ­å»º</h1>\n<h2 id=\"1-ç¯å¢ƒå‡†å¤‡\"><a class=\"anchor\" href=\"#1-ç¯å¢ƒå‡†å¤‡\">#</a> 1ã€ç¯å¢ƒå‡†å¤‡</h2>\n<p>ç”¨å…¶ä»–å·¥å…·å°† hadoop-2.6.0ã€zookeeper-3.4.5ã€jdk1.8.0_271 æ”¾å…¥ node01 ä¸»æœº /usr/local/src ç›®å½•ä¸‹</p>\n<h3 id=\"ä¸»æœºé…ç½®ç¯å¢ƒå¦‚ä¸‹è¡¨\"><a class=\"anchor\" href=\"#ä¸»æœºé…ç½®ç¯å¢ƒå¦‚ä¸‹è¡¨\">#</a> ä¸»æœºé…ç½®ç¯å¢ƒå¦‚ä¸‹è¡¨</h3>\n<table>\n<thead>\n<tr>\n<th>ä¸»æœºå</th>\n<th>IP</th>\n<th>ç³»ç»Ÿ</th>\n<th>è½¯ä»¶ç‰ˆæœ¬</th>\n<th>å®‰è£…ç›®å½•</th>\n<th>æ•°æ®ç›®å½•</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>node01</td>\n<td>192.168.2.131</td>\n<td>Centos 7</td>\n<td>hadoop-2.6.0ã€jdk1.8ã€zookeeper-3.4.5</td>\n<td>/usr/local/src/hadoop</td>\n<td>/data/hadoop</td>\n</tr>\n<tr>\n<td>node02</td>\n<td>192.168.2.132</td>\n<td>Centos 7</td>\n<td>hadoop-2.6.0ã€jdk1.8ã€zookeeper-3.4.5</td>\n<td>/usr/local/src/hadoop</td>\n<td>/data/hadoop</td>\n</tr>\n<tr>\n<td>node03</td>\n<td>192.168.2.133</td>\n<td>Centos 7</td>\n<td>hadoop-2.6.0ã€jdk1.8ã€zookeeper-3.4.5</td>\n<td>/usr/local/src/hadoop</td>\n<td>/data/hadoop</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"é›†ç¾¤è§„åˆ’\"><a class=\"anchor\" href=\"#é›†ç¾¤è§„åˆ’\">#</a> é›†ç¾¤è§„åˆ’</h3>\n<table>\n<thead>\n<tr>\n<th>node01</th>\n<th>node02</th>\n<th>node03</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>NodeManager</td>\n<td>NodeManager</td>\n<td>NodeManager</td>\n</tr>\n<tr>\n<td>NameNode</td>\n<td>NameNode</td>\n<td></td>\n</tr>\n<tr>\n<td>DataNode</td>\n<td>DataNode</td>\n<td>DataNode</td>\n</tr>\n<tr>\n<td>DFSZKFailoverController</td>\n<td>DFSZKFailoverController</td>\n<td></td>\n</tr>\n<tr>\n<td>JournalNode</td>\n<td>JournalNode</td>\n<td>JournalNode</td>\n</tr>\n<tr>\n<td>ResourceManager</td>\n<td>ResourceManager</td>\n<td></td>\n</tr>\n<tr>\n<td>QuorumPeerMain</td>\n<td>QuorumPeerMain</td>\n<td>QuorumPeerMain</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"é…ç½®ä¸»æœºåä»¥åŠè§£æ3å°\"><a class=\"anchor\" href=\"#é…ç½®ä¸»æœºåä»¥åŠè§£æ3å°\">#</a> é…ç½®ä¸»æœºåä»¥åŠè§£æï¼ˆ3 å°ï¼‰</h3>\n<p>é…ç½®ä¸»æœºå</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 ~]</span><span class=\"token comment\"># hostnamectl -set-hostname node01</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token namespace\">[root@node02 ~]</span><span class=\"token comment\"># hostnamectl -set-hostname node02</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token namespace\">[root@node03 ~]</span><span class=\"token comment\"># hostnamectl -set-hostname node03</span></pre></td></tr></table></figure><p>é…ç½®åŸŸåè§£æ</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 ~]</span><span class=\"token comment\"># vi /etc/hosts</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>127<span class=\"token punctuation\">.</span>0<span class=\"token punctuation\">.</span>0<span class=\"token punctuation\">.</span>1   localhost localhost<span class=\"token punctuation\">.</span>localdomain localhost4 localhost4<span class=\"token punctuation\">.</span>localdomain4</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>::1         localhost localhost<span class=\"token punctuation\">.</span>localdomain localhost6 localhost6<span class=\"token punctuation\">.</span>localdomain6</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>192<span class=\"token punctuation\">.</span>168<span class=\"token punctuation\">.</span>2<span class=\"token punctuation\">.</span>131 node01</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>192<span class=\"token punctuation\">.</span>168<span class=\"token punctuation\">.</span>2<span class=\"token punctuation\">.</span>132 node02</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>192<span class=\"token punctuation\">.</span>168<span class=\"token punctuation\">.</span>2<span class=\"token punctuation\">.</span>133 node03</pre></td></tr></table></figure><h3 id=\"é…ç½®ä¸»æœºipåœ°å€æˆ‘çš„ç½‘å¡æ˜¯ifcfg-ens33\"><a class=\"anchor\" href=\"#é…ç½®ä¸»æœºipåœ°å€æˆ‘çš„ç½‘å¡æ˜¯ifcfg-ens33\">#</a> é…ç½®ä¸»æœº IP åœ°å€ï¼ˆæˆ‘çš„ç½‘å¡æ˜¯ ifcfg-ens33ï¼‰</h3>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 ~]</span><span class=\"token comment\"># vi /etc/sysconfig/network-scripts/ifcfg-ens33</span></pre></td></tr></table></figure><p>node01 é…ç½®ä¿¡æ¯</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>BOOTPROTO=static</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>ONBOOT=yes</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>æ–‡ä»¶æœ«å°¾è¿½åŠ </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>IPADDR=192<span class=\"token punctuation\">.</span>168<span class=\"token punctuation\">.</span>2<span class=\"token punctuation\">.</span>131</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>GATEWAY=192<span class=\"token punctuation\">.</span>168<span class=\"token punctuation\">.</span>2<span class=\"token punctuation\">.</span>2</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>NETMASK=255<span class=\"token punctuation\">.</span>255<span class=\"token punctuation\">.</span>255<span class=\"token punctuation\">.</span>0</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>DNS1=8<span class=\"token punctuation\">.</span>8<span class=\"token punctuation\">.</span>8<span class=\"token punctuation\">.</span>8</pre></td></tr></table></figure><p>node02 é…ç½®ä¿¡æ¯</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>BOOTPROTO=static</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>ONBOOT=yes</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>æ–‡ä»¶æœ«å°¾è¿½åŠ </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>IPADDR=192<span class=\"token punctuation\">.</span>168<span class=\"token punctuation\">.</span>2<span class=\"token punctuation\">.</span>132</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>GATEWAY=192<span class=\"token punctuation\">.</span>168<span class=\"token punctuation\">.</span>2<span class=\"token punctuation\">.</span>2</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>NETMASK=255<span class=\"token punctuation\">.</span>255<span class=\"token punctuation\">.</span>255<span class=\"token punctuation\">.</span>0</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>DNS1=8<span class=\"token punctuation\">.</span>8<span class=\"token punctuation\">.</span>8<span class=\"token punctuation\">.</span>8</pre></td></tr></table></figure><p>node02 é…ç½®ä¿¡æ¯</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>BOOTPROTO=static</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>ONBOOT=yes</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>æ–‡ä»¶æœ«å°¾è¿½åŠ </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>IPADDR=192<span class=\"token punctuation\">.</span>168<span class=\"token punctuation\">.</span>2<span class=\"token punctuation\">.</span>133</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>GATEWAY=192<span class=\"token punctuation\">.</span>168<span class=\"token punctuation\">.</span>2<span class=\"token punctuation\">.</span>2</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>NETMASK=255<span class=\"token punctuation\">.</span>255<span class=\"token punctuation\">.</span>255<span class=\"token punctuation\">.</span>0</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>DNS1=8<span class=\"token punctuation\">.</span>8<span class=\"token punctuation\">.</span>8<span class=\"token punctuation\">.</span>8</pre></td></tr></table></figure><h3 id=\"å…³é—­é˜²ç«å¢™\"><a class=\"anchor\" href=\"#å…³é—­é˜²ç«å¢™\">#</a> å…³é—­é˜²ç«å¢™</h3>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 ~]</span><span class=\"token comment\"># systemctl stop firewalld.service </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">#å…³é—­é˜²ç«å¢™</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token namespace\">[root@node01 ~]</span><span class=\"token comment\"># systemctl disable firewalld.service </span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">#ç¦æ­¢å¼€æœºå¯åŠ¨</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token namespace\">[root@node01 ~]</span><span class=\"token operator\">*</span><span class=\"token comment\"># firewall-cmd --state </span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">#æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>not running</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token namespace\">[root@node02 ~]</span><span class=\"token comment\"># systemctl stop firewalld.service </span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">#å…³é—­é˜²ç«å¢™</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token namespace\">[root@node02 ~]</span><span class=\"token comment\"># systemctl disable firewalld.service </span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">#ç¦æ­¢å¼€æœºå¯åŠ¨</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token namespace\">[root@node02 ~]</span><span class=\"token operator\">*</span><span class=\"token comment\"># firewall-cmd --state </span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">#æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>not running</pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token namespace\">[root@node03 ~]</span><span class=\"token comment\"># systemctl stop firewalld.service </span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\">#å…³é—­é˜²ç«å¢™</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token namespace\">[root@node03 ~]</span><span class=\"token comment\"># systemctl disable firewalld.service </span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\">#ç¦æ­¢å¼€æœºå¯åŠ¨</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token namespace\">[root@node03 ~]</span><span class=\"token operator\">*</span><span class=\"token comment\"># firewall-cmd --state </span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\">#æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>not running</pre></td></tr></table></figure><h3 id=\"å…³é—­selinux\"><a class=\"anchor\" href=\"#å…³é—­selinux\">#</a> å…³é—­ selinux</h3>\n<p>è¿›å…¥åˆ° /etc/selinux/config æ–‡ä»¶ï¼Œå°† SELINUX=enforcing æ”¹ä¸º SELINUX=disabledã€‚</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 ~]</span><span class=\"token comment\">#  vi  /etc/selinux/config</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token namespace\">[root@node02 ~]</span><span class=\"token comment\">#  vi  /etc/selinux/config</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token namespace\">[root@node03 ~]</span><span class=\"token comment\">#  vi  /etc/selinux/config</span></pre></td></tr></table></figure><p>é‡å¯</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 ~]</span><span class=\"token comment\"># reboot</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token namespace\">[root@node02 ~]</span><span class=\"token comment\"># reboot</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token namespace\">[root@node03 ~]</span><span class=\"token comment\"># reboot</span></pre></td></tr></table></figure><h3 id=\"è®¾ç½®å…å¯†ç™»å½•\"><a class=\"anchor\" href=\"#è®¾ç½®å…å¯†ç™»å½•\">#</a> è®¾ç½®å…å¯†ç™»å½•</h3>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#ç¬¬ä¸€æ­¥ï¼Œssh-keygen -t rsa ç”Ÿæˆå¯†é’¥å¯¹</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token namespace\">[root@node01 ~]</span><span class=\"token comment\"># ssh-keygen -t rsa</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># è¿ç»­ä¸‰æ¬¡å›è½¦ï¼Œå³åœ¨æœ¬åœ°ç”Ÿæˆäº†å…¬é’¥å’Œç§é’¥ï¼Œä¸è®¾ç½®å¯†ç ï¼Œé»˜è®¤å­˜å‚¨åœ¨ï½/.ssh ç›®å½•ä¸‹</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">#ç¬¬äºŒæ­¥ï¼Œç”¨ ssh-copy-id æ‹·è´å°†å…¬é’¥å¤åˆ¶åˆ°è¿œç¨‹æœºå™¨ä¸­</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token namespace\">[root@node01 ~]</span><span class=\"token comment\"># ssh-copy-id -i .ssh/id_rsa.pub root@node01</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token namespace\">[root@node01 ~]</span><span class=\"token comment\"># ssh-copy-id -i .ssh/id_rsa.pub  root@node02</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token namespace\">[root@node01 ~]</span><span class=\"token comment\"># ssh-copy-id -i .ssh/id_rsa.pub  root@node03</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">#ç¬¬ä¸‰æ­¥ï¼Œæµ‹è¯•å…å¯†ç ç™»é™†</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token namespace\">[root@node01 ~]</span><span class=\"token comment\"># ssh node02</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token namespace\">[root@node01 ~]</span><span class=\"token comment\"># ssh node03</span></pre></td></tr></table></figure><h2 id=\"2-æ­å»ºç¯å¢ƒ\"><a class=\"anchor\" href=\"#2-æ­å»ºç¯å¢ƒ\">#</a> 2ã€æ­å»ºç¯å¢ƒ</h2>\n<h3 id=\"1-å®‰è£…jdkå·²å®‰è£…å¯ä»¥è·³è¿‡\"><a class=\"anchor\" href=\"#1-å®‰è£…jdkå·²å®‰è£…å¯ä»¥è·³è¿‡\">#</a> 1ã€å®‰è£… jdkï¼ˆå·²å®‰è£…å¯ä»¥è·³è¿‡ï¼‰</h3>\n<p>è§£å‹ jdk</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 ~]</span><span class=\"token comment\">#tar -zxvf jdk-8u271-linux-x64.tar.gz</span></pre></td></tr></table></figure><p>é…ç½®ç¯å¢ƒå˜é‡ (/etc/profile)</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 ~]</span><span class=\"token comment\">#vi /etc/profile</span></pre></td></tr></table></figure><p>æ·»åŠ </p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>export JAVA_HOME=<span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>src<span class=\"token operator\">/</span>jdk1<span class=\"token punctuation\">.</span>8<span class=\"token punctuation\">.</span>0_271 </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>export PATH=:<span class=\"token variable\">$JAVA_HOME</span><span class=\"token operator\">/</span>bin:<span class=\"token variable\">$PATH</span></pre></td></tr></table></figure><p>æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼Œè®©ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 ~]</span><span class=\"token comment\">#source/etc/profile</span></pre></td></tr></table></figure><p>éªŒè¯ jdk å®‰è£…æ˜¯å¦æˆåŠŸ</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 ~]</span><span class=\"token comment\">#java -version</span></pre></td></tr></table></figure><p>æ‹·è´åˆ†å‘åˆ° node1ã€node2</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 ~]</span><span class=\"token comment\">#scp -r jdk1.8.0_271 node2:$PWD</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token namespace\">[root@node01 ~]</span><span class=\"token comment\">#scp -r jdk1.8.0_271 node3:$PWD</span></pre></td></tr></table></figure><h3 id=\"2-å®‰è£…zookeeperå·²å®‰è£…å¯ä»¥è·³è¿‡\"><a class=\"anchor\" href=\"#2-å®‰è£…zookeeperå·²å®‰è£…å¯ä»¥è·³è¿‡\">#</a> 2ã€å®‰è£… zookeeperï¼ˆå·²å®‰è£…å¯ä»¥è·³è¿‡ï¼‰</h3>\n<p>è§£å‹</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 src]</span><span class=\"token comment\"># tar -zxvf zookeeper-3.4.5.tar.gz</span></pre></td></tr></table></figure><p>é…ç½®ä¿®æ”¹</p>\n<p>/usr/local/src/zookeeper-3.4.5/conf è¿™ä¸ªè·¯å¾„ä¸‹çš„ zoo_sample.cfg ä¿®æ”¹ä¸º zoo.cfg (å¦‚æœå­˜åœ¨ zoo.cfg æ–‡ä»¶åˆ™ä¸éœ€è¦æ‹·è´ zoo_sample.cfg)</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 conf]</span><span class=\"token comment\"># mv zoo_sample.cfg zoo.cfg</span></pre></td></tr></table></figure><p>æ‰“å¼€ zoo.cfg æ–‡ä»¶ï¼Œä¿®æ”¹ dataDir è·¯å¾„ï¼Œæ·»åŠ ä¸»æœº</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>dataDir=<span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>src<span class=\"token operator\">/</span>zookeeper<span class=\"token operator\">-</span>3<span class=\"token punctuation\">.</span>4<span class=\"token punctuation\">.</span>5<span class=\"token operator\">/</span>zkData</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>æ–‡ä»¶å†…å®¹æœ«å°¾æ·»åŠ å†…å®¹</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>server<span class=\"token punctuation\">.</span>1=master:2888:3888</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>server<span class=\"token punctuation\">.</span>2=node1:2888:3888</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>server<span class=\"token punctuation\">.</span>3=node2:2888:3888</pre></td></tr></table></figure><p>åœ¨ /usr/local/src/zookeeper-3.4.5 / è¿™ä¸ªç›®å½•ä¸Šåˆ›å»º zkData æ–‡ä»¶å¤¹</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 zookeeper-3.4.5]</span><span class=\"token comment\"># mkdir zkData</span></pre></td></tr></table></figure><p>åœ¨ /usr/local/src/zookeeper-3.4.5/zkData è¿™ä¸ªç›®å½•ä¸Šåˆ›å»º myid æ–‡ä»¶</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 zkData]</span><span class=\"token comment\"># touch myid</span></pre></td></tr></table></figure><p>ç¼–è¾‘ myid æ–‡ä»¶ (å…¶ä»–æœºå™¨ä¸Šä¿®æ”¹å¯¹åº”çš„ server çš„æ•°å­—)</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 zkData]</span><span class=\"token comment\"># vi myid</span></pre></td></tr></table></figure><pre><code>1\n</code></pre>\n<p>æ‹·è´åˆ†å‘åˆ° node1ã€node2</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 src]</span><span class=\"token comment\"># scp -r zookeeper-3.4.5 node2:$PWD</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token namespace\">[root@node01 src]</span><span class=\"token comment\"># scp -r zookeeper-3.4.5 node3:$PWD</span></pre></td></tr></table></figure><p>ä¿®æ”¹ node02ã€node03 çš„ myid æ–‡ä»¶</p>\n<h3 id=\"3-å®‰è£…hadoop\"><a class=\"anchor\" href=\"#3-å®‰è£…hadoop\">#</a> 3ã€å®‰è£… Hadoop</h3>\n<h4 id=\"1-è§£å‹hadoop\"><a class=\"anchor\" href=\"#1-è§£å‹hadoop\">#</a> 1ã€è§£å‹ hadoop</h4>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 src]</span><span class=\"token comment\">#tar -zxvf hadoop-2.6.0.tar.gz</span></pre></td></tr></table></figure><p>é…ç½®ç¯å¢ƒå˜é‡ (/etc/profile)</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 src]</span><span class=\"token comment\">#vi /etc/profile</span></pre></td></tr></table></figure><p>æ·»åŠ </p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>export HADOOP_HOME=<span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>src<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">-</span>2<span class=\"token punctuation\">.</span>6<span class=\"token punctuation\">.</span>0</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>export PATH=:<span class=\"token variable\">$HADOOP_HOME</span><span class=\"token operator\">/</span>bin:<span class=\"token variable\">$HADOOP_HOME</span><span class=\"token operator\">/</span>sbin:<span class=\"token variable\">$PATH</span></pre></td></tr></table></figure><p>æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼Œè®©ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 /]</span><span class=\"token comment\">#source/etc/profile</span></pre></td></tr></table></figure><h4 id=\"2-ä¿®æ”¹hadoopçš„é…ç½®æ–‡ä»¶\"><a class=\"anchor\" href=\"#2-ä¿®æ”¹hadoopçš„é…ç½®æ–‡ä»¶\">#</a> 2ã€ä¿®æ”¹ hadoop çš„é…ç½®æ–‡ä»¶</h4>\n<p>è¿›å…¥éœ€æ”¹æ–‡ä»¶çš„ç›®å½•</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01~]</span><span class=\"token comment\">#cd /usr/local/src/hadoop-2.6.0/etc/hadoop</span></pre></td></tr></table></figure><p>éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>core<span class=\"token operator\">-</span>site<span class=\"token punctuation\">.</span>xml\thadoop<span class=\"token operator\">-</span>env<span class=\"token punctuation\">.</span>sh\thdfs<span class=\"token operator\">-</span>site<span class=\"token punctuation\">.</span>xml\t</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>mapred<span class=\"token operator\">-</span>env<span class=\"token punctuation\">.</span>sh\tmapred<span class=\"token operator\">-</span>site<span class=\"token punctuation\">.</span>xml\tyarn<span class=\"token operator\">-</span>site<span class=\"token punctuation\">.</span>xml</pre></td></tr></table></figure><h5 id=\"core-sitexml\"><a class=\"anchor\" href=\"#core-sitexml\">#</a> core-site.xml</h5>\n<p>ä¿®æ”¹ core-site.xml æ–‡ä»¶ï¼Œåœ¨ &lt;configuration&gt; å…ƒç´ ä¸­æ·»åŠ ç›¸åº”çš„é…ç½®æ–‡ä»¶</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>configuration</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- æŒ‡å®š hdfs è¿æ¥åœ°å€ï¼Œé›†ç¾¤æ¨¡å¼ï¼ˆé«˜å¯ç”¨ï¼‰--></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>fs.defaultFS<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>hdfs://cluster<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- æŒ‡å®š ZooKeeper é›†ç¾¤çš„åœ°å€å’Œç«¯å£ã€‚æ³¨æ„ï¼Œæ•°é‡ä¸€å®šæ˜¯å¥‡æ•°ï¼Œä¸”ä¸å°‘äºä¸‰ä¸ªèŠ‚ç‚¹ --></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>ha.zookeeper.quorum<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>node01:2181,node02:2181,node03:2181<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>configuration</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h5 id=\"hdfs-sitexml\"><a class=\"anchor\" href=\"#hdfs-sitexml\">#</a> hdfs-site.xml</h5>\n<p>ä¿®æ”¹ hdfs-site.xml æ–‡ä»¶ï¼Œåœ¨ &lt;configuration&gt; å…ƒç´ ä¸­æ·»åŠ ç›¸åº”çš„é…ç½®æ–‡ä»¶</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>configuration</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- æŒ‡å®š HDFS å‰¯æœ¬çš„æ•°é‡ï¼Œä¸èƒ½è¶…è¿‡æœºå™¨èŠ‚ç‚¹æ•° --></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>dfs.replication<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>3<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- ä¸º namenode é›†ç¾¤å®šä¹‰ä¸€ä¸ª services name --></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre> \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>dfs.nameservices<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>cluster<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- nameservice åŒ…å«å“ªäº› namenodeï¼Œä¸ºå„ä¸ª namenode èµ·å --></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>dfs.ha.namenodes.cluster<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>nn01,nn02<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre> \t<span class=\"token comment\">&lt;!-- åä¸º nn01 çš„ namenode çš„ rpc åœ°å€å’Œç«¯å£å·ï¼Œrpc ç”¨æ¥å’Œ datanode é€šè®¯ --></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>dfs.namenode.rpc-address.cluster.nn01<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>node01:9000<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre> \t<span class=\"token comment\">&lt;!-- åä¸º nn01 çš„ namenode çš„ http åœ°å€å’Œç«¯å£å·ï¼Œç”¨æ¥å’Œ web å®¢æˆ·ç«¯é€šè®¯ --></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>dfs.namenode.http-address.cluster.nn01<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>node01:50070<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre> \t<span class=\"token comment\">&lt;!-- åä¸º nn02 çš„ namenode çš„ rpc åœ°å€å’Œç«¯å£å·ï¼Œrpc ç”¨æ¥å’Œ datanode é€šè®¯ --></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>dfs.namenode.rpc-address.cluster.nn02<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>node02:9000<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre> \t<span class=\"token comment\">&lt;!-- åä¸º nn02 çš„ namenode çš„ http åœ°å€å’Œç«¯å£å·ï¼Œç”¨æ¥å’Œ web å®¢æˆ·ç«¯é€šè®¯ --></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>  \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>dfs.namenode.http-address.cluster.nn02<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>  \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>node02:50070<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>  \t<span class=\"token comment\">&lt;!-- namenode é—´ç”¨äºå…±äº«ç¼–è¾‘æ—¥å¿—çš„ journal èŠ‚ç‚¹åˆ—è¡¨ --></span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>  \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>dfs.namenode.shared.edits.dir<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>  \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>qjournal://node01:8485;node02:8485;node03:8485/cluster<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token comment\">&lt;!-- journalnode ä¸Šç”¨äºå­˜æ”¾ edits æ—¥å¿—çš„ç›®å½• --></span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>  \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>dfs.journalnode.edits.dir<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>  \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>/data/hadoop/journaldata<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>  \t<span class=\"token comment\">&lt;!-- æŒ‡å®šè¯¥é›†ç¾¤å‡ºç°æ•…éšœæ—¶ï¼Œæ˜¯å¦è‡ªåŠ¨åˆ‡æ¢åˆ°å¦ä¸€å° namenode --></span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>  \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>dfs.ha.automatic-failover.enabled.cluster<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>  \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>true<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- é…ç½®å¤±è´¥è‡ªåŠ¨åˆ‡æ¢å®ç°æ–¹å¼ --></span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    \t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>dfs.client.failover.proxy.provider.cluster<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre> \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>  \t<span class=\"token comment\">&lt;!-- ä¸€æ—¦éœ€è¦ NameNode åˆ‡æ¢ï¼Œä½¿ç”¨ ssh æ–¹å¼è¿›è¡Œæ“ä½œ --></span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>  \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>dfs.ha.fencing.methods<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>  \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>sshfence(root:9431)<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>  \t<span class=\"token comment\">&lt;!-- å¦‚æœä½¿ç”¨ ssh è¿›è¡Œæ•…éšœåˆ‡æ¢ï¼Œä½¿ç”¨ ssh é€šä¿¡æ—¶ç”¨çš„å¯†é’¥å­˜å‚¨çš„ä½ç½® --></span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>  \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>dfs.ha.fencing.ssh.private-key-files<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>  \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>/root/.ssh/id_rsa<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- connect-timeout è¶…æ—¶æ—¶é—´ --></span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>    \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>dfs.ha.fencing.ssh.connect-timeout<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>    \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>30000<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>   \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>dfs.name.dir<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>   \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>/data/hadoop/tmp/dfs/name<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>   \t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>   \t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>   \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>dfs.data.dir<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>   \t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>/data/hadoop/tmp/dfs/data<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>   \t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>configuration</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h5 id=\"yarn-sitexml\"><a class=\"anchor\" href=\"#yarn-sitexml\">#</a> yarn-site.xml</h5>\n<p>ä¿®æ”¹ yarn-site.xml æ–‡ä»¶ï¼Œåœ¨ &lt;configuration&gt; å…ƒç´ ä¸­æ·»åŠ ç›¸åº”çš„é…ç½®æ–‡ä»¶</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>configuration</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- å¯ç”¨ Resource Manager HA é«˜å¯ç”¨æ€§ --></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>yarn.resourcemanager.ha.enabled<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>true<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- æŒ‡å®š resourcemanager çš„åå­— --></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>yarn.resourcemanager.cluster-id<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>yrc<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- ä½¿ç”¨äº† 2 ä¸ª resourcemanager, åˆ†åˆ«æŒ‡å®š Resourcemanager çš„åœ°å€ --></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>yarn.resourcemanager.ha.rm-ids<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>rm1,rm2<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- æŒ‡å®š rm1 çš„åœ°å€ --></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>yarn.resourcemanager.hostname.rm1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>node01<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- æŒ‡å®š rm2 çš„åœ°å€  --></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>yarn.resourcemanager.hostname.rm2<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>node02<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- æŒ‡å®š zookeeper é›†ç¾¤æœºå™¨ --></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>yarn.resourcemanager.zk-address<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>node01:2181,node02:2181,node03:2181<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- NodeManager ä¸Šè¿è¡Œçš„é™„å±æœåŠ¡ï¼Œé»˜è®¤æ˜¯ mapreduce_shuffle --></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>yarn.nodemanager.aux-services<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>mapreduce_shuffle<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>configuration</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h5 id=\"mapred-sitexml\"><a class=\"anchor\" href=\"#mapred-sitexml\">#</a> mapred-site.xml</h5>\n<p>ä¿®æ”¹ mapred-site.xml æ–‡ä»¶ï¼Œåœ¨ &lt;configuration&gt; å…ƒç´ ä¸­æ·»åŠ ç›¸åº”çš„é…ç½®æ–‡ä»¶</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>configuration</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- é‡‡ç”¨ yarn ä½œä¸º mapreduce çš„èµ„æºè°ƒåº¦æ¡†æ¶ --></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>mapreduce.framework.name<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>yarn<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>configuration</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h5 id=\"hadoop-envsh\"><a class=\"anchor\" href=\"#hadoop-envsh\">#</a> <span class=\"exturl\" data-url=\"aHR0cDovL2hhZG9vcC1lbnYuc2g=\">hadoop-env.sh</span>ã€<span class=\"exturl\" data-url=\"aHR0cDovL21hcHJlZC1lbnYuc2g=\">mapred-env.sh</span></h5>\n<p>ç„¶åï¼Œ<span class=\"exturl\" data-url=\"aHR0cDovL3huLS1oYWRvb3AtZW52LXl1NnA1NHIwbmE1NjF0LnNo\">åˆ†åˆ«ä¿®æ”¹ hadoop-env.sh</span>ã€mapred-env.sh æ–‡ä»¶ï¼Œæ·»åŠ  Java ç¯å¢ƒå˜é‡</p>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL2hhZG9vcC1lbnYuc2g=\">hadoop-env.sh</span></p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre># The java implementation to use.</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>export JAVA_HOME=/usr/local/src/jdk1.8.0_271</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre># æŒ‡å®šhadoopç›¸å…³çš„pidå­˜æ”¾ä½ç½®</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>export HADOOP_PID_DIR=/usr/local/hadoop/pids</pre></td></tr></table></figure><p><span class=\"exturl\" data-url=\"aHR0cDovL21hcHJlZC1lbnYuc2g=\">mapred-env.sh</span></p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre># The java implementation to use.</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>export JAVA_HOME=/usr/local/src/jdk1.8.0_271</pre></td></tr></table></figure><h5 id=\"é…ç½®hadoopç¯å¢ƒå˜é‡\"><a class=\"anchor\" href=\"#é…ç½®hadoopç¯å¢ƒå˜é‡\">#</a> é…ç½® hadoop ç¯å¢ƒå˜é‡</h5>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 hadoop]</span><span class=\"token comment\">#vi /etc/profile.d/hadoop.sh</span></pre></td></tr></table></figure><figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>export HADOOP_HOME=/usr/local/src/hadoop-2.6.0</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>export LD_LIBRARY_PATH=$HADOOP_HOME/lib/native</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>export HADOOP_COMMON_LIB_NATIVE_DIR=/usr/local/src/hadoop-2.6.0/lib/native</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>export HADOOP_OPTS=\"-Djava.library.path=/usr/local/src/hadoop-2.6.0/lib\"</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>export PATH=$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$PATH</pre></td></tr></table></figure><figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 hadoop]</span><span class=\"token comment\">#source /etc/profile.d/hadoop.sh</span></pre></td></tr></table></figure><p>ä¿®æ”¹é›†ç¾¤é…ç½®æ–‡ä»¶ slavesï¼ˆæ²¡æœ‰åˆ™æ–°å»ºï¼‰</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 hadoop]</span><span class=\"token comment\">#vi slaves</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>node01</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>node02</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>node03</pre></td></tr></table></figure><p>æœ€ååˆ›å»ºéœ€è¦çš„ç›¸å…³ç›®å½•</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 hadoop-2.6.0]</span><span class=\"token comment\">#mkdir -p data/hadoop</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token namespace\">[root@node01 hadoop-2.6.0]</span><span class=\"token comment\">#cd data/hadoop</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token namespace\">[root@node01 hadoop]</span><span class=\"token comment\">#mkdir journaldata</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token namespace\">[root@node01 hadoop]</span><span class=\"token comment\">#mkdir -p tmp/dfs/name</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token namespace\">[root@node01 hadoop]</span><span class=\"token comment\">#mkdir -p tmp/dfs/data</span></pre></td></tr></table></figure><h4 id=\"3-æ‹·è´å¤åˆ¶åˆ°å…¶å®ƒæœºå™¨\"><a class=\"anchor\" href=\"#3-æ‹·è´å¤åˆ¶åˆ°å…¶å®ƒæœºå™¨\">#</a> 3ã€æ‹·è´å¤åˆ¶åˆ°å…¶å®ƒæœºå™¨</h4>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 src]</span><span class=\"token comment\">#scp -r hadoop-2.6.0 node02:$PWD</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token namespace\">[root@node01 src]</span><span class=\"token comment\">#scp -r hadoop-2.6.0 node03:$PWD</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token namespace\">[root@node01 src]</span><span class=\"token comment\">#scp -r /etc/profile root@node02:/etc/profile</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token namespace\">[root@node01 src]</span><span class=\"token comment\">#scp -r /etc/profile root@node03:/etc/profile</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token namespace\">[root@node01 src]</span><span class=\"token comment\">#scp -r /etc/profile.d/hadoop.sh root@node02:/etc/profile.d/hadoop.sh</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token namespace\">[root@node01 src]</span><span class=\"token comment\">#scp -r /etc/profile.d/hadoop.sh root@node03:/etc/profile.d/hadoop.sh</span></pre></td></tr></table></figure><p>ç”Ÿæ•ˆç¯å¢ƒå˜é‡</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node02 hadoop]</span><span class=\"token comment\">#source /etc/profile.d/hadoop.sh</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token namespace\">[root@node02 hadoop]</span><span class=\"token comment\">#source /etc/profile.d/hadoop.sh</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token namespace\">[root@node02 /]</span><span class=\"token comment\">#source/etc/profile</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token namespace\">[root@node03 /]</span><span class=\"token comment\">#source/etc/profile</span></pre></td></tr></table></figure><h4 id=\"4-å¯åŠ¨hadoop\"><a class=\"anchor\" href=\"#4-å¯åŠ¨hadoop\">#</a> 4ã€å¯åŠ¨ hadoop</h4>\n<h5 id=\"æ‰§è¡Œæ ¼å¼åŒ–æ“ä½œ\"><a class=\"anchor\" href=\"#æ‰§è¡Œæ ¼å¼åŒ–æ“ä½œ\">#</a> æ‰§è¡Œæ ¼å¼åŒ–æ“ä½œ</h5>\n<p>1ã€å¯åŠ¨ journalnodeï¼Œä¸‰å°æœºå™¨éƒ½è¦è¿™ä¸€æ­¥æ“ä½œï¼ˆä»…ç¬¬ä¸€æ¬¡å¯åŠ¨ hadoop æ—¶ï¼Œéœ€è¦è¿™ä¸€æ­¥æ“ä½œï¼Œä¹‹åä¸å†éœ€è¦æ‰‹åŠ¨å¯åŠ¨ journalnodeï¼‰</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 ~]</span><span class=\"token comment\">#cd /usr/local/src/hadoop-2.6.0/sbin</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token namespace\">[root@node01 sbin]</span><span class=\"token comment\">#sh hadoop-daemon.sh start journalnode</span></pre></td></tr></table></figure><p>2ã€åœ¨ node01 ä¸Šæ‰§è¡Œæ ¼å¼åŒ–æ“ä½œï¼Œæ ¼å¼åŒ– namenode å’Œ zkfc</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 hadoop-2.6.0]</span><span class=\"token comment\">#hdfs namenode -format</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token namespace\">[root@node01 hadoop-2.6.0]</span><span class=\"token comment\">#hdfs zkfc -formatZK</span></pre></td></tr></table></figure><p>3ã€namenode ä¸»ä»ä¿¡æ¯åŒæ­¥ï¼Œåœ¨ node02 èŠ‚ç‚¹ä¸Šæ‰§è¡ŒåŒæ­¥å‘½ä»¤</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 hadoop-2.6.0]</span><span class=\"token comment\">#bin/hdfs namenode -bootstrapStandby</span></pre></td></tr></table></figure><p>ä¸Šè¿°æ­¥éª¤å®Œæˆåï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥å¯åŠ¨ hadoop äº†</p>\n<h5 id=\"å¯åŠ¨å‘½ä»¤\"><a class=\"anchor\" href=\"#å¯åŠ¨å‘½ä»¤\">#</a> å¯åŠ¨å‘½ä»¤</h5>\n<p>åœ¨ node01 æœºå™¨ä¸Šæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 hadoop-2.6.0]</span><span class=\"token comment\">#sbin/start-all.sh</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token namespace\">[root@node01 hadoop-2.6.0]</span><span class=\"token comment\">#sbin/hadoop-daemon.sh start zkfc</span></pre></td></tr></table></figure><p>åœ¨ node02 æœºå™¨ä¸Šæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node02 hadoop-2.6.0]</span><span class=\"token comment\">#sbin/yarn-daemon.sh start resourcemanager</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token namespace\">[root@node02 hadoop-2.6.0]</span><span class=\"token comment\">#sbin/hadoop-daemon.sh start zkfc</span></pre></td></tr></table></figure><h5 id=\"åœæ­¢å‘½ä»¤\"><a class=\"anchor\" href=\"#åœæ­¢å‘½ä»¤\">#</a> åœæ­¢å‘½ä»¤</h5>\n<p>åœ¨ node01 æœºå™¨ä¸Šæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 hadoop-2.6.0]</span><span class=\"token comment\">#sbin/stop-all.sh</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token namespace\">[root@node01 hadoop-2.6.0]</span><span class=\"token comment\">#sbin/hadoop-daemon.sh stop zkfc</span></pre></td></tr></table></figure><p>åœ¨ node02 æœºå™¨ä¸Šæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node02 hadoop-2.6.0]</span><span class=\"token comment\">#sbin/yarn-daemon.sh stop resourcemanager</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token namespace\">[root@node02 hadoop-2.6.0]</span><span class=\"token comment\">#sbin/hadoop-daemon.sh stop zkfc</span></pre></td></tr></table></figure><h5 id=\"æŸ¥çœ‹æ¯å°èŠ‚ç‚¹çš„è¿›ç¨‹\"><a class=\"anchor\" href=\"#æŸ¥çœ‹æ¯å°èŠ‚ç‚¹çš„è¿›ç¨‹\">#</a> æŸ¥çœ‹æ¯å°èŠ‚ç‚¹çš„è¿›ç¨‹</h5>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01 hadoop-2.6.0]</span><span class=\"token comment\">#jps</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre> NodeManager</pre></td></tr><tr><td data-num=\"3\"></td><td><pre> QuorumPeerMain</pre></td></tr><tr><td data-num=\"4\"></td><td><pre> DFSZKFailoverController</pre></td></tr><tr><td data-num=\"5\"></td><td><pre> DataNode</pre></td></tr><tr><td data-num=\"6\"></td><td><pre> JournalNode</pre></td></tr><tr><td data-num=\"7\"></td><td><pre> NameNode</pre></td></tr><tr><td data-num=\"8\"></td><td><pre> ResourceManager</pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token namespace\">[root@node02 hadoop-2.6.0]</span><span class=\"token comment\">#jps</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre> JournalNode</pre></td></tr><tr><td data-num=\"12\"></td><td><pre> NameNode</pre></td></tr><tr><td data-num=\"13\"></td><td><pre> QuorumPeerMain</pre></td></tr><tr><td data-num=\"14\"></td><td><pre> DFSZKFailoverController</pre></td></tr><tr><td data-num=\"15\"></td><td><pre> ResourceManager</pre></td></tr><tr><td data-num=\"16\"></td><td><pre> DataNode</pre></td></tr><tr><td data-num=\"17\"></td><td><pre> NodeManager</pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token namespace\">[root@node03 hadoop-2.6.0]</span><span class=\"token comment\">#jps</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre> QuorumPeerMain</pre></td></tr><tr><td data-num=\"21\"></td><td><pre> NodeManager</pre></td></tr><tr><td data-num=\"22\"></td><td><pre> DataNode</pre></td></tr><tr><td data-num=\"23\"></td><td><pre> JournalNode</pre></td></tr></table></figure><h2 id=\"3-é€šè¿‡webç•Œé¢æŸ¥çœ‹hadoopä¿¡æ¯\"><a class=\"anchor\" href=\"#3-é€šè¿‡webç•Œé¢æŸ¥çœ‹hadoopä¿¡æ¯\">#</a> 3ã€é€šè¿‡ Web ç•Œé¢æŸ¥çœ‹ hadoop ä¿¡æ¯</h2>\n<p>1ã€æµè§ˆå™¨è®¿é—® http://192.168.2.131:50070\t(active èŠ‚ç‚¹ï¼Œå³ namenode ä¸»èŠ‚ç‚¹)</p>\n<p>2ã€æµè§ˆå™¨è®¿é—® http://192.168.2.132:50070\t(standby èŠ‚ç‚¹ï¼Œå³ namenode å¤‡èŠ‚ç‚¹)</p>\n<p>3ã€æŸ¥çœ‹ yarn çš„ web æ§åˆ¶å°ï¼Œæµè§ˆå™¨è®¿é—® http://192.168.2.131:8088</p>\n<h2 id=\"4-æµ‹è¯•namenodeé«˜å¯ç”¨\"><a class=\"anchor\" href=\"#4-æµ‹è¯•namenodeé«˜å¯ç”¨\">#</a> 4ã€æµ‹è¯• namenode é«˜å¯ç”¨</h2>\n<p>1ã€åœ¨ node01 ä¸Š kill æ‰ namenode è¿›ç¨‹ï¼Œç„¶åé€šè¿‡æµè§ˆå™¨æŸ¥çœ‹ node02 çš„çŠ¶æ€ï¼Œå‘ç°çŠ¶æ€å˜ä¸º activeï¼Œè¯´æ˜é«˜å¯ç”¨æµ‹è¯•æˆåŠŸ</p>\n<p>2ã€é‡æ–°å¯åŠ¨ node01 çš„ namenode è¿›ç¨‹ï¼Œsh <span class=\"exturl\" data-url=\"aHR0cDovL3N0YXJ0LWRmcy5zaA==\">start-dfs.sh</span>, æµè§ˆå™¨è®¿é—® node01ï¼Œæ­¤æ—¶ node01 çš„çŠ¶æ€ä¸º standby</p>\n",
            "tags": []
        },
        {
            "id": "https://methiony.work/2020/11/25/Platform-construction/Hadoop/course-2/HDFS%E7%9A%84API%E6%93%8D%E4%BD%9C/",
            "url": "https://methiony.work/2020/11/25/Platform-construction/Hadoop/course-2/HDFS%E7%9A%84API%E6%93%8D%E4%BD%9C/",
            "title": "HDFSçš„APIæ“ä½œ",
            "date_published": "2020-11-25T13:00:10.000Z",
            "content_html": "<p>::ğŸ““<br />\nä»¥ä¸‹ä¸ºä¸ªäººå­¦ä¹ ç¬”è®°<br />\nè¯¾ç¨‹ï¼š å¤§æ•°æ®è‡ªå­¦æ•™ç¨‹ Hadoop ä»é›¶åˆ°ç²¾é€šå®Œæ•´ç‰ˆ @<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zcGFjZS5iaWxpYmlsaS5jb20vNTg2Mzg5MDQ5\">é»‘é©¬ç¨‹åºå‘˜å¤§æ•°æ®æ•™ç¨‹</span><br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWVrNHkxMTdZcQ==\"> https://www.bilibili.com/video/BV1ek4y117Yq</span><br />\n:::</p>\n",
            "tags": []
        },
        {
            "id": "https://methiony.work/2020/11/25/Platform-construction/Hadoop/course-2/HDFS%E7%9A%84%E6%96%87%E4%BB%B6%E5%8F%8A%E5%85%83%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86/",
            "url": "https://methiony.work/2020/11/25/Platform-construction/Hadoop/course-2/HDFS%E7%9A%84%E6%96%87%E4%BB%B6%E5%8F%8A%E5%85%83%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86/",
            "title": "HDFSçš„æ–‡ä»¶åŠå…ƒæ•°æ®ç®¡ç†",
            "date_published": "2020-11-25T10:55:15.000Z",
            "content_html": "<p>::ğŸ““<br />\nä»¥ä¸‹ä¸ºä¸ªäººå­¦ä¹ ç¬”è®°<br />\nè¯¾ç¨‹ï¼š å¤§æ•°æ®è‡ªå­¦æ•™ç¨‹ Hadoop ä»é›¶åˆ°ç²¾é€šå®Œæ•´ç‰ˆ @<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zcGFjZS5iaWxpYmlsaS5jb20vNTg2Mzg5MDQ5\">é»‘é©¬ç¨‹åºå‘˜å¤§æ•°æ®æ•™ç¨‹</span><br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWVrNHkxMTdZcQ==\"> https://www.bilibili.com/video/BV1ek4y117Yq</span><br />\n:::</p>\n<h1 id=\"hdfsçš„æ–‡ä»¶åŠå…ƒæ•°æ®ç®¡ç†\"><a class=\"anchor\" href=\"#hdfsçš„æ–‡ä»¶åŠå…ƒæ•°æ®ç®¡ç†\">#</a> HDFS çš„æ–‡ä»¶åŠå…ƒæ•°æ®ç®¡ç†</h1>\n<h2 id=\"1-hdfsçš„æ–‡ä»¶æ“ä½œè¿‡ç¨‹\"><a class=\"anchor\" href=\"#1-hdfsçš„æ–‡ä»¶æ“ä½œè¿‡ç¨‹\">#</a> 1ã€HDFS çš„æ–‡ä»¶æ“ä½œè¿‡ç¨‹</h2>\n<h3 id=\"æ–‡ä»¶å†™å…¥è¿‡ç¨‹\"><a class=\"anchor\" href=\"#æ–‡ä»¶å†™å…¥è¿‡ç¨‹\">#</a> æ–‡ä»¶å†™å…¥è¿‡ç¨‹</h3>\n<p><img data-src=\"hdfs%E6%96%87%E4%BB%B6%E5%86%99%E5%85%A5%E8%BF%87%E7%A8%8B.png\" alt=\"å±å¹•æˆªå›¾ 2020-11-25 191055\" /></p>\n<p>1ã€ client å‘èµ·æ–‡ä»¶ä¸Šä¼ è¯·æ±‚ï¼Œé€šè¿‡ RPC ä¸ NameNode å»ºç«‹é€šè®¯ï¼ŒNameNode æ£€æŸ¥ç›®æ ‡æ–‡ä»¶æ˜¯å¦å·²å­˜åœ¨ï¼Œçˆ¶ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œè¿”å›æ˜¯å¦å¯ä»¥ä¸Šä¼ ï¼›<br />\n2ã€ client è¯·æ±‚ç¬¬ä¸€ä¸ª block è¯¥ä¼ è¾“åˆ°å“ªäº› DataNode æœåŠ¡å™¨ä¸Šï¼›<br />\n3ã€ NameNode æ ¹æ®é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šçš„å¤‡ä»½æ•°é‡åŠæœºæ¶æ„ŸçŸ¥åŸç†è¿›è¡Œæ–‡ä»¶åˆ†é…ï¼Œè¿”å›å¯ç”¨çš„ DataNode çš„åœ°å€å¦‚ï¼šAï¼ŒBï¼ŒCï¼›<br />\næ³¨ï¼šHadoop åœ¨è®¾è®¡æ—¶è€ƒè™‘åˆ°æ•°æ®çš„å®‰å…¨ä¸é«˜æ•ˆï¼Œæ•°æ®æ–‡ä»¶é»˜è®¤åœ¨ HDFS ä¸Šå­˜æ”¾ä¸‰ä»½ï¼Œå­˜å‚¨ç­–ç•¥ä¸ºæœ¬åœ°ä¸€ä»½ï¼ŒåŒæœºæ¶å†…å…¶å®ƒæŸä¸€èŠ‚ç‚¹ä¸Šä¸€ä»½ï¼Œä¸åŒæœºæ¶çš„æŸä¸€èŠ‚ç‚¹ä¸Šä¸€ä»½ã€‚<br />\n4ã€ client è¯·æ±‚ 3 å° DataNode ä¸­çš„ä¸€å° A ä¸Šä¼ æ•°æ®ï¼ˆæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª RPC è°ƒç”¨ï¼Œå»ºç«‹ pipelineï¼‰ï¼ŒA æ”¶åˆ°è¯·æ±‚ä¼šç»§ç»­è°ƒç”¨ Bï¼Œç„¶å B è°ƒç”¨ Cï¼Œå°†æ•´ä¸ª pipeline å»ºç«‹å®Œæˆï¼Œåé€çº§è¿”å› clientï¼›<br />\n5ã€ client å¼€å§‹å¾€ A ä¸Šä¼ ç¬¬ä¸€ä¸ª blockï¼ˆå…ˆä»ç£ç›˜è¯»å–æ•°æ®æ”¾åˆ°ä¸€ä¸ªæœ¬åœ°å†…å­˜ç¼“å­˜ï¼‰ï¼Œä»¥ packet ä¸ºå•ä½ï¼ˆé»˜è®¤ 64Kï¼‰ï¼ŒA æ”¶åˆ°ä¸€ä¸ª packet å°±ä¼šä¼ ç»™ Bï¼ŒB ä¼ ç»™ Cï¼›A æ¯ä¼ ä¸€ä¸ª packet ä¼šæ”¾å…¥ä¸€ä¸ªåº”ç­”é˜Ÿåˆ—ç­‰å¾…åº”ç­”ã€‚<br />\n6ã€ æ•°æ®è¢«åˆ†å‰²æˆä¸€ä¸ªä¸ª packet æ•°æ®åŒ…åœ¨ pipeline ä¸Šä¾æ¬¡ä¼ è¾“ï¼Œåœ¨ pipeline åæ–¹å‘ä¸Šï¼Œé€ä¸ªå‘é€ ackï¼ˆå‘½ä»¤æ­£ç¡®åº”ç­”ï¼‰ï¼Œæœ€ç»ˆç”± pipeline ä¸­ç¬¬ä¸€ä¸ª DataNode èŠ‚ç‚¹ A å°† pipelineack å‘é€ç»™ client;<br />\n7ã€ å½“ä¸€ä¸ª block ä¼ è¾“å®Œæˆä¹‹åï¼Œclient å†æ¬¡è¯·æ±‚ NameNode ä¸Šä¼ ç¬¬äºŒä¸ª block åˆ°æœåŠ¡å™¨ã€‚</p>\n<h3 id=\"æ–‡ä»¶è¯»å–è¿‡ç¨‹\"><a class=\"anchor\" href=\"#æ–‡ä»¶è¯»å–è¿‡ç¨‹\">#</a> æ–‡ä»¶è¯»å–è¿‡ç¨‹</h3>\n<p><img data-src=\"C:%5CUsers%5CMethiony%5CPictures%5Chdfs%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96.png\" alt=\"hdfsæ–‡ä»¶è¯»å–\" /></p>\n<p>1ã€ Client å‘ NameNode å‘èµ· RPC è¯·æ±‚ï¼Œæ¥ç¡®å®šè¯·æ±‚æ–‡ä»¶ block æ‰€åœ¨çš„ä½ç½®ï¼›<br />\n2ã€ NameNode ä¼šè§†æƒ…å†µè¿”å›æ–‡ä»¶çš„éƒ¨åˆ†æˆ–è€…å…¨éƒ¨ block åˆ—è¡¨ï¼Œå¯¹äºæ¯ä¸ª blockï¼ŒNameNode éƒ½ä¼šè¿”å›å«æœ‰è¯¥ block å‰¯æœ¬çš„ DataNode åœ°å€ï¼› è¿™äº›è¿”å›çš„ DN åœ°å€ï¼Œä¼šæŒ‰ç…§é›†ç¾¤æ‹“æ‰‘ç»“æ„å¾—å‡º DataNode ä¸å®¢æˆ·ç«¯çš„è·ç¦»ï¼Œç„¶åè¿›è¡Œæ’åºï¼Œæ’åºä¸¤ä¸ªè§„åˆ™ï¼šç½‘ç»œæ‹“æ‰‘ç»“æ„ä¸­è·ç¦» Client è¿‘çš„æ’é å‰ï¼›å¿ƒè·³æœºåˆ¶ä¸­è¶…æ—¶æ±‡æŠ¥çš„ DN çŠ¶æ€ä¸º STALEï¼Œè¿™æ ·çš„æ’é åï¼›<br />\n3ã€ Client é€‰å–æ’åºé å‰çš„ DataNode æ¥è¯»å– blockï¼Œå¦‚æœå®¢æˆ·ç«¯æœ¬èº«å°±æ˜¯ DataNode, é‚£ä¹ˆå°†ä»æœ¬åœ°ç›´æ¥è·å–æ•°æ® (çŸ­è·¯è¯»å–ç‰¹æ€§)ï¼›<br />\n4ã€ åº•å±‚ä¸Šæœ¬è´¨æ˜¯å»ºç«‹ Socket Streamï¼ˆFSDataInputStreamï¼‰ï¼Œé‡å¤çš„è°ƒç”¨çˆ¶ç±» DataInputStream çš„ read æ–¹æ³•ï¼Œç›´åˆ°è¿™ä¸ªå—ä¸Šçš„æ•°æ®è¯»å–å®Œæ¯•ï¼›<br />\n5ã€ å½“è¯»å®Œåˆ—è¡¨çš„ block åï¼Œè‹¥æ–‡ä»¶è¯»å–è¿˜æ²¡æœ‰ç»“æŸï¼Œå®¢æˆ·ç«¯ä¼šç»§ç»­å‘ NameNode è·å–ä¸‹ä¸€æ‰¹çš„ block åˆ—è¡¨ï¼›<br />\n6ã€ è¯»å–å®Œä¸€ä¸ª block éƒ½ä¼šè¿›è¡Œ checksum éªŒè¯ï¼Œå¦‚æœè¯»å– DataNode æ—¶å‡ºç°é”™è¯¯ï¼Œå®¢æˆ·ç«¯ä¼šé€šçŸ¥ NameNodeï¼Œç„¶åå†ä»ä¸‹ä¸€ä¸ªæ‹¥æœ‰è¯¥ block å‰¯æœ¬çš„ DataNode ç»§ç»­è¯»ã€‚<br />\n7ã€ read æ–¹æ³•æ˜¯å¹¶è¡Œçš„è¯»å– block ä¿¡æ¯ï¼Œä¸æ˜¯ä¸€å—ä¸€å—çš„è¯»å–ï¼›NameNode åªæ˜¯è¿”å› Client è¯·æ±‚åŒ…å«å—çš„ DataNode åœ°å€ï¼Œå¹¶ä¸æ˜¯è¿”å›è¯·æ±‚å—çš„æ•°æ®ï¼›<br />\n8ã€ æœ€ç»ˆè¯»å–æ¥æ‰€æœ‰çš„ block ä¼šåˆå¹¶æˆä¸€ä¸ªå®Œæ•´çš„æœ€ç»ˆæ–‡ä»¶ã€‚</p>\n<h2 id=\"2-hdfsçš„å…ƒæ•°æ®ç®¡ç†\"><a class=\"anchor\" href=\"#2-hdfsçš„å…ƒæ•°æ®ç®¡ç†\">#</a> 2ã€HDFS çš„å…ƒæ•°æ®ç®¡ç†</h2>\n<p>åœ¨ Hadoop é›†ç¾¤ä¸­ï¼ŒNameNode æ‰€æœ‰å…ƒæ•°æ®ä¿¡æ¯ä¿å­˜åœ¨ Fslmage å’Œ Eidts æ–‡ä»¶ä¸­ï¼Œå…ƒæ•°æ®ä¿¡æ¯çš„ä¿å­˜ç›®å½•åœ¨ hdfs-site.xml ä¸­é…ç½®</p>\n<p>fsimageï¼šNameNode ä¸­å…ƒæ•°æ®çš„é•œåƒï¼Œå­˜æ”¾äº†ä¸€ä»½æ¯”è¾ƒå®Œæ•´çš„å…ƒæ•°æ®ä¿¡æ¯</p>\n<p>editsï¼šå­˜æ”¾å®¢æˆ·ç«¯æœ€è¿‘ä¸€æ®µæ—¶é—´çš„æ“ä½œæ—¥å¿—</p>\n<p>SecondaryNameNode è¾…åŠ©ç®¡ç† fsimage å’Œ edits æ–‡ä»¶</p>\n<h3 id=\"fsimageä¸­çš„æ–‡ä»¶ä¿¡æ¯æŸ¥çœ‹\"><a class=\"anchor\" href=\"#fsimageä¸­çš„æ–‡ä»¶ä¿¡æ¯æŸ¥çœ‹\">#</a> fsimage ä¸­çš„æ–‡ä»¶ä¿¡æ¯æŸ¥çœ‹</h3>\n<p>ä½¿ç”¨ hdfs oiv</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>cd <span class=\"token operator\">/</span>opt<span class=\"token operator\">/</span>bigdata<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">-</span>3<span class=\"token punctuation\">.</span>1<span class=\"token punctuation\">.</span>4<span class=\"token operator\">/</span>hadoopDatas<span class=\"token operator\">/</span>namenodeDatas<span class=\"token operator\">/</span>current<span class=\"token operator\">/</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>hdfs oiv <span class=\"token operator\">-</span>i fsimage_0000000000000000010</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token operator\">-</span>p XML <span class=\"token operator\">-</span>o my_fsimage<span class=\"token punctuation\">.</span>xml</pre></td></tr></table></figure><h3 id=\"editsä¸­çš„æ–‡ä»¶ä¿¡æ¯æŸ¥çœ‹\"><a class=\"anchor\" href=\"#editsä¸­çš„æ–‡ä»¶ä¿¡æ¯æŸ¥çœ‹\">#</a> edits ä¸­çš„æ–‡ä»¶ä¿¡æ¯æŸ¥çœ‹</h3>\n<p>ä½¿ç”¨ hdfs oev</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>cd <span class=\"token operator\">/</span>opt<span class=\"token operator\">/</span>bigdata<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">-</span>3<span class=\"token punctuation\">.</span>1<span class=\"token punctuation\">.</span>4<span class=\"token operator\">/</span>hadoopDatas<span class=\"token operator\">/</span>nn<span class=\"token operator\">/</span>edits<span class=\"token operator\">/</span>current<span class=\"token operator\">/</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>hdfs oev <span class=\"token operator\">-</span>i edits_0000000000000000001<span class=\"token operator\">-</span>0000000000000000009</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token operator\">-</span>p XML <span class=\"token operator\">-</span>o myedit<span class=\"token punctuation\">.</span>xml</pre></td></tr></table></figure>",
            "tags": []
        },
        {
            "id": "https://methiony.work/2020/11/24/Platform-construction/Hadoop/course-2/Hadoop%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D/",
            "url": "https://methiony.work/2020/11/24/Platform-construction/Hadoop/course-2/Hadoop%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D/",
            "title": "HadoopåŸºæœ¬ä»‹ç»åŠç›¸å…³çŸ¥è¯†",
            "date_published": "2020-11-24T03:28:23.000Z",
            "content_html": "<p>::ğŸ““<br />\nä»¥ä¸‹ä¸ºä¸ªäººå­¦ä¹ ç¬”è®°<br />\nè¯¾ç¨‹ï¼š å¤§æ•°æ®è‡ªå­¦æ•™ç¨‹ Hadoop ä»é›¶åˆ°ç²¾é€šå®Œæ•´ç‰ˆ @<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zcGFjZS5iaWxpYmlsaS5jb20vNTg2Mzg5MDQ5\">é»‘é©¬ç¨‹åºå‘˜å¤§æ•°æ®æ•™ç¨‹</span><br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWVrNHkxMTdZcQ==\"> https://www.bilibili.com/video/BV1ek4y117Yq</span><br />\n:::</p>\n<h1 id=\"hadoopçš„ä»‹ç»åŠç›¸å…³çŸ¥è¯†\"><a class=\"anchor\" href=\"#hadoopçš„ä»‹ç»åŠç›¸å…³çŸ¥è¯†\">#</a> Hadoop çš„ä»‹ç»åŠç›¸å…³çŸ¥è¯†</h1>\n<p>ç‹­ä¹‰ä¸Šï¼ŒHadoop å°±æ˜¯å•ç‹¬æŒ‡ä»£ Hadoop è¿™ä¸ªè½¯ä»¶</p>\n<p>HDFSï¼šåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ</p>\n<p>MapReduceï¼šåˆ†å¸ƒå¼è®¡ç®—ç³»ç»Ÿ</p>\n<p>Yarnï¼šåˆ†å¸ƒå¼æ ·é›†ç¾¤èµ„æºç®¡ç†</p>\n<p>å¹¿ä¹‰ä¸Šï¼ŒHadoop æŒ‡ä»£å¤§æ•°æ®çš„ä¸€ä¸ªç”Ÿæ€åœˆï¼ŒåŒ…æ‹¬å…¶ä»–</p>\n<h2 id=\"1-hadoopæ ¸å¿ƒ-hdfs\"><a class=\"anchor\" href=\"#1-hadoopæ ¸å¿ƒ-hdfs\">#</a> 1ã€Hadoop æ ¸å¿ƒ - HDFS</h2>\n<h3 id=\"1-ä»‹ç»\"><a class=\"anchor\" href=\"#1-ä»‹ç»\">#</a> 1ã€ä»‹ç»ï¼š</h3>\n<p>å¤§é‡æ•°æ®è·¨æœºå™¨å­˜å‚¨ï¼Œç»Ÿä¸€ç®¡ç†åˆ†å¸ƒåœ¨é›†ç¾¤ä¸Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œä¹Ÿå°±æ˜¯åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ</p>\n<h3 id=\"2-æ¶æ„\"><a class=\"anchor\" href=\"#2-æ¶æ„\">#</a> 2ã€æ¶æ„</h3>\n<p>HDFS æ˜¯ä¸€ä¸ªä¸» / ä»ï¼ˆMater/Slaveï¼‰ä½“ç³»ç»“æ„</p>\n<p>HDFS ç”±å››éƒ¨åˆ†ç»„æˆï¼ŒHDFS Clientã€NameNodeã€DataNode å’Œ Secondary NameNode</p>\n<h3 id=\"3-namenodeä½œç”¨\"><a class=\"anchor\" href=\"#3-namenodeä½œç”¨\">#</a> 3ã€NameNode ä½œç”¨</h3>\n<p>NameNode åœ¨å†…å­˜ä¸­ä¿å­˜ç€æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„åç§°ç©ºé—´å’Œæ–‡ä»¶æ•°æ®å—çš„åœ°å€æ˜ å°„ï¼Œæ•´ä¸ª HDFS å¯å­˜å‚¨çš„æ–‡ä»¶å—é™äº NameNode çš„å†…å­˜å¤§å°</p>\n<p>1ã€NameNode å…ƒæ•°æ®ä¿¡æ¯ï¼šæ–‡ä»¶åï¼Œæ–‡ä»¶ç›®å½•ç»“æ„ï¼Œæ–‡ä»¶å±æ€§ï¼Œæ¯ä¸ªæ–‡ä»¶çš„å—åˆ—è¡¨ï¼Œåˆ—è¡¨ä¸­å—äºå—æ‰€åœ¨ DataNode ä¹‹é—´çš„åœ°å€æ˜ å°„å…³ç³»ï¼›å†…å­˜åŠ è½½æ–‡ä»¶ç³»ç»Ÿä¸­æ–‡ä»¶äºæ•°æ®å—çš„å¼•ç”¨å…³ç³»ï¼Œä¼šå®šæœŸä¿å­˜åˆ°æœ¬åœ°ç£ç›˜ï¼ˆfsimage æ–‡ä»¶å’Œ edits æ–‡ä»¶ï¼‰</p>\n<p>2ã€NameNode æ–‡ä»¶æ“ä½œï¼šè´Ÿè´£æ–‡ä»¶å…ƒæ•°æ®çš„æ“ä½œï¼ŒDatanode è´Ÿè´£æ–‡ä»¶çš„è¯»å†™è¯·æ±‚ï¼Œæ•°æ®æµä¸ç»è¿‡ NameNodeï¼Œä½†ä¼šè¯¢é—®äº datanode çš„è”ç³»</p>\n<p>3ã€Namenode å‰¯æœ¬ï¼šæ–‡ä»¶æ•°æ®å—ç”± NameNode å†³å®šæ”¾åœ¨æŸä¸ª DataNode ä¸Šï¼Œæ ¹æ®å…¨å±€æƒ…å†µæ”¾ç½®å‰¯æœ¬å†³å®š</p>\n<p>4ã€å¿ƒè·³æœºåˆ¶ï¼šNameNode ä¸ DataNode ä¹‹é—´å­˜åœ¨å¿ƒè·³ä¿¡æ¯ï¼ŒNameNode å‘¨æœŸæ€§æ¥æ”¶å¿ƒè·³å’Œå—çš„çŠ¶æ€æŠ¥å‘Šä¿¡æ¯ï¼Œè‹¥æ¥æ”¶åˆ°ä¿¡æ¯ï¼Œåˆ™è®¤ä¸ºæ­£å¸¸ï¼Œåä¹‹ï¼Œå¯¹å·²ç»å®•æœºçš„ datanode ä¸Šçš„æ•°æ®å—é‡æ–°å¤åˆ¶</p>\n<h3 id=\"4-datanodeä½œç”¨\"><a class=\"anchor\" href=\"#4-datanodeä½œç”¨\">#</a> 4ã€Datanode ä½œç”¨</h3>\n<p>æä¾›çœŸå®æ–‡ä»¶æ•°æ®çš„å­˜å‚¨æœåŠ¡</p>\n<p>1ã€Data Node ä»¥æ•°æ®å—çš„å½¢å¼å­˜å‚¨ HDFS æ–‡ä»¶</p>\n<p>2ã€å“åº” HDFS å®¢æˆ·ç«¯è¯»å†™è¯·æ±‚</p>\n<p>3ã€å‘¨æœŸæ€§å‘ NameNode æ±‡æŠ¥å¿ƒè·³ã€æ•°æ®å—ã€ç¼“å­˜æ•°æ®å—ä¿¡æ¯</p>\n<h3 id=\"5-hdfsçš„å‰¯æœ¬æœºåˆ¶å’Œæœºæ¶æ„ŸçŸ¥\"><a class=\"anchor\" href=\"#5-hdfsçš„å‰¯æœ¬æœºåˆ¶å’Œæœºæ¶æ„ŸçŸ¥\">#</a> 5ã€HDFS çš„å‰¯æœ¬æœºåˆ¶å’Œæœºæ¶æ„ŸçŸ¥</h3>\n<p>å‰¯æœ¬æœºåˆ¶ï¼šæ‰€æœ‰æ–‡ä»¶éƒ½ä»¥ block å—çš„æ–¹å¼å­˜æ”¾åœ¨ HDFS æ–‡ä»¶ç³»ç»Ÿå½“ä¸­</p>\n<p>æœºæ¶æ„ŸçŸ¥ï¼šæŠŠæ–‡ä»¶åˆ‡åˆ†æˆå‰¯æœ¬æ”¾åœ¨ä¸åŒæœºæ¶ä¸­ï¼Œä¿è¯æ•°æ®å®¹é”™èƒ½åŠ›</p>\n<h3 id=\"6-hdfsçš„å‘½ä»¤è¡Œä½¿ç”¨\"><a class=\"anchor\" href=\"#6-hdfsçš„å‘½ä»¤è¡Œä½¿ç”¨\">#</a> 6ã€HDFS çš„å‘½ä»¤è¡Œä½¿ç”¨</h3>\n<h4 id=\"åŸºç¡€å‘½ä»¤\"><a class=\"anchor\" href=\"#åŸºç¡€å‘½ä»¤\">#</a> åŸºç¡€å‘½ä»¤</h4>\n<table>\n<thead>\n<tr>\n<th>åºå·</th>\n<th>å‘½ä»¤</th>\n<th>ä½œç”¨</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>-help</td>\n<td>è¾“å‡ºè¿™ä¸ªå‘½ä»¤å‚æ•°</td>\n</tr>\n<tr>\n<td>2</td>\n<td>-ls</td>\n<td>æ˜¾ç¤ºç›®å½•ä¿¡æ¯</td>\n</tr>\n<tr>\n<td>3</td>\n<td>-mkdir</td>\n<td>åœ¨ HDFS ä¸Šåˆ›å»ºç›®å½•</td>\n</tr>\n<tr>\n<td>4</td>\n<td>-moveFromLocal</td>\n<td>ä»æœ¬åœ°å‰ªåˆ‡ç²˜è´´åˆ° HDFS</td>\n</tr>\n<tr>\n<td>5</td>\n<td>-appendToFile</td>\n<td>è¿½åŠ ä¸€ä¸ªæ–‡ä»¶åˆ°å·²ç»å­˜åœ¨çš„æ–‡ä»¶æœ«å°¾</td>\n</tr>\n<tr>\n<td>6</td>\n<td>-cat</td>\n<td>æ˜¾ç¤ºæ–‡ä»¶å†…å®¹</td>\n</tr>\n<tr>\n<td>7</td>\n<td>-chgrp ã€-chmodã€-chown</td>\n<td>Linux æ–‡ä»¶ç³»ç»Ÿä¸­çš„ç”¨æ³•ä¸€æ ·ï¼Œä¿®æ”¹æ–‡ä»¶æ‰€å±æƒé™</td>\n</tr>\n<tr>\n<td>8</td>\n<td>-copyFromLocal</td>\n<td>ä»æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­æ‹·è´æ–‡ä»¶åˆ° HDFS è·¯å¾„å»</td>\n</tr>\n<tr>\n<td>9</td>\n<td>-copyToLocal</td>\n<td>ä» HDFS æ‹·è´åˆ°æœ¬åœ°</td>\n</tr>\n<tr>\n<td>10</td>\n<td>-cp</td>\n<td>ä» HDFS çš„ä¸€ä¸ªè·¯å¾„æ‹·è´åˆ° HDFS çš„å¦ä¸€ä¸ªè·¯å¾„</td>\n</tr>\n<tr>\n<td>11</td>\n<td>-mv</td>\n<td>åœ¨ HDFS ç›®å½•ä¸­ç§»åŠ¨æ–‡ä»¶</td>\n</tr>\n<tr>\n<td>12</td>\n<td>-get</td>\n<td>ç­‰åŒäº copyToLocalï¼Œå°±æ˜¯ä» HDFS ä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°</td>\n</tr>\n<tr>\n<td>13</td>\n<td>-getmerge</td>\n<td>åˆå¹¶ä¸‹è½½å¤šä¸ªæ–‡ä»¶</td>\n</tr>\n<tr>\n<td>14</td>\n<td>-put</td>\n<td>ç­‰åŒäº copyFromLocal</td>\n</tr>\n<tr>\n<td>15</td>\n<td>-tail</td>\n<td>æ˜¾ç¤ºä¸€ä¸ªæ–‡ä»¶çš„æœ«å°¾</td>\n</tr>\n<tr>\n<td>16</td>\n<td>-rm</td>\n<td>åˆ é™¤æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹</td>\n</tr>\n<tr>\n<td>17</td>\n<td>-rmdir</td>\n<td>åˆ é™¤ç©ºç›®å½•</td>\n</tr>\n<tr>\n<td>18</td>\n<td>-du</td>\n<td>ç»Ÿè®¡æ–‡ä»¶å¤¹çš„å¤§å°ä¿¡æ¯</td>\n</tr>\n<tr>\n<td>19</td>\n<td>-setrep</td>\n<td>è®¾ç½® HDFS ä¸­æ–‡ä»¶çš„å‰¯æœ¬æ•°é‡</td>\n</tr>\n<tr>\n<td>20</td>\n<td>- expunge</td>\n<td>æ¸…ç©º HDFS åƒåœ¾æ¡¶</td>\n</tr>\n</tbody>\n</table>\n<p>æ ¼å¼ï¼š</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hdfs dfs å‘½ä»¤è¡Œ path</pre></td></tr></table></figure><h4 id=\"é«˜çº§å‘½ä»¤\"><a class=\"anchor\" href=\"#é«˜çº§å‘½ä»¤\">#</a> é«˜çº§å‘½ä»¤</h4>\n<h5 id=\"1-hdfsçš„æ–‡ä»¶é™é¢é…ç½®\"><a class=\"anchor\" href=\"#1-hdfsçš„æ–‡ä»¶é™é¢é…ç½®\">#</a> 1ã€HDFS çš„æ–‡ä»¶é™é¢é…ç½®</h5>\n<p>HDFS çš„é…é¢æŒ‡å®šé’ˆå¯¹çš„æ˜¯ç›®å½•ï¼Œè€Œéè´¦å·ï¼Œå¯ä»¥è®©æ¯ä¸ªè´¦å·ä»…æ“ä½œæŸä¸€ä¸ªç›®å½•ï¼Œç„¶åå¯¹ç›®å½•è¿›è¡Œé…ç½®</p>\n<p>HDFS é™é¢é…ç½®å…è®¸ä»¥æ–‡ä»¶å¤§å°ã€æ–‡ä»¶ä¸ªæ•°æ¥é™åˆ¶æˆ‘ä»¬åœ¨æŸä¸ªç›®å½•ä¸‹ä¸Šä¼ æ–‡ä»¶æ•°é‡æˆ–æ–‡ä»¶å†…å®¹æ€»é‡</p>\n<p>æŸ¥çœ‹é…é¢ä¿¡æ¯ï¼Œpath æŒ‡ä»£æ–‡ä»¶è·¯å¾„</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hdfs dfs <span class=\"token operator\">-</span>count <span class=\"token operator\">-</span>q <span class=\"token operator\">-</span>h path</pre></td></tr></table></figure><h6 id=\"æ•°é‡é™é¢\"><a class=\"anchor\" href=\"#æ•°é‡é™é¢\">#</a> æ•°é‡é™é¢</h6>\n<p>è®¾ç½®æœ€å¤§ä¸Šä¼ æ–‡ä»¶ä¸ªæ•°ä¸º 2, æ³¨æ„è‡ªèº«ä¹ŸåŒ…æ‹¬ä¸€ä¸ªï¼Œæ‰€ä»¥åªèƒ½ä¸Šä¼ ä¸€ä¸ª</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hdfs dfsadmin <span class=\"token operator\">-</span>setQuota 2 path</pre></td></tr></table></figure><p>æ¸…æ¥šæ–‡ä»¶æ•°é‡é™é¢é…ç½®</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hdfs dfsadmin <span class=\"token operator\">-</span>clrQuota path</pre></td></tr></table></figure><h6 id=\"ç©ºé—´å¤§å°é™é¢\"><a class=\"anchor\" href=\"#ç©ºé—´å¤§å°é™é¢\">#</a> ç©ºé—´å¤§å°é™é¢</h6>\n<p>è®¾ç½®ç©ºé—´é…é¢æ—¶ï¼Œè®¾ç½®ç©ºé—´å¤§å°è‡³å°‘ä¸º block_size*3 å¤§å°</p>\n<p>é™åˆ¶ç©ºé—´å¤§å°ä¸º 4kb</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hdfs dfsadmin <span class=\"token operator\">-</span>setSpaceQuota 4k path</pre></td></tr></table></figure><p>ç”Ÿæˆä»»æ„å¤§å°æ–‡ä»¶å‘½ä»¤</p>\n<p>ç”Ÿæˆä¸€ä¸ª 2M çš„æ–‡ä»¶ï¼ˆbs*countï¼‰</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>dd <span class=\"token keyword\">if</span>=<span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>zero of=1<span class=\"token punctuation\">.</span>txt bs=2M count=1</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>dd <span class=\"token keyword\">if</span>=<span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>zero of=1<span class=\"token punctuation\">.</span>txt bs=1M count=2</pre></td></tr></table></figure><p>æ¸…é™¤é…ç½®</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hdfs dfsadmin <span class=\"token operator\">-</span>clrSpaceQuota path</pre></td></tr></table></figure><h5 id=\"2-hdfsçš„å®‰å…¨æ¨¡å¼\"><a class=\"anchor\" href=\"#2-hdfsçš„å®‰å…¨æ¨¡å¼\">#</a> 2ã€hdfs çš„å®‰å…¨æ¨¡å¼</h5>\n<p>å®‰å…¨æ¨¡å¼æ˜¯ Hadoop çš„ä¸€ç§ä¿æŠ¤æœºåˆ¶ï¼Œç”¨äºä¿è¯é›†ç¾¤ä¸­çš„æ•°æ®å—çš„å®‰å…¨æ€§</p>\n<p>åœ¨å®‰å…¨æ¨¡å¼çŠ¶æ€ä¸‹ï¼Œæ–‡ä»¶ç³»ç»Ÿåªæ¥å—è¯»æ•°æ®è¯·æ±‚ï¼Œè€Œä¸æ¥å—åˆ é™¤ã€ä¿®æ”¹ç­‰å˜æ›´è¯·æ±‚å½“æ•´ä¸ªç³»ç»Ÿè¾¾åˆ°å®‰å…¨æ ‡å‡†ï¼Œhdfs è‡ªåŠ¨ç¦»å¼€å®‰å…¨æ¨¡å¼</p>\n<p>å®‰å…¨æ¨¡å¼æ“ä½œå‘½ä»¤</p>\n<p>æŸ¥çœ‹å®‰å…¨æ¨¡å¼çŠ¶æ€</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hdfs dfsadmin <span class=\"token operator\">-</span>safemode get</pre></td></tr></table></figure><p>è¿›å…¥å®‰å…¨æ¨¡å¼</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hdfs dfsadmin <span class=\"token operator\">-</span>safemode enter</pre></td></tr></table></figure><p>ç¦»å¼€å®‰å…¨æ¨¡å¼</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hdfs dfsadmin <span class=\"token operator\">-</span>safemode leave</pre></td></tr></table></figure><h2 id=\"2-hdfsçš„åŸºå‡†æµ‹è¯•\"><a class=\"anchor\" href=\"#2-hdfsçš„åŸºå‡†æµ‹è¯•\">#</a> 2ã€Hdfs çš„åŸºå‡†æµ‹è¯•</h2>\n<p>1ã€æµ‹è¯•å†™å…¥é€Ÿåº¦</p>\n<p>å‘ HDFS æ–‡ä»¶ç³»ç»Ÿä¸­å†™å…¥æ•°æ®ï¼Œ10 ä¸ªæ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶ 10MBï¼Œæ–‡ä»¶å­˜æ”¾åˆ° /benchmarks/TestDFSIO ä¸­</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hadoop jar <span class=\"token operator\">/</span>opt<span class=\"token operator\">/</span>bigdata<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">-</span>3<span class=\"token punctuation\">.</span>1<span class=\"token punctuation\">.</span>4<span class=\"token operator\">/</span>share<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">/</span>mapreduce<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">-</span>mapreduce<span class=\"token operator\">-</span>client<span class=\"token operator\">-</span>jobclient<span class=\"token operator\">-</span>3<span class=\"token punctuation\">.</span>1<span class=\"token punctuation\">.</span>4<span class=\"token punctuation\">.</span>jar  TestDFSIO <span class=\"token operator\">-</span><span class=\"token function\">write</span> <span class=\"token operator\">-</span>nrFiles 10 <span class=\"token operator\">-</span>fileSize 10MB</pre></td></tr></table></figure><p>å®Œæˆä¹‹åæŸ¥çœ‹å†™å…¥é€Ÿåº¦ç»“æœ</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hdfs dfs <span class=\"token operator\">-</span>text <span class=\"token operator\">/</span>benchmarks<span class=\"token operator\">/</span>TestDFSIO<span class=\"token operator\">/</span>io_write<span class=\"token operator\">/</span>part<span class=\"token operator\">-</span>00000</pre></td></tr></table></figure><p>2ã€æµ‹è¯•è¯»å–é€Ÿåº¦</p>\n<p>æµ‹è¯• hdfs çš„è¯»å–æ–‡ä»¶æ€§èƒ½ï¼Œåœ¨ hdfs æ–‡ä»¶ç³»ç»Ÿä¸­è¯»å…¥ 10 ä¸ªæ–‡ä»¶ï¼Œæ¯ä¸ª 10MB</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hadoop jar <span class=\"token operator\">/</span>opt<span class=\"token operator\">/</span>bigdata<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">-</span>3<span class=\"token punctuation\">.</span>1<span class=\"token punctuation\">.</span>4<span class=\"token operator\">/</span>share<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">/</span>mapreduce<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">-</span>mapreduce<span class=\"token operator\">-</span>client<span class=\"token operator\">-</span>jobclient<span class=\"token operator\">-</span>3<span class=\"token punctuation\">.</span>1<span class=\"token punctuation\">.</span>4<span class=\"token punctuation\">.</span>jar  TestDFSIO <span class=\"token operator\">-</span>read <span class=\"token operator\">-</span>nrFiles 10 <span class=\"token operator\">-</span>fileSize 10MB</pre></td></tr></table></figure><p>æŸ¥çœ‹è¯»å–ç»“æœ</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hdfs dfs <span class=\"token operator\">-</span>text <span class=\"token operator\">/</span>benchmarks<span class=\"token operator\">/</span>TestDFSIO<span class=\"token operator\">/</span>io_write<span class=\"token operator\">/</span>part<span class=\"token operator\">-</span>00000</pre></td></tr></table></figure><p>3ã€æ¸…æ¥šæµ‹è¯•æ•°æ®</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hadoop jar <span class=\"token operator\">/</span>opt<span class=\"token operator\">/</span>bigdata<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">-</span>3<span class=\"token punctuation\">.</span>1<span class=\"token punctuation\">.</span>4<span class=\"token operator\">/</span>share<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">/</span>mapreduce<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">-</span>mapreduce<span class=\"token operator\">-</span>client<span class=\"token operator\">-</span>jobclient<span class=\"token operator\">-</span>3<span class=\"token punctuation\">.</span>1<span class=\"token punctuation\">.</span>4<span class=\"token punctuation\">.</span>jar  TestDFSIO <span class=\"token operator\">-</span>clean</pre></td></tr></table></figure>",
            "tags": []
        },
        {
            "id": "https://methiony.work/2020/11/23/Platform-construction/Zookeeper/course-1/Zookeeper%E7%9A%84API%E6%93%8D%E4%BD%9C/",
            "url": "https://methiony.work/2020/11/23/Platform-construction/Zookeeper/course-1/Zookeeper%E7%9A%84API%E6%93%8D%E4%BD%9C/",
            "title": "Zookeeperçš„APIæ“ä½œ",
            "date_published": "2020-11-23T11:33:46.000Z",
            "content_html": "<p>:::note info<br />\n ä»¥ä¸‹ä¸ºä¸ªäººå­¦ä¹ ç¬”è®°å’Œä¹ é¢˜æ•´ç†<br />\nè¯¾ç¨‹ï¼š å¤§æ•°æ®è‡ªå­¦æ•™ç¨‹ Hadoop ä»é›¶åˆ°ç²¾é€šå®Œæ•´ç‰ˆ @<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zcGFjZS5iaWxpYmlsaS5jb20vNTg2Mzg5MDQ5\">é»‘é©¬ç¨‹åºå‘˜å¤§æ•°æ®æ•™ç¨‹</span><br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWVrNHkxMTdZcQ==\"> https://www.bilibili.com/video/BV1ek4y117Yq</span><br />\n:::</p>\n<h1 id=\"zookeeperçš„javaapiæ“ä½œ\"><a class=\"anchor\" href=\"#zookeeperçš„javaapiæ“ä½œ\">#</a> Zookeeper çš„ javaAPI æ“ä½œ</h1>\n<p>è¿™é‡Œæ“ä½œ Zookeeper çš„ JavaAPI ä½¿ç”¨çš„æ˜¯ Zookeeper å®¢æˆ·ç«¯æ¡†æ¶ Curator</p>\n<p>Curator åŒ…å«ï¼š</p>\n<p>curator-frameworkï¼šå¯¹ zookeeper çš„åº•å±‚ api çš„ä¸€äº›å°è£…</p>\n<p>curator-recipesï¼šå°è£…äº†ä¸€äº›é«˜çº§ç‰¹æ€§ï¼Œå¦‚ï¼šCache äº‹ä»¶ç›‘å¬ã€é€‰ä¸¾ã€åˆ†å¸ƒå¼é”ã€åˆ†å¸ƒå¼è®¡æ•°å™¨ç­‰</p>\n<h2 id=\"1-åˆ›å»ºjavaå·¥ç¨‹å¯¼å…¥jaråŒ…\"><a class=\"anchor\" href=\"#1-åˆ›å»ºjavaå·¥ç¨‹å¯¼å…¥jaråŒ…\">#</a> 1ã€åˆ›å»º Java å·¥ç¨‹ï¼Œå¯¼å…¥ jar åŒ…</h2>\n<p>åˆ›å»º maven Java å·¥ç¨‹ï¼Œå¯¼å…¥ jar åŒ…</p>\n<h3 id=\"æ·»åŠ pornæ–‡ä»¶\"><a class=\"anchor\" href=\"#æ·»åŠ pornæ–‡ä»¶\">#</a> æ·»åŠ  Porn æ–‡ä»¶</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>dependencies<span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>dependency<span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>groupId<span class=\"token punctuation\">></span></span>org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>curator<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>groupId<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>artifactId<span class=\"token punctuation\">></span></span>curator<span class=\"token operator\">-</span>framework<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>artifactId<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>version<span class=\"token punctuation\">></span></span><span class=\"token number\">2.12</span><span class=\"token number\">.0</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>version<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>dependency<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>dependency<span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>groupId<span class=\"token punctuation\">></span></span>org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>curator<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>groupId<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>artifactId<span class=\"token punctuation\">></span></span>curator<span class=\"token operator\">-</span>recipes<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>artifactId<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>version<span class=\"token punctuation\">></span></span><span class=\"token number\">2.12</span><span class=\"token number\">.0</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>version<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>dependency<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>dependency<span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>groupId<span class=\"token punctuation\">></span></span>com<span class=\"token punctuation\">.</span>google<span class=\"token punctuation\">.</span>collections<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>groupId<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>artifactId<span class=\"token punctuation\">></span></span>google<span class=\"token operator\">-</span>collections<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>artifactId<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>version<span class=\"token punctuation\">></span></span><span class=\"token number\">1.0</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>version<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>dependency<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>dependency<span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>groupId<span class=\"token punctuation\">></span></span>junit<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>groupId<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>artifactId<span class=\"token punctuation\">></span></span>junit<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>artifactId<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>version<span class=\"token punctuation\">></span></span>RELEASE<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>version<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>dependency<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>dependency<span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>groupId<span class=\"token punctuation\">></span></span>org<span class=\"token punctuation\">.</span>slf4j<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>groupId<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>artifactId<span class=\"token punctuation\">></span></span>slf4j<span class=\"token operator\">-</span>simple<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>artifactId<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>version<span class=\"token punctuation\">></span></span><span class=\"token number\">1.7</span><span class=\"token number\">.25</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>version<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>dependency<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>dependencies<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>build<span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>plugins<span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>plugin<span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>            <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>groupId<span class=\"token punctuation\">></span></span>org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>maven<span class=\"token punctuation\">.</span>plugins<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>groupId<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>            <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>artifactId<span class=\"token punctuation\">></span></span>maven<span class=\"token operator\">-</span>compiler<span class=\"token operator\">-</span>plugin<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>artifactId<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>            <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>version<span class=\"token punctuation\">></span></span><span class=\"token number\">3.2</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>version<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>            <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>configuration<span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>                <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>source<span class=\"token punctuation\">></span></span><span class=\"token number\">1.8</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>source<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>                <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>target<span class=\"token punctuation\">></span></span><span class=\"token number\">1.8</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>target<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>                <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>encoding<span class=\"token punctuation\">></span></span>UTF<span class=\"token operator\">-</span><span class=\"token number\">8</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>encoding<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>configuration<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>plugin<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>plugins<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>build<span class=\"token operator\">></span></pre></td></tr></table></figure><p>åœ¨ Java å·¥ç¨‹çš„ src ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª Java ç±»</p>\n<h2 id=\"2-åˆ›å»ºæ°¸ä¹…èŠ‚ç‚¹\"><a class=\"anchor\" href=\"#2-åˆ›å»ºæ°¸ä¹…èŠ‚ç‚¹\">#</a> 2ã€åˆ›å»ºæ°¸ä¹…èŠ‚ç‚¹</h2>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">createZnode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token comment\">// å®šåˆ¶ä¸€ä¸ªé‡è¯•ç­–ç•¥</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token class-name\">RetryPolicy</span> retryPolicy <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ExponentialBackoffRetry</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token comment\">// è·å–ä¸€ä¸ªå®¢æˆ·ç«¯å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token class-name\">String</span> connectionStr <span class=\"token operator\">=</span> <span class=\"token string\">\"192.168.2.128:2181,192.168.2.129:2181,192.168.2.130:2181\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token class-name\">CuratorFramework</span> client <span class=\"token operator\">=</span> <span class=\"token class-name\">CuratorFrameworkFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">newClient</span><span class=\"token punctuation\">(</span>connectionStr<span class=\"token punctuation\">,</span> <span class=\"token number\">8000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8000</span><span class=\"token punctuation\">,</span> retryPolicy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token comment\">// å¼€å¯å®¢æˆ·ç«¯</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        client<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token comment\">// åˆ›å»ºèŠ‚ç‚¹</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        client<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">creatingParentsIfNeeded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">withMode</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CreateMode</span><span class=\"token punctuation\">.</span>PERSISTENT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/hello2\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"world\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">getBytes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token comment\">// å…³é—­å®¢æˆ·ç«¯</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        client<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"3-åˆ›å»ºä¸´æ—¶èŠ‚ç‚¹\"><a class=\"anchor\" href=\"#3-åˆ›å»ºä¸´æ—¶èŠ‚ç‚¹\">#</a> 3ã€åˆ›å»ºä¸´æ—¶èŠ‚ç‚¹</h2>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">createtmpZnode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token comment\">// å®šåˆ¶ä¸€ä¸ªé‡è¯•ç­–ç•¥</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token class-name\">RetryPolicy</span> retryPolicy <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ExponentialBackoffRetry</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token comment\">// è·å–ä¸€ä¸ªå®¢æˆ·ç«¯å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token class-name\">String</span> connectionStr <span class=\"token operator\">=</span> <span class=\"token string\">\"192.168.2.128:2181,192.168.2.129:2181,192.168.2.130:2181\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token class-name\">CuratorFramework</span> client <span class=\"token operator\">=</span> <span class=\"token class-name\">CuratorFrameworkFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">newClient</span><span class=\"token punctuation\">(</span>connectionStr<span class=\"token punctuation\">,</span> <span class=\"token number\">8000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8000</span><span class=\"token punctuation\">,</span> retryPolicy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token comment\">// å¼€å¯å®¢æˆ·ç«¯</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        client<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token comment\">// åˆ›å»ºèŠ‚ç‚¹</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        client<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">creatingParentsIfNeeded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">withMode</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CreateMode</span><span class=\"token punctuation\">.</span>EPHEMERAL<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/hello3\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"world\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">getBytes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token comment\">// ä¼‘çœ æ—¶é—´ 5s</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">5000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token comment\">// å…³é—­å®¢æˆ·ç«¯</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        client<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"4-ä¿®æ”¹èŠ‚ç‚¹æ•°æ®\"><a class=\"anchor\" href=\"#4-ä¿®æ”¹èŠ‚ç‚¹æ•°æ®\">#</a> 4ã€ä¿®æ”¹èŠ‚ç‚¹æ•°æ®</h2>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setZnodeData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token comment\">// å®šåˆ¶ä¸€ä¸ªé‡è¯•ç­–ç•¥</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token class-name\">RetryPolicy</span> retryPolicy <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ExponentialBackoffRetry</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token comment\">// è·å–ä¸€ä¸ªå®¢æˆ·ç«¯å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token class-name\">String</span> connectionStr <span class=\"token operator\">=</span> <span class=\"token string\">\"192.168.2.128:2181,192.168.2.129:2181,192.168.2.130:2181\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token class-name\">CuratorFramework</span> client <span class=\"token operator\">=</span> <span class=\"token class-name\">CuratorFrameworkFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">newClient</span><span class=\"token punctuation\">(</span>connectionStr<span class=\"token punctuation\">,</span> <span class=\"token number\">8000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8000</span><span class=\"token punctuation\">,</span> retryPolicy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token comment\">// å¼€å¯å®¢æˆ·ç«¯</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        client<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token comment\">// ä¿®æ”¹èŠ‚ç‚¹æ•°æ®</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            client<span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/hello\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"zookeeper\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">getBytes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token comment\">// å…³é—­å®¢æˆ·ç«¯</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        client<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"5-æŸ¥çœ‹èŠ‚ç‚¹æ•°æ®\"><a class=\"anchor\" href=\"#5-æŸ¥çœ‹èŠ‚ç‚¹æ•°æ®\">#</a> 5ã€æŸ¥çœ‹èŠ‚ç‚¹æ•°æ®</h2>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getZnodeData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token comment\">// å®šåˆ¶ä¸€ä¸ªé‡è¯•ç­–ç•¥</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token class-name\">RetryPolicy</span> retryPolicy <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ExponentialBackoffRetry</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token comment\">// è·å–ä¸€ä¸ªå®¢æˆ·ç«¯å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token class-name\">String</span> connectionStr <span class=\"token operator\">=</span> <span class=\"token string\">\"192.168.2.128:2181,192.168.2.129:2181,192.168.2.130:2181\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token class-name\">CuratorFramework</span> client <span class=\"token operator\">=</span> <span class=\"token class-name\">CuratorFrameworkFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">newClient</span><span class=\"token punctuation\">(</span>connectionStr<span class=\"token punctuation\">,</span> <span class=\"token number\">8000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8000</span><span class=\"token punctuation\">,</span> retryPolicy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token comment\">// å¼€å¯å®¢æˆ·ç«¯</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        client<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token comment\">// è·å–èŠ‚ç‚¹æ•°æ®</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">byte</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> bytes <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token keyword\">byte</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            bytes <span class=\"token operator\">=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span>bytes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token comment\">// å…³é—­å®¢æˆ·ç«¯</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        client<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h2 id=\"6-åˆ é™¤èŠ‚ç‚¹\"><a class=\"anchor\" href=\"#6-åˆ é™¤èŠ‚ç‚¹\">#</a> 6ã€åˆ é™¤èŠ‚ç‚¹</h2>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">delZnode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token comment\">// å®šåˆ¶ä¸€ä¸ªé‡è¯•ç­–ç•¥</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token class-name\">RetryPolicy</span> retryPolicy <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ExponentialBackoffRetry</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token comment\">// è·å–ä¸€ä¸ªå®¢æˆ·ç«¯å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token class-name\">String</span> connectionStr <span class=\"token operator\">=</span> <span class=\"token string\">\"192.168.2.128:2181,192.168.2.129:2181,192.168.2.130:2181\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token class-name\">CuratorFramework</span> client <span class=\"token operator\">=</span> <span class=\"token class-name\">CuratorFrameworkFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">newClient</span><span class=\"token punctuation\">(</span>connectionStr<span class=\"token punctuation\">,</span> <span class=\"token number\">8000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8000</span><span class=\"token punctuation\">,</span> retryPolicy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token comment\">// å¼€å¯å®¢æˆ·ç«¯</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        client<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token comment\">// åˆ é™¤èŠ‚ç‚¹</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            client<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/hello2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token comment\">// å…³é—­å®¢æˆ·ç«¯</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        client<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h2 id=\"7-è®¾ç½®watchæœºåˆ¶\"><a class=\"anchor\" href=\"#7-è®¾ç½®watchæœºåˆ¶\">#</a> 7ã€è®¾ç½® watch æœºåˆ¶</h2>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Test</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">watchZnode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token comment\">// å®šåˆ¶ä¸€ä¸ªé‡è¯•ç­–ç•¥</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token class-name\">RetryPolicy</span> retryPolicy <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ExponentialBackoffRetry</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token comment\">// è·å–ä¸€ä¸ªå®¢æˆ·ç«¯å¯¹è±¡</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token class-name\">String</span> connectionStr <span class=\"token operator\">=</span> <span class=\"token string\">\"192.168.2.128:2181,192.168.2.129:2181,192.168.2.130:2181\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token class-name\">CuratorFramework</span> client <span class=\"token operator\">=</span> <span class=\"token class-name\">CuratorFrameworkFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">newClient</span><span class=\"token punctuation\">(</span>connectionStr<span class=\"token punctuation\">,</span> <span class=\"token number\">8000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8000</span><span class=\"token punctuation\">,</span> retryPolicy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token comment\">// å¼€å¯å®¢æˆ·ç«¯</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        client<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token comment\">// è®¾ç½®èŠ‚ç‚¹çš„ cache, æŒ‡å®šç›‘æ§çš„èŠ‚ç‚¹</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token class-name\">TreeCache</span> treeCache <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TreeCache</span><span class=\"token punctuation\">(</span>client<span class=\"token punctuation\">,</span> <span class=\"token string\">\"/hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token comment\">// è‡ªå®šä¹‰ä¸€ä¸ªç›‘å¬å™¨</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        treeCache<span class=\"token punctuation\">.</span><span class=\"token function\">getListenable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">TreeCacheListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">childEvent</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CuratorFramework</span> curatorFramework<span class=\"token punctuation\">,</span> <span class=\"token class-name\">TreeCacheEvent</span> treeCacheEvent<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                <span class=\"token class-name\">ChildData</span> data <span class=\"token operator\">=</span> treeCacheEvent<span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>data <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>treeCacheEvent<span class=\"token punctuation\">.</span><span class=\"token function\">getType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                        <span class=\"token keyword\">case</span> NODE_ADDED<span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>                            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ç›‘æ§åˆ°æœ‰æ–°å¢èŠ‚ç‚¹\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                        <span class=\"token keyword\">case</span> NODE_REMOVED<span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>                            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ç›‘æ§åˆ°èŠ‚ç‚¹è¢«ç§»é™¤\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>                            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>                        <span class=\"token keyword\">case</span> NODE_UPDATED<span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>                            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ç›‘æ§åˆ°èŠ‚ç‚¹è¢«æ›´æ–°\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>                            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>                        <span class=\"token keyword\">default</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>                            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>                    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token comment\">// å¼€å§‹ç›‘å¬</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>            treeCache<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        <span class=\"token comment\">// è®¾ç½®å»¶æ—¶</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>            <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">500000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure>",
            "tags": []
        },
        {
            "id": "https://methiony.work/2020/11/23/Platform-construction/Zookeeper/course-1/Zookeeper%E7%9A%84watch%E6%9C%BA%E5%88%B6/",
            "url": "https://methiony.work/2020/11/23/Platform-construction/Zookeeper/course-1/Zookeeper%E7%9A%84watch%E6%9C%BA%E5%88%B6/",
            "title": "Zookeeperçš„watchå’Œé€‰ä¸¾æœºåˆ¶",
            "date_published": "2020-11-23T10:50:38.000Z",
            "content_html": "<p>:::note info<br />\n ä»¥ä¸‹ä¸ºä¸ªäººå­¦ä¹ ç¬”è®°å’Œä¹ é¢˜æ•´ç†<br />\nè¯¾ç¨‹ï¼š å¤§æ•°æ®è‡ªå­¦æ•™ç¨‹ Hadoop ä»é›¶åˆ°ç²¾é€šå®Œæ•´ç‰ˆ @<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zcGFjZS5iaWxpYmlsaS5jb20vNTg2Mzg5MDQ5\">é»‘é©¬ç¨‹åºå‘˜å¤§æ•°æ®æ•™ç¨‹</span><br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWVrNHkxMTdZcQ==\"> https://www.bilibili.com/video/BV1ek4y117Yq</span><br />\n:::</p>\n<h1 id=\"zookeeperçš„watchå’Œé€‰ä¸¾æœºåˆ¶\"><a class=\"anchor\" href=\"#zookeeperçš„watchå’Œé€‰ä¸¾æœºåˆ¶\">#</a> Zookeeper çš„ watch å’Œé€‰ä¸¾æœºåˆ¶</h1>\n<h2 id=\"1-é€‰ä¸¾æœºåˆ¶\"><a class=\"anchor\" href=\"#1-é€‰ä¸¾æœºåˆ¶\">#</a> 1ã€é€‰ä¸¾æœºåˆ¶</h2>\n<p>åŠæ•°æœºåˆ¶ï¼šé›†ç¾¤ä¸­åŠæ•°ä»¥ä¸Šæœºå™¨å­˜æ´»ï¼Œé›†ç¾¤å¯ç”¨ã€‚æ‰€ä»¥ zookeeper é€‚åˆå®‰è£…å¥‡æ•°å°æœåŠ¡å™¨ã€‚Zookeeper å·¥ä½œæ—¶ï¼Œæ˜¯æœ‰ä¸€ä¸ªèŠ‚ç‚¹ä¸º Leaderï¼Œå…¶ä»–åˆ™ä¸º Followerï¼ŒLeader æ˜¯é€šè¿‡å†…éƒ¨çš„é€‰ä¸¾æœºåˆ¶ä¸´æ—¶äº§ç”Ÿçš„ã€‚</p>\n<p>å‡è®¾æœ‰äº”å°æœåŠ¡å™¨ç»„æˆçš„ Zookeeper é›†ç¾¤ï¼Œå®ƒä»¬çš„ id ä¸º 1-5ï¼Œæ²¡æœ‰å†å²æ•°æ®ï¼Œåœ¨å­˜æ”¾æ•°æ®é‡è¿™ä¸€ç‚¹ä¸Šï¼Œéƒ½æ˜¯ä¸€æ ·çš„ã€‚å‡è®¾è¿™äº›æœåŠ¡å™¨ä¾åºå¯åŠ¨ï¼Œå®ƒä»¬ä¹‹é—´ä¼šé€šè¿‡é€‰ä¸¾æœºåˆ¶é€‰å‡º Leader</p>\n<h3 id=\"è¿‡ç¨‹è¯¦è§£\"><a class=\"anchor\" href=\"#è¿‡ç¨‹è¯¦è§£\">#</a> è¿‡ç¨‹è¯¦è§£ï¼š</h3>\n<p><em>æœåŠ¡å™¨ 1 å¯åŠ¨</em>ï¼Œå‘èµ·ä¸€æ¬¡é€‰ä¸¾ã€‚æœåŠ¡å™¨ 1 æŠ•è‡ªå·±ä¸€ç¥¨ã€‚æ­¤æ—¶æœåŠ¡å™¨ 1, ç¥¨æ•°ä¸€ç¥¨ï¼Œä¸å¤ŸåŠæ•°ä»¥ä¸Šï¼ˆ3 ç¥¨ï¼‰ï¼Œé€‰ä¸¾æ— æ³•å®Œæˆï¼ŒæœåŠ¡å™¨ 1 çŠ¶æ€ä¿æŒä¸º LOOKINGï¼›</p>\n<p><em>æœåŠ¡å™¨ 2 å¯åŠ¨</em>ï¼Œå†å‘èµ·ä¸€æ¬¡é€‰ä¸¾ã€‚æœåŠ¡å™¨ 1 å’Œ 2 åˆ†åˆ«æŠ•è‡ªå·±ä¸€ç¥¨å¹¶äº¤æ¢é€‰ç¥¨ä¿¡æ¯ï¼šæ­¤æ—¶æœåŠ¡å™¨ 1 å‘ç°æœåŠ¡å™¨ 2 çš„ ID æ¯”è‡ªå·±ç›®å‰æŠ•ç¥¨æ¨ä¸¾çš„ï¼ˆæœåŠ¡å™¨ 1ï¼‰å¤§ï¼Œæ›´æ”¹é€‰ç¥¨ä¸ºæ¨ä¸¾æœåŠ¡å™¨ 2ã€‚æ­¤æ—¶æœåŠ¡å™¨ 1 ç¥¨æ•° 0 ç¥¨ï¼ŒæœåŠ¡å™¨ 2 ç¥¨æ•° 2 ç¥¨ï¼Œæ²¡æœ‰åŠæ•°ä»¥ä¸Šç»“æœï¼Œé€‰ä¸¾æ— æ³•å®Œæˆï¼ŒæœåŠ¡å™¨ 1ï¼Œ2 çŠ¶æ€ä¿æŒ LOOKING</p>\n<p><em>æœåŠ¡å™¨ 3 å¯åŠ¨</em>ï¼Œå‘èµ·ä¸€æ¬¡é€‰ä¸¾ã€‚æ­¤æ—¶æœåŠ¡å™¨ 1 å’Œ 2 éƒ½ä¼šæ›´æ”¹é€‰ç¥¨ä¸ºæœåŠ¡å™¨ 3ã€‚æ­¤æ¬¡æŠ•ç¥¨ç»“æœï¼šæœåŠ¡å™¨ 1 ä¸º 0 ç¥¨ï¼ŒæœåŠ¡å™¨ 2 ä¸º 0 ç¥¨ï¼ŒæœåŠ¡å™¨ 3 ä¸º 3 ç¥¨ã€‚æ­¤æ—¶æœåŠ¡å™¨ 3 çš„ç¥¨æ•°å·²ç»è¶…è¿‡åŠæ•°ï¼ŒæœåŠ¡å™¨ 3 å½“é€‰ Leaderã€‚æœåŠ¡å™¨ 1ï¼Œ2 æ›´æ”¹çŠ¶æ€ä¸º FOLLOWINGï¼ŒæœåŠ¡å™¨ 3 æ›´æ”¹çŠ¶æ€ä¸º LEADINGï¼›</p>\n<p><em>æœåŠ¡å™¨ 4 å¯åŠ¨</em>ï¼Œå‘èµ·ä¸€æ¬¡é€‰ä¸¾ã€‚æ­¤æ—¶æœåŠ¡å™¨ 1ï¼Œ2ï¼Œ3 å·²ç»ä¸æ˜¯ LOOKING çŠ¶æ€ï¼Œä¸ä¼šæ›´æ”¹é€‰ç¥¨ä¿¡æ¯ã€‚äº¤æ¢é€‰ç¥¨ä¿¡æ¯ç»“æœï¼šæœåŠ¡å™¨ 3 ä¸º 3 ç¥¨ï¼ŒæœåŠ¡å™¨ 4 ä¸º 1 ç¥¨ã€‚æ­¤æ—¶æœåŠ¡å™¨ 4 æœä»å¤šæ•°ï¼Œæ›´æ”¹é€‰ç¥¨ä¿¡æ¯ä¸ºæœåŠ¡å™¨ 3ï¼Œå¹¶æ›´æ”¹çŠ¶æ€ä¸º FOLLOWINGï¼›</p>\n<p><em>æœåŠ¡å™¨ 5 å¯åŠ¨</em>ï¼ŒåŒæœåŠ¡å™¨ 4 ä¸€æ ·ã€‚</p>\n<h2 id=\"1-watchæœºåˆ¶\"><a class=\"anchor\" href=\"#1-watchæœºåˆ¶\">#</a> 1ã€watch æœºåˆ¶</h2>\n<p>ç±»ä¼¼äºæ•°æ®åº“ä¸­çš„è§¦å‘å™¨ï¼Œå¯¹æŸä¸ª Znode è®¾ç½® Watcher, å½“ Znode å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼ŒWatchManager ä¼šè°ƒç”¨å¯¹åº”çš„ Watcher</p>\n<p>å½“ Znode å‘ç”Ÿåˆ é™¤ã€ä¿®æ”¹ã€åˆ›å»ºï¼Œå­èŠ‚ç‚¹å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œå¯¹åº”çš„ Watcher ä¼šå¾—åˆ°é€šçŸ¥</p>\n<h3 id=\"watcherçš„ç‰¹ç‚¹\"><a class=\"anchor\" href=\"#watcherçš„ç‰¹ç‚¹\">#</a> watcher çš„ç‰¹ç‚¹</h3>\n<p><strong>ä¸€æ¬¡æ€§è§¦å‘</strong>ï¼šä¸€ä¸ª watcher åªä¼šè¢«è§¦å‘ä¸€æ¬¡ï¼Œå¦‚æœéœ€è¦ç»§ç»­ç›‘å¬ï¼Œåˆ™éœ€è¦å†æ¬¡æ·»åŠ  watcher</p>\n<p><strong>äº‹ä»¶å°è£…</strong>ï¼šwatcher å¾—åˆ°çš„äº‹ä»¶æ˜¯è¢«å°è£…è¿‡çš„ï¼ŒåŒ…æ‹¬ä¸‰ä¸ªå†…å®¹ keeperState,evenType,path</p>\n<h4 id=\"å¸¸è§çš„ç›‘å¬\"><a class=\"anchor\" href=\"#å¸¸è§çš„ç›‘å¬\">#</a> å¸¸è§çš„ç›‘å¬ï¼š</h4>\n<p>ç›‘å¬èŠ‚ç‚¹æ•°æ®çš„å˜åŒ–ï¼š <code>get path [watch]</code></p>\n<p>ç›‘å¬å­èŠ‚ç‚¹å¢å‡çš„å˜åŒ–ï¼š <code>ls path [watch]</code></p>\n",
            "tags": []
        },
        {
            "id": "https://methiony.work/2020/11/23/Platform-construction/Zookeeper/course-1/Zookeeper%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/",
            "url": "https://methiony.work/2020/11/23/Platform-construction/Zookeeper/course-1/Zookeeper%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/",
            "title": "ZookeeperåŸºç¡€çŸ¥è¯†",
            "date_published": "2020-11-23T06:50:40.000Z",
            "content_html": "<p>:::note info<br />\n ä»¥ä¸‹ä¸ºä¸ªäººå­¦ä¹ ç¬”è®°å’Œä¹ é¢˜æ•´ç†<br />\nè¯¾ç¨‹ï¼š å¤§æ•°æ®è‡ªå­¦æ•™ç¨‹ Hadoop ä»é›¶åˆ°ç²¾é€šå®Œæ•´ç‰ˆ @<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zcGFjZS5iaWxpYmlsaS5jb20vNTg2Mzg5MDQ5\">é»‘é©¬ç¨‹åºå‘˜å¤§æ•°æ®æ•™ç¨‹</span><br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWVrNHkxMTdZcQ==\"> https://www.bilibili.com/video/BV1ek4y117Yq</span><br />\n:::</p>\n<h1 id=\"zookeeperåŸºç¡€çŸ¥è¯†\"><a class=\"anchor\" href=\"#zookeeperåŸºç¡€çŸ¥è¯†\">#</a> Zookeeper åŸºç¡€çŸ¥è¯†</h1>\n<h2 id=\"1-zookeeprçš„æ•°æ®ç±»å‹\"><a class=\"anchor\" href=\"#1-zookeeprçš„æ•°æ®ç±»å‹\">#</a> 1ã€zookeepr çš„æ•°æ®ç±»å‹</h2>\n<h3 id=\"ä¸æ ‡å‡†æ–‡ä»¶ç³»ç»Ÿç›¸åŒä¹‹å¤„\"><a class=\"anchor\" href=\"#ä¸æ ‡å‡†æ–‡ä»¶ç³»ç»Ÿç›¸åŒä¹‹å¤„\">#</a> ä¸æ ‡å‡†æ–‡ä»¶ç³»ç»Ÿç›¸åŒä¹‹å¤„</h3>\n<p>Zookeeper çš„æ•°æ®ç±»å‹ï¼Œåœ¨ç»“æ„ä¸Šæ‹¥æœ‰ä¸€ä¸ªå±‚æ¬¡çš„å‘½åç©ºé—´ï¼Œå’Œæ ‡å‡†æ–‡ä»¶ç³»ç»Ÿéå¸¸ç›¸ä¼¼ï¼Œéƒ½æ˜¯é‡‡ç”¨æ ‘å½¢å±‚æ¬¡ç»“æ„</p>\n<p>Zookeeper æ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ç§°ä¸ºä¸€ä¸ª Znode, æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥æ‹¥æœ‰å­èŠ‚ç‚¹</p>\n<h3 id=\"ä¸æ ‡å‡†æ–‡ä»¶ç³»ç»Ÿä¸åŒä¹‹å¤„\"><a class=\"anchor\" href=\"#ä¸æ ‡å‡†æ–‡ä»¶ç³»ç»Ÿä¸åŒä¹‹å¤„\">#</a> ä¸æ ‡å‡†æ–‡ä»¶ç³»ç»Ÿä¸åŒä¹‹å¤„</h3>\n<p>Znode å…·æœ‰æ–‡ä»¶å’Œç›®å½•ä¸¤ç§ç‰¹ç‚¹ã€‚æ—¢æœ‰æ–‡ä»¶çš„æ•°æ®åŠŸèƒ½ï¼Œåˆæœ‰ç›®å½•ä½œä¸ºè·¯å¾„æ ‡è¯†çš„åŠŸèƒ½ï¼Œå¹¶å¯ä»¥å…·æœ‰å­ Znodeã€‚znode å…·æœ‰å¢ã€åˆ ã€æ”¹ã€æŸ¥ç­‰æ“ä½œ</p>\n<p>Znode å­˜å‚¨æ•°æ®å¤§å°æœ‰é™åˆ¶ã€‚å®ƒç”¨æ¥ç®¡ç†è°ƒåº¦æ•°æ®ï¼Œæ•°æ®é€šå¸¸ä»¥ kb ä¸ºå•ä½ï¼Œæ•°æ®å¤§å°è‡³å¤š 1Mï¼Œé€šå¸¸å°äºæ­¤å€¼</p>\n<p>Znode é€šè¿‡è·¯å¾„å¼•ç”¨ï¼Œä¸”ä¸ºç»å¯¹è·¯å¾„ï¼Œå› æ­¤ä¸º &quot;/&quot; å¼€å¤´</p>\n<p>Znode ç”± 3 éƒ¨åˆ†ç»„æˆã€‚stat: çŠ¶æ€ä¿¡æ¯ï¼Œæè¿°ç‰ˆæœ¬ã€æƒé™ç­‰ä¿¡æ¯\tdataï¼šä¸è¯¥ znode å…³è”çš„æ•°æ®\tchildrenï¼šè¯¥ znode ä¸‹çš„å­èŠ‚ç‚¹</p>\n<h2 id=\"znodeèŠ‚ç‚¹ç±»å‹\"><a class=\"anchor\" href=\"#znodeèŠ‚ç‚¹ç±»å‹\">#</a> Znode èŠ‚ç‚¹ç±»å‹</h2>\n<p>èŠ‚ç‚¹ç±»å‹åœ¨åˆ›å»ºæ—¶è¢«ç¡®å®šï¼Œä¸èƒ½æ”¹å˜</p>\n<p>1ã€ä¸´æ—¶èŠ‚ç‚¹ï¼šåœ¨ä½¿ç”¨æœŸé—´å­˜åœ¨ï¼Œä¼šè¯ç»“æŸåè‡ªåŠ¨åˆ é™¤ã€‚ä¸å…è®¸æ‹¥æœ‰å­èŠ‚ç‚¹</p>\n<p>2ã€æ°¸ä¹…èŠ‚ç‚¹ï¼šåªèƒ½æ‰‹åŠ¨åˆ é™¤ï¼Œå…è®¸æ‹¥æœ‰å­èŠ‚ç‚¹</p>\n<p>3ã€èŠ‚ç‚¹å…·æœ‰åºåˆ—åŒ–ç‰¹æ€§ï¼Œå¦‚æœåœ¨åˆ›å»ºæ—¶æŒ‡å®šï¼Œè¯¥ znode åé¢ä¼šè‡ªåŠ¨è¿½åŠ ä¸€ä¸ª 10 ä½æ•°å­—çš„åºåˆ—å·</p>\n<p>å››ç§ç±»å‹çš„ Znode èŠ‚ç‚¹</p>\n<table>\n<thead>\n<tr>\n<th>PERSISTENT:</th>\n<th>æ°¸ä¹…èŠ‚ç‚¹</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>EPHEMERAL:</td>\n<td>ä¸´æ—¶èŠ‚ç‚¹</td>\n</tr>\n<tr>\n<td>PERSISTENT_SEQUENTIAL</td>\n<td>æ°¸ä¹…èŠ‚ç‚¹ã€åºåˆ—åŒ–</td>\n</tr>\n<tr>\n<td>EPHEMERAL_SEQUENTIAL</td>\n<td>ä¸´æ—¶èŠ‚ç‚¹ã€åºåˆ—åŒ–</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"zookeeperçš„shellå®¢æˆ·ç«¯æ“ä½œ\"><a class=\"anchor\" href=\"#zookeeperçš„shellå®¢æˆ·ç«¯æ“ä½œ\">#</a> Zookeeper çš„ Shell å®¢æˆ·ç«¯æ“ä½œ</h2>\n<h3 id=\"ç™»å½•zookeeperå®¢æˆ·ç«¯\"><a class=\"anchor\" href=\"#ç™»å½•zookeeperå®¢æˆ·ç«¯\">#</a> ç™»å½• Zookeeper å®¢æˆ·ç«¯</h3>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>bin<span class=\"token operator\">/</span>zkCli<span class=\"token punctuation\">.</span>sh <span class=\"token operator\">-</span>server master:2181</pre></td></tr></table></figure><h3 id=\"æ“ä½œå®ä¾‹\"><a class=\"anchor\" href=\"#æ“ä½œå®ä¾‹\">#</a> æ“ä½œå®ä¾‹</h3>\n<p>åˆ—å‡º Path ä¸‹çš„æ‰€æœ‰ Znode</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">ls</span> <span class=\"token operator\">/</span></pre></td></tr></table></figure><p>åˆ›å»ºæ°¸ä¹…èŠ‚ç‚¹</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>create <span class=\"token operator\">/</span>hello world</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>create <span class=\"token operator\">/</span>hello<span class=\"token operator\">/</span>hello1 world</pre></td></tr></table></figure><p>åˆ›å»ºä¸´æ—¶èŠ‚ç‚¹</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>create <span class=\"token operator\">-</span>e <span class=\"token operator\">/</span>hello world</pre></td></tr></table></figure><p>åˆ›å»ºæ°¸ä¹…åºåˆ—åŒ–èŠ‚ç‚¹</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>create <span class=\"token operator\">-</span>s <span class=\"token operator\">/</span>hello world</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>create <span class=\"token operator\">-</span>s <span class=\"token operator\">/</span>hello<span class=\"token operator\">/</span>hello1 world</pre></td></tr></table></figure><p>åˆ›å»ºä¸´æ—¶åºåˆ—åŒ–èŠ‚ç‚¹</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>create <span class=\"token operator\">-</span>e <span class=\"token operator\">-</span>s <span class=\"token operator\">/</span>hello world</pre></td></tr></table></figure><p>ä¿®æ”¹èŠ‚ç‚¹æ•°æ®</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">set</span> <span class=\"token operator\">/</span>hello zookeeper</pre></td></tr></table></figure><p>åˆ é™¤èŠ‚ç‚¹ï¼Œå¦‚æœæœ‰å­ znode åˆ™è¯¥å‘½ä»¤æ— æ•ˆ</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>delete <span class=\"token operator\">/</span>hello</pre></td></tr></table></figure><p>åˆ é™¤èŠ‚ç‚¹ï¼Œå¦‚æœæœ‰å­ znode åˆ™é€’å½’åˆ é™¤</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>rmr <span class=\"token operator\">/</span>hello</pre></td></tr></table></figure><p>åˆ—å‡ºå†å²è®°å½•</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>histroy</pre></td></tr></table></figure><h3 id=\"æ“ä½œå‘½ä»¤\"><a class=\"anchor\" href=\"#æ“ä½œå‘½ä»¤\">#</a> æ“ä½œå‘½ä»¤</h3>\n<p>path: æŒ‡ / Znodeã€data:znode æ•°æ®ã€acl: æƒé™ã€watch: è§‚å¯Ÿ</p>\n<table>\n<thead>\n<tr>\n<th>å‘½ä»¤</th>\n<th>è¯´æ˜</th>\n<th>å‚æ•°</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>create [-s] [-e] path data acl</td>\n<td>åˆ›å»º znode</td>\n<td>-s æŒ‡é¡ºåºèŠ‚ç‚¹ï¼Œ-e æŒ‡ä¸´æ—¶èŠ‚ç‚¹</td>\n</tr>\n<tr>\n<td>ls  path  [watch]</td>\n<td>åˆ—å‡º path ä¸‹æ‰€æœ‰å­ znode</td>\n<td></td>\n</tr>\n<tr>\n<td>get  path  [watch]</td>\n<td>è·å– path å¯¹åº”çš„ znode çš„æ•°æ®å’Œå±æ€§</td>\n<td></td>\n</tr>\n<tr>\n<td>ls2  path  [watch]</td>\n<td>æŸ¥çœ‹ path æ‰€æœ‰å­ znode å’Œå­ znode å±æ€§</td>\n<td></td>\n</tr>\n<tr>\n<td>set  path  data</td>\n<td>æ›´æ–°èŠ‚ç‚¹</td>\n<td></td>\n</tr>\n<tr>\n<td>delete  path</td>\n<td>åˆ é™¤èŠ‚ç‚¹ï¼Œå¦‚æœæœ‰å­ znode åˆ™è¯¥å‘½ä»¤æ— æ•ˆ</td>\n<td></td>\n</tr>\n<tr>\n<td>rmr  path</td>\n<td>åˆ é™¤èŠ‚ç‚¹ï¼Œå¦‚æœæœ‰å­ znode åˆ™é€’å½’åˆ é™¤</td>\n<td></td>\n</tr>\n<tr>\n<td>setquota  -n|-b  val  path</td>\n<td>ä¿®æ”¹ znode é…é¢</td>\n<td>-n è®¾ç½®å­èŠ‚ç‚¹æœ€å¤§ä¸ªæ•°ï¼Œ-b è®¾ç½®èŠ‚ç‚¹æ•°æ®æœ€å¤§é•¿åº¦</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"èŠ‚ç‚¹å±æ€§\"><a class=\"anchor\" href=\"#èŠ‚ç‚¹å±æ€§\">#</a> èŠ‚ç‚¹å±æ€§</h3>\n<p><img data-src=\"%E8%8A%82%E7%82%B9%E5%B1%9E%E6%80%A7.png\" alt=\"\" /></p>\n<p>cZxid:znode åˆ›å»ºçš„äº‹åŠ¡ id</p>\n<p>ctime: èŠ‚ç‚¹åˆ›å»ºæ—¶çš„æ—¶é—´æˆ³</p>\n<p>mZxid:Znode è¢«ä¿®æ”¹çš„äº‹åŠ¡ id, æ¯æ¬¡å¯¹ znode çš„ä¿®æ”¹éƒ½ä¼šæ›´æ–° mZxid, å¯ä»¥ç¡®å®šæ›´æ–°æ“ä½œçš„é¡ºåºï¼Œå¦‚æœ zxid1 å°äº zxid2ï¼Œè¯´æ˜ zxid1 æ“ä½œå…ˆäº zxid2 å‘ç”Ÿï¼Œzxid å¯¹äºæ•´ä¸ª zookeeper éƒ½æ˜¯å”¯ä¸€çš„</p>\n<p>mtime: èŠ‚ç‚¹æœ€æ–°ä¸€æ¬¡æ›´æ–°å‘ç”Ÿæ—¶çš„æ—¶é—´æˆ³</p>\n<p>cversion: å­èŠ‚ç‚¹çš„ç‰ˆæœ¬å·ã€‚å½“ znode å­èŠ‚ç‚¹æœ‰å˜åŒ–æ—¶ï¼Œå€¼ä¼šå¢åŠ  1</p>\n<p>dataVersion: æ•°æ®ç‰ˆæœ¬å·ï¼Œæ¯æ¬¡å¯¹èŠ‚ç‚¹è¿›è¡Œ set æ“ä½œï¼Œå€¼ä¼šå¢åŠ  1ï¼Œé¿å…äº†æ•°æ®æ›´æ–°çš„é¡ºåºé—®é¢˜</p>\n<p>aclVersion:ACL çš„ç‰ˆæœ¬å·</p>\n<p>ephemeralOwner: å¦‚æœèŠ‚ç‚¹ä¸ºä¸´æ—¶èŠ‚ç‚¹ï¼ŒephemeralOwner å€¼è¡¨ç¤ºä¸è¯¥èŠ‚ç‚¹ç»‘å®šçš„ session idã€‚å¦‚æœä¸æ˜¯ï¼ŒephemeralOwner å€¼ä¸º 0</p>\n<h2 id=\"\"><a class=\"anchor\" href=\"#\">#</a> </h2>\n",
            "tags": []
        },
        {
            "id": "https://methiony.work/2020/11/21/Platform-construction/Hadoop/course-2/Hadoop%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/",
            "url": "https://methiony.work/2020/11/21/Platform-construction/Hadoop/course-2/Hadoop%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/",
            "title": "Hadoopåˆ†å¸ƒå¼é›†ç¾¤æ­å»º",
            "date_published": "2020-11-21T11:19:50.000Z",
            "content_html": "<p>::ğŸ““<br />\nä»¥ä¸‹ä¸ºä¸ªäººå­¦ä¹ ç¬”è®°<br />\nè¯¾ç¨‹ï¼š å¤§æ•°æ®è‡ªå­¦æ•™ç¨‹ Hadoop ä»é›¶åˆ°ç²¾é€šå®Œæ•´ç‰ˆ @<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zcGFjZS5iaWxpYmlsaS5jb20vNTg2Mzg5MDQ5\">é»‘é©¬ç¨‹åºå‘˜å¤§æ•°æ®æ•™ç¨‹</span><br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWVrNHkxMTdZcQ==\"> https://www.bilibili.com/video/BV1ek4y117Yq</span><br />\n:::</p>\n<h1 id=\"hadoopåˆ†å¸ƒå¼é›†ç¾¤æ­å»º\"><a class=\"anchor\" href=\"#hadoopåˆ†å¸ƒå¼é›†ç¾¤æ­å»º\">#</a> Hadoop åˆ†å¸ƒå¼é›†ç¾¤æ­å»º</h1>\n<h2 id=\"1-ç¯å¢ƒå‡†å¤‡\"><a class=\"anchor\" href=\"#1-ç¯å¢ƒå‡†å¤‡\">#</a> 1ã€ç¯å¢ƒå‡†å¤‡</h2>\n<p>é¦–å…ˆå‡†å¤‡äº†ä¸‰å°è™šæ‹Ÿæœºï¼ˆä¸ºäº†é¿å…ç¯å¢ƒçš„å¹²æ‰°ï¼Œéƒ½æ˜¯æ–°å»ºçš„è™šæ‹Ÿæœºï¼‰ï¼Œåˆ†åˆ«åˆ†é…äº† 1G å†…å­˜ã€20G ç¡¬ç›˜ã€2 æ ¸ CPUï¼Œç„¶åå®‰è£…äº† CentOS-7-x86_64-DVD-2009 æ“ä½œç³»ç»Ÿï¼Œå¹¶é…ç½®äº†é™æ€ IP åœ°å€ã€‚</p>\n<p><strong>é›†ç¾¤è§„åˆ’ï¼š</strong></p>\n<p>æ­å»ºçš„æ˜¯ NameNode ä¸ ResourceManager å•èŠ‚ç‚¹æ¶æ„ã€‚èŠ‚ç‚¹å…·ä½“åˆ†åˆ«å¦‚ä¸‹ï¼š</p>\n<table>\n<thead>\n<tr>\n<th>æœåŠ¡å™¨åç§°</th>\n<th>IP åœ°å€</th>\n<th>NameNode</th>\n<th>SecondaryNameNode</th>\n<th>dataNode</th>\n<th>ResourceManager</th>\n<th>NodeManager</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>master</td>\n<td>192.168.2.128</td>\n<td>æ˜¯</td>\n<td>æ˜¯</td>\n<td>æ˜¯</td>\n<td>æ˜¯</td>\n<td>æ˜¯</td>\n</tr>\n<tr>\n<td>node01</td>\n<td>192.168.2.129</td>\n<td>å¦</td>\n<td>å¦</td>\n<td>æ˜¯</td>\n<td>å¦</td>\n<td>æ˜¯</td>\n</tr>\n<tr>\n<td>node02</td>\n<td>192.168.2.130</td>\n<td>å¦</td>\n<td>å¦</td>\n<td>æ˜¯</td>\n<td>å¦</td>\n<td>æ˜¯</td>\n</tr>\n</tbody>\n</table>\n<p><strong>æ–‡ä»¶ç³»ç»Ÿæ ¸å¿ƒæ¨¡å—ï¼š</strong><br />\nNameNodeï¼šé›†ç¾¤å½“ä¸­çš„ä¸»èŠ‚ç‚¹ï¼Œä¸»è¦ç”¨äºç®¡ç†é›†ç¾¤å½“ä¸­çš„å„ç§æ•°æ®<br />\n secondaryNameNodeï¼šä¸»è¦èƒ½ç”¨äº hadoop å½“ä¸­å…ƒæ•°æ®ä¿¡æ¯çš„è¾…åŠ©ç®¡ç†<br />\n DataNodeï¼šé›†ç¾¤å½“ä¸­çš„ä»èŠ‚ç‚¹ï¼Œä¸»è¦ç”¨äºå­˜å‚¨é›†ç¾¤å½“ä¸­çš„å„ç§æ•°æ®<br />\n<strong>æ•°æ®è®¡ç®—æ ¸å¿ƒæ¨¡å—ï¼š</strong><br />\nResourceManagerï¼šæ¥æ”¶ç”¨æˆ·çš„è®¡ç®—è¯·æ±‚ä»»åŠ¡ï¼Œå¹¶è´Ÿè´£é›†ç¾¤çš„èµ„æºåˆ†é…<br />\n NodeManagerï¼šè´Ÿè´£æ‰§è¡Œä¸»èŠ‚ç‚¹ APPmaster åˆ†é…çš„ä»»åŠ¡</p>\n<h2 id=\"2-ç¯å¢ƒé…ç½®\"><a class=\"anchor\" href=\"#2-ç¯å¢ƒé…ç½®\">#</a> 2ã€ç¯å¢ƒé…ç½®</h2>\n<p>1ã€å…³é—­é˜²ç«å¢™</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@localhost ~]</span><span class=\"token comment\"># systemctl stop firewalld.service </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">#å…³é—­é˜²ç«å¢™</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token namespace\">[root@localhost ~]</span><span class=\"token comment\"># systemctl disable firewalld.service </span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">#ç¦æ­¢å¼€æœºå¯åŠ¨</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token namespace\">[root@localhost ~]</span><span class=\"token operator\">*</span><span class=\"token comment\"># firewall-cmd --state </span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">#æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>not running</pre></td></tr></table></figure><p>2ã€è®¾ç½®ä¸»æœºåç§°</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#åœ¨ 192.168.2.128 æœºå™¨ä¸Šæ‰§è¡Œ * </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token namespace\">[root@localhost ~]</span><span class=\"token operator\">*</span><span class=\"token comment\"># hostnamectl set-hostname  master</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">*</span><span class=\"token comment\">#åœ¨ 192.168.2.129 æœºå™¨ä¸Šæ‰§è¡Œ * </span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token namespace\">[root@localhost ~]</span><span class=\"token operator\">*</span><span class=\"token comment\"># hostnamectl set-hostname node01</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token operator\">*</span><span class=\"token comment\">#åœ¨ 192.168.2.130 æœºå™¨ä¸Šæ‰§è¡Œ * </span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token namespace\">[root@localhost ~]</span><span class=\"token operator\">*</span><span class=\"token comment\"># hostnamectl set-hostname node02</span></pre></td></tr></table></figure><p>3ã€ä¸‰å°è™šæ‹Ÿæœºé‡å¯</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#åœ¨ 192.168.2.128 æœºå™¨ä¸Šæ‰§è¡Œ * </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token namespace\">[root@localhost ~]</span><span class=\"token comment\"># reboot</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">*</span><span class=\"token comment\">#åœ¨ 192.168.2.129 æœºå™¨ä¸Šæ‰§è¡Œ * </span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token namespace\">[root@localhost ~]</span><span class=\"token comment\"># reboot</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token operator\">*</span><span class=\"token comment\">#åœ¨ 192.168.2.130 æœºå™¨ä¸Šæ‰§è¡Œ * </span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token namespace\">[root@localhost ~]</span><span class=\"token comment\"># reboot</span></pre></td></tr></table></figure><p>4ã€å…³é—­ selinux</p>\n<p>è¿›å…¥åˆ° /etc/selinux/config æ–‡ä»¶ï¼Œå°† SELINUX=enforcing æ”¹ä¸º SELINUX=disabledã€‚</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@master ~]</span><span class=\"token comment\">#  vi  /etc/selinux/config</span></pre></td></tr></table></figure><p>5ã€è®¾ç½®å…å¯†ç™»å½•</p>\n<p>é¦–å…ˆåœ¨ master ä¸»æœºä¸Šä½¿ç”¨ ssh-keygen å‘½ä»¤æ¥ç”Ÿæˆç§˜é’¥ï¼Œä¸€è·¯æŒ‰å›è½¦é”®</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@master~]</span><span class=\"token comment\">#ssh-keygen -t rsa</span></pre></td></tr></table></figure><p>é€šè¿‡ ssh-copy-id å‘½ä»¤è®¾ç½®å…å¯†é’¥ç™»å½•<br />\nå…¶ä¸­ï¼Œmasterã€node01ã€node02 è¡¨ç¤ºéœ€è¦è®¾ç½®å…å¯†ç™»å½•çš„æœåŠ¡å™¨åœ°å€ã€‚</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>ssh<span class=\"token operator\">-</span><span class=\"token function\">copy-id</span> <span class=\"token operator\">-</span>i ~<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>ssh<span class=\"token operator\">/</span>id_rsa<span class=\"token punctuation\">.</span>pub root@192<span class=\"token punctuation\">.</span>168<span class=\"token punctuation\">.</span>2<span class=\"token punctuation\">.</span>128</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>ssh<span class=\"token operator\">-</span><span class=\"token function\">copy-id</span> <span class=\"token operator\">-</span>i ~<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>ssh<span class=\"token operator\">/</span>id_rsa<span class=\"token punctuation\">.</span>pub root@192<span class=\"token punctuation\">.</span>168<span class=\"token punctuation\">.</span>2<span class=\"token punctuation\">.</span>129</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>ssh<span class=\"token operator\">-</span><span class=\"token function\">copy-id</span> <span class=\"token operator\">-</span>i ~<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>ssh<span class=\"token operator\">/</span>id_rsa<span class=\"token punctuation\">.</span>pub root@192<span class=\"token punctuation\">.</span>168<span class=\"token punctuation\">.</span>2<span class=\"token punctuation\">.</span>130</pre></td></tr></table></figure><h2 id=\"3-å®‰è£…jdk\"><a class=\"anchor\" href=\"#3-å®‰è£…jdk\">#</a> 3ã€å®‰è£… JDK</h2>\n<p>åœ¨ master ä¸­æ–°å»ºç›®å½• /opt/bigdata/, æ­¤ç›®å½•ä¸‹å­˜æ”¾ hadoop å¤§æ•°æ®æ‰€éœ€è¦çš„ç¯å¢ƒåŒ… (jdk å’Œ hadoop).</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@master~]</span><span class=\"token comment\">#mkdir /opt/bigdata</span></pre></td></tr></table></figure><p>1ã€æŠŠä¸‹è½½å¥½çš„ jdk-8u271-linux-x64.tar.gz åŒ…å’Œ hadoop-3.1.4.tar.gz ä¸Šä¼ è‡³ master ä¸»æœºä¸­ï¼ŒJDK æ˜¯å®‰è£… Hadoop çš„åŸºç¡€ç¯å¢ƒï¼Œæ‰€ä»¥éœ€è¦ä¼˜å…ˆå®‰è£…å¥½ JDK ç¯å¢ƒ</p>\n<p>2ã€è§£å‹ jdk å¹¶å¤åˆ¶åˆ° /opt/bigdata ç›®å½•ä¸‹</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@master~]</span><span class=\"token comment\">#tar -zxvf jdk-8u271-linux-x64.tar.gz -C</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token operator\">/</span>opt<span class=\"token operator\">/</span>bigdata</pre></td></tr></table></figure><p>3ã€é…ç½®ç¯å¢ƒå˜é‡ (/etc/profile)</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@master~]</span><span class=\"token comment\">#vi /etc/profile</span></pre></td></tr></table></figure><p>æ·»åŠ </p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>export JAVA_HOME=<span class=\"token operator\">/</span>export<span class=\"token operator\">/</span>servers<span class=\"token operator\">/</span>jdk1<span class=\"token punctuation\">.</span>8<span class=\"token punctuation\">.</span>0_271 </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>export PATH=:<span class=\"token variable\">$JAVA_HOME</span><span class=\"token operator\">/</span>bin:<span class=\"token variable\">$PATH</span></pre></td></tr></table></figure><p>æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼Œè®©ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@master~]</span><span class=\"token comment\">#source/etc/profile</span></pre></td></tr></table></figure><p>éªŒè¯ jdk å®‰è£…æ˜¯å¦æˆåŠŸ</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@master~]</span><span class=\"token comment\">#java -version</span></pre></td></tr></table></figure><h2 id=\"4-å®‰è£…hadoop\"><a class=\"anchor\" href=\"#4-å®‰è£…hadoop\">#</a> 4ã€å®‰è£… hadoop</h2>\n<p>1ã€è§£å‹ hadoopï¼Œå¹¶æŠŠè§£å‹æ–‡ä»¶å¤åˆ¶åˆ° /opt/bigdata ç›®å½•ä¸­</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@master~]</span><span class=\"token comment\">#tar -zxvf hadoop-3.1.4.tar.gz -C /opt/bigdata</span></pre></td></tr></table></figure><p>2ã€é…ç½®ç¯å¢ƒå˜é‡ (/etc/profile)</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@master~]</span><span class=\"token comment\">#vi /etc/profile</span></pre></td></tr></table></figure><p>æ·»åŠ </p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>export HADOOP_HOME=<span class=\"token operator\">/</span>export<span class=\"token operator\">/</span>servers<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">-</span>3<span class=\"token punctuation\">.</span>1<span class=\"token punctuation\">.</span>4</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>export PATH=:<span class=\"token variable\">$HADOOP_HOME</span><span class=\"token operator\">/</span>bin:<span class=\"token variable\">$HADOOP_HOME</span><span class=\"token operator\">/</span>sbin:<span class=\"token variable\">$PATH</span></pre></td></tr></table></figure><p>æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼Œè®©ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@master~]</span><span class=\"token comment\">#source/etc/profile</span></pre></td></tr></table></figure><p>3ã€ä¿®æ”¹ hadoop çš„é…ç½®æ–‡ä»¶</p>\n<p>è¿›å…¥éœ€æ”¹æ–‡ä»¶çš„ç›®å½•</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@master~]</span><span class=\"token comment\">#cd /opt/bigdata/hadoop-3.1.4/etc/hadoop</span></pre></td></tr></table></figure><p>éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>core<span class=\"token operator\">-</span>site<span class=\"token punctuation\">.</span>xml\thadoop<span class=\"token operator\">-</span>env<span class=\"token punctuation\">.</span>sh\thdfs<span class=\"token operator\">-</span>site<span class=\"token punctuation\">.</span>xml\t</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>mapred<span class=\"token operator\">-</span>env<span class=\"token punctuation\">.</span>sh\tmapred<span class=\"token operator\">-</span>site<span class=\"token punctuation\">.</span>xml\tyarn<span class=\"token operator\">-</span>site<span class=\"token punctuation\">.</span>xml</pre></td></tr></table></figure><p>é¦–å…ˆï¼Œä¿®æ”¹ core-site.xml æ–‡ä»¶ï¼Œåœ¨ &lt;configuration&gt; å…ƒç´ ä¸­æ·»åŠ ç›¸åº”çš„é…ç½®æ–‡ä»¶</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>configuration</span><span class=\"token punctuation\">></span></span> \t</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token comment\">&lt;!--  æŒ‡å®šé›†ç¾¤çš„æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼šåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ --></span> \t</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span> \t\t</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>fs.default.name<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span> \t\t</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- å› ä¸ºå‰é¢å·²ç»é…ç½®äº†æœåŠ¡å™¨åç§°æ˜ å°„ IPï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥ä½¿ç”¨æœåŠ¡å™¨åç§°è¿›è¡Œé…ç½® --></span> \t\t</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>hdfs://master:8020<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span> \t</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span> </pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t<span class=\"token comment\">&lt;!--  æŒ‡å®šä¸´æ—¶æ–‡ä»¶å­˜å‚¨ç›®å½• --></span> \t</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span> </pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>hadoop.tmp.dir<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span> \t\t\t\t\t     <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>/opt/bigdata/hadoop3.1.4/hadoopDatas/tempDatas<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span> \t</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\t<span class=\"token comment\">&lt;!--  ç¼“å†²åŒºå¤§å°ï¼Œå®é™…å·¥ä½œä¸­æ ¹æ®æœåŠ¡å™¨æ€§èƒ½åŠ¨æ€è°ƒæ•´ --></span> \t</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span> \t\t</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>io.file.buffer.size<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span> \t\t</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>4096<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span> \t</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span>  \t</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>\t<span class=\"token comment\">&lt;!--  å¼€å¯ hdfs çš„åƒåœ¾æ¡¶æœºåˆ¶ï¼Œåˆ é™¤æ‰çš„æ•°æ®å¯ä»¥ä»åƒåœ¾æ¡¶ä¸­å›æ”¶ï¼Œå•ä½åˆ†é’Ÿ --></span> \t</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span> </pre></td></tr><tr><td data-num=\"19\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>fs.trash.interval<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span> </pre></td></tr><tr><td data-num=\"20\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>10080<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span> \t</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span> </pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>configuration</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>å…¶æ¬¡ï¼Œä¿®æ”¹ hdfs-site.xml æ–‡ä»¶ï¼Œåœ¨ &lt;configuration&gt; å…ƒç´ ä¸­æ·»åŠ ç›¸åº”çš„é…ç½®æ–‡ä»¶</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>configuration</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>dfs.namenode.secondary.http-address<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>master:50090<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- æŒ‡å®š namenode çš„è®¿é—®åœ°å€å’Œç«¯å£ --></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>dfs.namenode.http-address<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>master:50070<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- æŒ‡å®š namenode å…ƒæ•°æ®çš„å­˜æ”¾ä½ç½® --></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>dfs.namenode.name.dir<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>file:///opt/bigdata/hadoop-3.1.4/hadoopDatas/namenodeDatas,file:///opt/bigdata/hadoop-3.1.4/hadoopDatas/namenodeDatas2<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>\t<span class=\"token comment\">&lt;!--  å®šä¹‰ dataNode æ•°æ®å­˜å‚¨çš„èŠ‚ç‚¹ä½ç½®ï¼Œå®é™…å·¥ä½œä¸­ï¼Œä¸€èˆ¬å…ˆç¡®å®šç£ç›˜çš„æŒ‚è½½ç›®å½•ï¼Œç„¶åå¤šä¸ªç›®å½•ç”¨ï¼Œè¿›è¡Œåˆ†å‰²  --></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>dfs.datanode.data.dir<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>file:///opt/bigdata/hadoop-3.1.4/hadoopDatas/datanodeDatas,file:///opt/bigdata/hadoop-3.1.4/hadoopDatas/datanodeDatas2<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>\t</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- æŒ‡å®š namenode æ—¥å¿—æ–‡ä»¶çš„å­˜æ”¾ç›®å½• --></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>dfs.namenode.edits.dir<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>file:///opt/bigdata/hadoop-3.1.4/hadoopDatas/nn/edits<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>dfs.namenode.checkpoint.dir<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>file:///opt/bigdata/hadoop-3.1.4/hadoopDatas/snn/name<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>dfs.namenode.checkpoint.edits.dir<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>file:///opt/bigdata/hadoop-3.1.4/hadoopDatas/dfs/snn/edits<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- æ–‡ä»¶åˆ‡ç‰‡çš„å‰¯æœ¬ä¸ªæ•° --></span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>dfs.replication<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>3<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- è®¾ç½® HDFS çš„æ–‡ä»¶æƒé™ --></span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>dfs.permissions<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>true<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- è®¾ç½®ä¸€ä¸ªæ–‡ä»¶åˆ‡ç‰‡çš„å¤§å°ï¼š128M--></span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>dfs.blocksize<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>134217728<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>configuration</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>ç„¶åï¼Œä¿®æ”¹ yarn-site.xml æ–‡ä»¶ï¼Œåœ¨ &lt;configuration&gt; å…ƒç´ ä¸­æ·»åŠ ç›¸åº”çš„é…ç½®æ–‡ä»¶</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>configuration</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- é…ç½® yarn ä¸»èŠ‚ç‚¹çš„ä½ç½® --></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>yarn.resourcemanager.hostname<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>master<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>yarn.nodemanager.aux-services<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>mapreduce_shuffle<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\t</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- å¼€å¯æ—¥å¿—èšåˆåŠŸèƒ½ --></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>yarn.log-aggregation-enable<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>true<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- è®¾ç½®èšåˆæ—¥å¿—åœ¨ hdfs ä¸Šçš„ä¿å­˜æ—¶é—´ --></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>yarn.log-aggregation.retain-seconds<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>604800<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- è®¾ç½® yarn é›†ç¾¤çš„å†…å­˜åˆ†é…æ–¹æ¡ˆ --></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span>    </pre></td></tr><tr><td data-num=\"24\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>yarn.nodemanager.resource.memory-mb<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span>    </pre></td></tr><tr><td data-num=\"25\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>20480<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span>  </pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        \t <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>yarn.scheduler.minimum-allocation-mb<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>         \t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>2048<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>yarn.nodemanager.vmem-pmem-ratio<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>2.1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>configuration</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>ç„¶åï¼Œä¿®æ”¹ mapred-site.xml æ–‡ä»¶ï¼Œåœ¨ &lt;configuration&gt; å…ƒç´ ä¸­æ·»åŠ ç›¸åº”çš„é…ç½®æ–‡ä»¶</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>configuration</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- å¼€å¯ MapReduce å°ä»»åŠ¡æ¨¡å¼ --></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>mapreduce.job.ubertask.enable<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>true<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- è®¾ç½®å†å²ä»»åŠ¡çš„ä¸»æœºå’Œç«¯å£ --></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>mapreduce.jobhistory.address<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>master:10020<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>\t<span class=\"token comment\">&lt;!-- è®¾ç½®ç½‘é¡µè®¿é—®å†å²ä»»åŠ¡çš„ä¸»æœºå’Œç«¯å£ --></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>mapreduce.jobhistory.webapp.address<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>master:19888<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>configuration</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>ç„¶åï¼Œ<span class=\"exturl\" data-url=\"aHR0cDovL3huLS1oYWRvb3AtZW52LXl1NnA1NHIwbmE1NjF0LnNo\">åˆ†åˆ«ä¿®æ”¹ hadoop-env.sh</span>ã€mapred-env.sh æ–‡ä»¶</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@master hadoop]</span><span class=\"token comment\">#vi hadoop-env.sh</span></pre></td></tr></table></figure><figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@master hadoop]</span><span class=\"token comment\">#vi mapred-env.sh</span></pre></td></tr></table></figure><p>æ·»åŠ  Java ç¯å¢ƒå˜é‡</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>export JAVA_HOME=<span class=\"token operator\">/</span>opt<span class=\"token operator\">/</span>bigdata<span class=\"token operator\">/</span>jdk1<span class=\"token punctuation\">.</span>8<span class=\"token punctuation\">.</span>0_271</pre></td></tr></table></figure><p>æœ€åï¼Œä¿®æ”¹é›†ç¾¤é…ç½®æ–‡ä»¶ slavesï¼ˆæ²¡æœ‰åˆ™æ–°å»ºï¼‰</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@master hadoop]</span><span class=\"token comment\">#vi slaves</span></pre></td></tr></table></figure><p>æ·»åŠ </p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>master</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>node01</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>node02</pre></td></tr></table></figure><p>4ã€åˆ›å»º hadoop éœ€è¦çš„æ–‡ä»¶ç›®å½•</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>mkdir <span class=\"token operator\">-</span>p <span class=\"token operator\">/</span>opt<span class=\"token operator\">/</span>bigdata<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">-</span>3<span class=\"token punctuation\">.</span>1<span class=\"token punctuation\">.</span>4<span class=\"token operator\">/</span>hadoopDatas<span class=\"token operator\">/</span>tempDatas</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>mkdir <span class=\"token operator\">-</span>p <span class=\"token operator\">/</span>opt<span class=\"token operator\">/</span>bigdata<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">-</span>3<span class=\"token punctuation\">.</span>1<span class=\"token punctuation\">.</span>4<span class=\"token operator\">/</span>hadoopDatas<span class=\"token operator\">/</span>namenodeDatas</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>mkdir <span class=\"token operator\">-</span>p <span class=\"token operator\">/</span>opt<span class=\"token operator\">/</span>bigdata<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">-</span>3<span class=\"token punctuation\">.</span>1<span class=\"token punctuation\">.</span>4<span class=\"token operator\">/</span>hadoopDatas<span class=\"token operator\">/</span>namenodeDatas2</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>mkdir <span class=\"token operator\">-</span>p <span class=\"token operator\">/</span>opt<span class=\"token operator\">/</span>bigdata<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">-</span>3<span class=\"token punctuation\">.</span>1<span class=\"token punctuation\">.</span>4<span class=\"token operator\">/</span>hadoopDatas<span class=\"token operator\">/</span>datanodeDatas</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>mkdir <span class=\"token operator\">-</span>p <span class=\"token operator\">/</span>opt<span class=\"token operator\">/</span>bigdata<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">-</span>3<span class=\"token punctuation\">.</span>1<span class=\"token punctuation\">.</span>4<span class=\"token operator\">/</span>hadoopDatas<span class=\"token operator\">/</span>datanodeDatas2 </pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>mkdir <span class=\"token operator\">-</span>p <span class=\"token operator\">/</span>opt<span class=\"token operator\">/</span>bigdata<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">-</span>3<span class=\"token punctuation\">.</span>1<span class=\"token punctuation\">.</span>4<span class=\"token operator\">/</span>hadoopDatas<span class=\"token operator\">/</span>nn<span class=\"token operator\">/</span>edits</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>mkdir <span class=\"token operator\">-</span>p <span class=\"token operator\">/</span>opt<span class=\"token operator\">/</span>bigdata<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">-</span>3<span class=\"token punctuation\">.</span>1<span class=\"token punctuation\">.</span>4<span class=\"token operator\">/</span>hadoopDatas<span class=\"token operator\">/</span>snn<span class=\"token operator\">/</span>name</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>mkdir <span class=\"token operator\">-</span>p <span class=\"token operator\">/</span>opt<span class=\"token operator\">/</span>bigdata<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">-</span>3<span class=\"token punctuation\">.</span>1<span class=\"token punctuation\">.</span>4<span class=\"token operator\">/</span>hadoopDatas<span class=\"token operator\">/</span>dfs<span class=\"token operator\">/</span>snn<span class=\"token operator\">/</span>edits</pre></td></tr></table></figure><h2 id=\"5-åˆ†å‘jdk-hadoopåˆ°node01-node02\"><a class=\"anchor\" href=\"#5-åˆ†å‘jdk-hadoopåˆ°node01-node02\">#</a> 5ã€åˆ†å‘ jdkã€hadoop åˆ° node01ã€node02</h2>\n<p>é¦–å…ˆè¿›å…¥ jdkã€hadoop çš„å®‰è£…ç›®å½•</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@master hadoop]</span><span class=\"token comment\">#cd /opt/bigdata</span></pre></td></tr></table></figure><p>ç„¶ååˆ†å‘ jdkï¼Œåˆ†åˆ«åˆ° node01ã€node02</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>scp <span class=\"token operator\">-</span>r jdk1<span class=\"token punctuation\">.</span>8<span class=\"token punctuation\">.</span>0_271 node01:<span class=\"token variable\">$PWD</span> </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>scp <span class=\"token operator\">-</span>r jdk1<span class=\"token punctuation\">.</span>8<span class=\"token punctuation\">.</span>0_271 node02:<span class=\"token variable\">$PWD</span></pre></td></tr></table></figure><p>åˆ†å‘ Hadoopï¼Œåˆ†åˆ«åˆ° node01ã€node02</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>scp <span class=\"token operator\">-</span>r hadoop<span class=\"token operator\">-</span>3<span class=\"token punctuation\">.</span>1<span class=\"token punctuation\">.</span>4 node01:<span class=\"token variable\">$PWD</span> </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>scp <span class=\"token operator\">-</span>r hadoop<span class=\"token operator\">-</span>3<span class=\"token punctuation\">.</span>1<span class=\"token punctuation\">.</span>4 node02:<span class=\"token variable\">$PWD</span></pre></td></tr></table></figure><p>åˆ†å‘ master å·²ç»é…ç½®å¥½çš„ç¯å¢ƒå˜é‡æ–‡ä»¶åˆ° node01ã€node02 (éœ€è¦è¿›å…¥åˆ°æ ¹ç›®å½•)</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>scp <span class=\"token operator\">-</span>r <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>profile root@node01:<span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>profile </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>scp <span class=\"token operator\">-</span>r <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>profile root@node02:<span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>profile</pre></td></tr></table></figure><p>æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼Œè®©ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01~]</span><span class=\"token comment\">#source/etc/profile</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token namespace\">[root@node02~]</span><span class=\"token comment\">#source/etc/profile</span></pre></td></tr></table></figure><p>æ£€æŸ¥æ˜¯å¦ç”Ÿæ•ˆ</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@node01~]</span><span class=\"token comment\">#java -version</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token namespace\">[root@node02~]</span><span class=\"token comment\">#java -version</span></pre></td></tr></table></figure><h2 id=\"6-å¯åŠ¨é›†ç¾¤\"><a class=\"anchor\" href=\"#6-å¯åŠ¨é›†ç¾¤\">#</a> 6ã€å¯åŠ¨é›†ç¾¤</h2>\n<p>é¦–å…ˆï¼Œåœ¨ master ä¸»æœºè¿›è¡Œæ ¼å¼åŒ–ï¼ˆé¦–æ¬¡éœ€è¦æ‰§è¡Œï¼‰</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>cd  <span class=\"token operator\">/</span>opt<span class=\"token operator\">/</span>bigdata<span class=\"token operator\">/</span>hadoop<span class=\"token operator\">-</span>3<span class=\"token punctuation\">.</span>1<span class=\"token punctuation\">.</span>4<span class=\"token operator\">/</span> <span class=\"token comment\">#é¦–å…ˆè¿›å…¥ hadoop æ ¹ç›®å½•</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>bin<span class=\"token operator\">/</span>hdfs namenode <span class=\"token operator\">-</span>format <span class=\"token comment\">#æ‰§è¡Œæ ¼å¼åŒ–å‘½ä»¤</span></pre></td></tr></table></figure><p>ç„¶åï¼Œå¯åŠ¨ hdfs é›†ç¾¤</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>sbin<span class=\"token operator\">/</span><span class=\"token function\">start-dfs</span><span class=\"token punctuation\">.</span>sh</pre></td></tr></table></figure><p>å†å¯åŠ¨ yarn é›†ç¾¤</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>sbin<span class=\"token operator\">/</span><span class=\"token function\">start-yarn</span><span class=\"token punctuation\">.</span>sh</pre></td></tr></table></figure><p>æœ€åï¼Œå¯åŠ¨ historyserverï¼ŒæŸ¥çœ‹å†å²å®Œæˆçš„ä»»åŠ¡</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>sbin<span class=\"token operator\">/</span>mr<span class=\"token operator\">-</span>jobhistory<span class=\"token operator\">-</span>daemon<span class=\"token punctuation\">.</span>sh <span class=\"token function\">start</span> historyserver</pre></td></tr></table></figure><p>ä½¿ç”¨ jps æŸ¥çœ‹è¿›ç¨‹</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@master~]</span><span class=\"token comment\">#jps</span></pre></td></tr></table></figure><h2 id=\"7-æŸ¥çœ‹å¯è§†åŒ–ç•Œé¢éªŒè¯å¯åŠ¨æ˜¯å¦æˆåŠŸ\"><a class=\"anchor\" href=\"#7-æŸ¥çœ‹å¯è§†åŒ–ç•Œé¢éªŒè¯å¯åŠ¨æ˜¯å¦æˆåŠŸ\">#</a> 7ã€æŸ¥çœ‹å¯è§†åŒ–ç•Œé¢ï¼ŒéªŒè¯å¯åŠ¨æ˜¯å¦æˆåŠŸ</h2>\n<p>1ã€é¦–å…ˆè®¿é—®ï¼š<span class=\"exturl\" data-url=\"aHR0cDovLzE5Mi4xNjguMi4xMjg6NTAwNzAvZXhwbG9yZXIuaHRtbCMvJUVGJUJDJThDJUU3JTk0JUE4JUU2JTlEJUE1JUU2JTlGJUE1JUU3JTlDJThCaGRmcw==\">http://192.168.2.128:50070/explorer.html#/ï¼Œç”¨æ¥æŸ¥çœ‹ hdfs</span></p>\n<p>2ã€ç„¶åè®¿é—®ï¼š<span class=\"exturl\" data-url=\"aHR0cDovLzE5Mi4xNjguMi4xMjg6ODA4OC9jbHVzdGVyJUVGJUJDJThDJUU2JTlGJUE1JUU3JTlDJThCeWFybiVFOSU5QiU4NiVFNyVCRSVBNA==\">http://192.168.2.128:8088/clusterï¼ŒæŸ¥çœ‹ yarn é›†ç¾¤</span></p>\n<p>3ã€æœ€åè®¿é—®ï¼š<span class=\"exturl\" data-url=\"aHR0cDovLzE5Mi4xNjguMi4xMjg6MTk4ODgvam9iaGlzdG9yeSVFRiVCQyU4QyVFNiU5RiVBNSVFNyU5QyU4QiVFNSU4RSU4NiVFNSU4RiVCMiVFNSVBRSU4QyVFNiU4OCU5MCVFNyU5QSU4NCVFNCVCQiVCQiVFNSU4QSVBMQ==\">http://192.168.2.128:19888/jobhistoryï¼ŒæŸ¥çœ‹å†å²å®Œæˆçš„ä»»åŠ¡</span></p>\n<p>å¦‚æœéƒ½æœ‰é¡µé¢è¡¨ç¤ºæ­å»ºæˆåŠŸï¼</p>\n",
            "tags": []
        },
        {
            "id": "https://methiony.work/2020/11/21/Platform-construction/Zookeeper/course-1/Zookeeper%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA/",
            "url": "https://methiony.work/2020/11/21/Platform-construction/Zookeeper/course-1/Zookeeper%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA/",
            "title": "Zookeeperå¿«é€Ÿæ­å»º",
            "date_published": "2020-11-21T09:40:19.000Z",
            "content_html": "<p>:::note info<br />\n ä»¥ä¸‹ä¸ºä¸ªäººå­¦ä¹ ç¬”è®°å’Œä¹ é¢˜æ•´ç†<br />\nè¯¾ç¨‹ï¼š å¤§æ•°æ®è‡ªå­¦æ•™ç¨‹ Hadoop ä»é›¶åˆ°ç²¾é€šå®Œæ•´ç‰ˆ @<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zcGFjZS5iaWxpYmlsaS5jb20vNTg2Mzg5MDQ5\">é»‘é©¬ç¨‹åºå‘˜å¤§æ•°æ®æ•™ç¨‹</span><br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWVrNHkxMTdZcQ==\"> https://www.bilibili.com/video/BV1ek4y117Yq</span><br />\n:::</p>\n<h1 id=\"zookeeperå¿«é€Ÿæ­å»º\"><a class=\"anchor\" href=\"#zookeeperå¿«é€Ÿæ­å»º\">#</a> ZooKeeper å¿«é€Ÿæ­å»º</h1>\n<h2 id=\"1-zookeeperçš„å®‰è£…éƒ¨ç½²\"><a class=\"anchor\" href=\"#1-zookeeperçš„å®‰è£…éƒ¨ç½²\">#</a> 1ã€Zookeeper çš„å®‰è£…éƒ¨ç½²</h2>\n<h3 id=\"æ‹·è´zookeeperå®‰è£…åŒ…åˆ°linuxç³»ç»Ÿä¸‹\"><a class=\"anchor\" href=\"#æ‹·è´zookeeperå®‰è£…åŒ…åˆ°linuxç³»ç»Ÿä¸‹\">#</a> æ‹·è´ Zookeeper å®‰è£…åŒ…åˆ° Linux ç³»ç»Ÿä¸‹</h3>\n<h3 id=\"è§£å‹åˆ°æŒ‡å®šç›®å½•\"><a class=\"anchor\" href=\"#è§£å‹åˆ°æŒ‡å®šç›®å½•\">#</a> è§£å‹åˆ°æŒ‡å®šç›®å½•</h3>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@master]</span>$ tar <span class=\"token operator\">-</span>zxvf zookeeper<span class=\"token operator\">-</span>3<span class=\"token punctuation\">.</span>6<span class=\"token punctuation\">.</span>2<span class=\"token punctuation\">.</span>tar<span class=\"token punctuation\">.</span>gz <span class=\"token operator\">-</span>C <span class=\"token operator\">/</span>opt<span class=\"token operator\">/</span>bigdata<span class=\"token operator\">/</span></pre></td></tr></table></figure><h3 id=\"é…ç½®ä¿®æ”¹\"><a class=\"anchor\" href=\"#é…ç½®ä¿®æ”¹\">#</a> é…ç½®ä¿®æ”¹</h3>\n<h4 id=\"optbigdatazookeeper-362confè¿™ä¸ªè·¯å¾„ä¸‹çš„zoo_samplecfgä¿®æ”¹ä¸ºzoocfgå¦‚æœå­˜åœ¨zoocfgæ–‡ä»¶åˆ™ä¸éœ€è¦æ‹·è´zoo_samplecfg\"><a class=\"anchor\" href=\"#optbigdatazookeeper-362confè¿™ä¸ªè·¯å¾„ä¸‹çš„zoo_samplecfgä¿®æ”¹ä¸ºzoocfgå¦‚æœå­˜åœ¨zoocfgæ–‡ä»¶åˆ™ä¸éœ€è¦æ‹·è´zoo_samplecfg\">#</a> /opt/bigdata/zookeeper-3.6.2/conf è¿™ä¸ªè·¯å¾„ä¸‹çš„ zoo_sample.cfg ä¿®æ”¹ä¸º zoo.cfg (å¦‚æœå­˜åœ¨ zoo.cfg æ–‡ä»¶åˆ™ä¸éœ€è¦æ‹·è´ zoo_sample.cfg)</h4>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@master]</span>$ <span class=\"token function\">mv</span> zoo_sample<span class=\"token punctuation\">.</span>cfg zoo<span class=\"token punctuation\">.</span>cfg</pre></td></tr></table></figure><p>æ‰“å¼€ zoo.cfg æ–‡ä»¶ï¼Œä¿®æ”¹ dataDir è·¯å¾„</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>dataDir=<span class=\"token operator\">/</span>opt<span class=\"token operator\">/</span>bigdata<span class=\"token operator\">/</span>zookeeper<span class=\"token operator\">-</span>3<span class=\"token punctuation\">.</span>6<span class=\"token punctuation\">.</span>2<span class=\"token operator\">/</span>zkData</pre></td></tr></table></figure><p>æ–‡ä»¶å†…å®¹æœ«å°¾æ·»åŠ å†…å®¹</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>server<span class=\"token punctuation\">.</span>1=master:2888:3888</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>server<span class=\"token punctuation\">.</span>2=node1:2888:3888</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>server<span class=\"token punctuation\">.</span>3=node2:2888:3888</pre></td></tr></table></figure><p>åœ¨ /opt/bigdata/zookeeper-3.6.2 / è¿™ä¸ªç›®å½•ä¸Šåˆ›å»º zkData æ–‡ä»¶å¤¹</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@master zookeeper-3.6.2]</span>$ mkdir zkData</pre></td></tr></table></figure><p>åœ¨ /opt/bigdata/zookeeper-3.6.2/zkData è¿™ä¸ªç›®å½•ä¸Šåˆ›å»º myid æ–‡ä»¶</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@master zkData]</span>$ touch myid</pre></td></tr></table></figure><p>ç¼–è¾‘ myid æ–‡ä»¶ (å…¶ä»–æœºå™¨ä¸Šä¿®æ”¹å¯¹åº”çš„ server çš„æ•°å­—)</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@master zkData]</span>$ vi myid</pre></td></tr></table></figure><pre><code>1\n</code></pre>\n<p>æ‹·è´åˆ†å‘åˆ° node1ã€node2</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@master bigdata]</span>$ scp <span class=\"token operator\">-</span>r zookeeper<span class=\"token operator\">-</span>3<span class=\"token punctuation\">.</span>6<span class=\"token punctuation\">.</span>2 node1:<span class=\"token variable\">$PWD</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token namespace\">[root@master bigdata]</span>$ scp <span class=\"token operator\">-</span>r zookeeper<span class=\"token operator\">-</span>3<span class=\"token punctuation\">.</span>6<span class=\"token punctuation\">.</span>2 node2:<span class=\"token variable\">$PWD</span></pre></td></tr></table></figure><p>ä¿®æ”¹ myid æ–‡ä»¶</p>\n<h2 id=\"2-zookeeperå¯åŠ¨ä¸æ“ä½œ\"><a class=\"anchor\" href=\"#2-zookeeperå¯åŠ¨ä¸æ“ä½œ\">#</a> 2ã€ Zookeeper å¯åŠ¨ä¸æ“ä½œ</h2>\n<h3 id=\"å¯åŠ¨zookeeper\"><a class=\"anchor\" href=\"#å¯åŠ¨zookeeper\">#</a> å¯åŠ¨ Zookeeper</h3>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@master zookeeper-3.6.2]</span><span class=\"token variable\">$bin</span><span class=\"token operator\">/</span>zkServer<span class=\"token punctuation\">.</span>sh <span class=\"token function\">start</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>ZooKeeper JMX enabled by default</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">Using</span> config: <span class=\"token operator\">/</span>opt<span class=\"token operator\">/</span>bigdata<span class=\"token operator\">/</span>zookeeper<span class=\"token operator\">-</span>3<span class=\"token punctuation\">.</span>6<span class=\"token punctuation\">.</span>2<span class=\"token operator\">/</span>bin<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>conf<span class=\"token operator\">/</span>zoo<span class=\"token punctuation\">.</span>cfg</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>Starting zookeeper <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> STARTED     <span class=\"token comment\"># è¿™æ—¶ï¼Œä¸€èˆ¬å°±å¯åŠ¨æˆåŠŸäº†</span></pre></td></tr></table></figure><h3 id=\"æŸ¥çœ‹è¿›ç¨‹æ˜¯å¦å¯åŠ¨\"><a class=\"anchor\" href=\"#æŸ¥çœ‹è¿›ç¨‹æ˜¯å¦å¯åŠ¨\">#</a> æŸ¥çœ‹è¿›ç¨‹æ˜¯å¦å¯åŠ¨</h3>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@master zookeeper-3.6.2]</span><span class=\"token variable\">$jps</span></pre></td></tr></table></figure><h3 id=\"æŸ¥çœ‹çŠ¶æ€\"><a class=\"anchor\" href=\"#æŸ¥çœ‹çŠ¶æ€\">#</a> æŸ¥çœ‹çŠ¶æ€</h3>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@master zookeeper-3.6.2]</span><span class=\"token variable\">$bin</span><span class=\"token operator\">/</span>zkServer<span class=\"token punctuation\">.</span>sh status</pre></td></tr></table></figure><h3 id=\"å¯åŠ¨å®¢æˆ·ç«¯\"><a class=\"anchor\" href=\"#å¯åŠ¨å®¢æˆ·ç«¯\">#</a> å¯åŠ¨å®¢æˆ·ç«¯</h3>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@master zookeeper-3.6.2]</span><span class=\"token variable\">$bin</span><span class=\"token operator\">/</span>zkCli<span class=\"token punctuation\">.</span>sh</pre></td></tr></table></figure><h3 id=\"é€€å‡ºå®¢æˆ·ç«¯\"><a class=\"anchor\" href=\"#é€€å‡ºå®¢æˆ·ç«¯\">#</a> é€€å‡ºå®¢æˆ·ç«¯</h3>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[zk: localhost:2181(CONNECTED) 0]</span> quit</pre></td></tr></table></figure><h3 id=\"åœç”¨zookeeper\"><a class=\"anchor\" href=\"#åœç”¨zookeeper\">#</a> åœç”¨ Zookeeper</h3>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token namespace\">[root@master zookeeper-3.6.2]</span><span class=\"token variable\">$bin</span><span class=\"token operator\">/</span>zkServer<span class=\"token punctuation\">.</span>sh stop</pre></td></tr></table></figure>",
            "tags": []
        },
        {
            "id": "https://methiony.work/2020/11/19/Platform-construction/Hbase/Hbase/",
            "url": "https://methiony.work/2020/11/19/Platform-construction/Hbase/Hbase/",
            "title": "Hbase",
            "date_published": "2020-11-19T07:53:18.000Z",
            "content_html": "<h1 id=\"hbaseåŸºç¡€ç³»åˆ—1\"><a class=\"anchor\" href=\"#hbaseåŸºç¡€ç³»åˆ—1\">#</a> Hbase åŸºç¡€ç³»åˆ—ï¼ˆ1ï¼‰</h1>\n<h2 id=\"1-hbaseå®šä¹‰\"><a class=\"anchor\" href=\"#1-hbaseå®šä¹‰\">#</a> 1ã€ HBase å®šä¹‰</h2>\n<p>HBase æ˜¯ä¸€ç§åˆ†å¸ƒå¼ã€å¯æ‰©å±•ã€æ”¯æŒæµ·é‡æ•°æ®å­˜å‚¨çš„ NoSQL æ•°æ®åº“ã€‚</p>\n<h2 id=\"2-hbaseç‰¹ç‚¹\"><a class=\"anchor\" href=\"#2-hbaseç‰¹ç‚¹\">#</a> 2ã€HBase ç‰¹ç‚¹</h2>\n<ul>\n<li>1. æµ·é‡å­˜å‚¨</li>\n</ul>\n<p>Hbase é€‚åˆå­˜å‚¨ PB çº§åˆ«çš„æµ·é‡æ•°æ®ï¼Œåœ¨ PB çº§åˆ«çš„æ•°æ®ä»¥åŠé‡‡ç”¨å»‰ä»· PC å­˜å‚¨çš„æƒ…å†µä¸‹ï¼Œèƒ½åœ¨å‡ ååˆ°ç™¾æ¯«ç§’å†…è¿”å›æ•°æ®ã€‚è¿™ä¸ Hbase çš„ææ˜“æ‰©å±•æ€§æ¯æ¯ç›¸å…³ã€‚æ­£å¼å› ä¸º Hbase è‰¯å¥½çš„æ‰©å±•æ€§ï¼Œæ‰ä¸ºæµ·é‡æ•°æ®çš„å­˜å‚¨æä¾›äº†ä¾¿åˆ©ã€‚</p>\n<ul>\n<li>2. åˆ—å¼å­˜å‚¨</li>\n</ul>\n<p>è¿™é‡Œçš„åˆ—å¼å­˜å‚¨å…¶å®è¯´çš„æ˜¯åˆ—æ—å­˜å‚¨ï¼ŒHbase æ˜¯æ ¹æ®åˆ—æ—æ¥å­˜å‚¨æ•°æ®çš„ã€‚åˆ—æ—ä¸‹é¢å¯ä»¥æœ‰éå¸¸å¤šçš„åˆ—ï¼Œåˆ—æ—åœ¨åˆ›å»ºè¡¨çš„æ—¶å€™å°±å¿…é¡»æŒ‡å®šã€‚</p>\n<ul>\n<li>3. ææ˜“æ‰©å±•</li>\n</ul>\n<p>Hbase çš„æ‰©å±•æ€§ä¸»è¦ä½“ç°åœ¨ä¸¤ä¸ªæ–¹é¢ï¼Œä¸€ä¸ªæ˜¯åŸºäºä¸Šå±‚å¤„ç†èƒ½åŠ›ï¼ˆRegionServerï¼‰çš„æ‰©å±•ï¼Œä¸€ä¸ªæ˜¯åŸºäºå­˜å‚¨çš„æ‰©å±•ï¼ˆHDFSï¼‰ã€‚<br />\né€šè¿‡æ¨ªå‘æ·»åŠ  RegionSever çš„æœºå™¨ï¼Œè¿›è¡Œæ°´å¹³æ‰©å±•ï¼Œæå‡ Hbase ä¸Šå±‚çš„å¤„ç†èƒ½åŠ›ï¼Œæå‡ Hbsae æœåŠ¡æ›´å¤š Region çš„èƒ½åŠ›ã€‚<br />\nâ€ƒâ€ƒå¤‡æ³¨ï¼šRegionServer çš„ä½œç”¨æ˜¯ç®¡ç† regionã€æ‰¿æ¥ä¸šåŠ¡çš„è®¿é—®ï¼Œè¿™ä¸ªåé¢ä¼šè¯¦ç»†çš„ä»‹ç»é€šè¿‡æ¨ªå‘æ·»åŠ  Datanode çš„æœºå™¨ï¼Œè¿›è¡Œå­˜å‚¨å±‚æ‰©å®¹ï¼Œæå‡ Hbase çš„æ•°æ®å­˜å‚¨èƒ½åŠ›å’Œæå‡åç«¯å­˜å‚¨çš„è¯»å†™èƒ½åŠ›ã€‚</p>\n<ul>\n<li>4. é«˜å¹¶å‘</li>\n</ul>\n<p>ç”±äºç›®å‰å¤§éƒ¨åˆ†ä½¿ç”¨ Hbase çš„æ¶æ„ï¼Œéƒ½æ˜¯é‡‡ç”¨çš„å»‰ä»· PCï¼Œå› æ­¤å•ä¸ª IO çš„å»¶è¿Ÿå…¶å®å¹¶ä¸å°ï¼Œä¸€èˆ¬åœ¨å‡ ååˆ°ä¸Šç™¾ ms ä¹‹é—´ã€‚è¿™é‡Œè¯´çš„é«˜å¹¶å‘ï¼Œä¸»è¦æ˜¯åœ¨å¹¶å‘çš„æƒ…å†µä¸‹ï¼ŒHbase çš„å•ä¸ª IO å»¶è¿Ÿä¸‹é™å¹¶ä¸å¤šã€‚èƒ½è·å¾—é«˜å¹¶å‘ã€ä½å»¶è¿Ÿçš„æœåŠ¡ã€‚</p>\n<ul>\n<li>5. ç¨€ç–</li>\n</ul>\n<p>ç¨€ç–ä¸»è¦æ˜¯é’ˆå¯¹ Hbase åˆ—çš„çµæ´»æ€§ï¼Œåœ¨åˆ—æ—ä¸­ï¼Œä½ å¯ä»¥æŒ‡å®šä»»æ„å¤šçš„åˆ—ï¼Œåœ¨åˆ—æ•°æ®ä¸ºç©ºçš„æƒ…å†µä¸‹ï¼Œæ˜¯ä¸ä¼šå ç”¨å­˜å‚¨ç©ºé—´çš„ã€‚</p>\n<h2 id=\"3-hbaseçš„æ•°æ®æ¨¡å‹\"><a class=\"anchor\" href=\"#3-hbaseçš„æ•°æ®æ¨¡å‹\">#</a> 3ã€Hbase çš„æ•°æ®æ¨¡å‹</h2>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cDovLzEuTmFtZQ==\">1.Name</span> Space</li>\n</ul>\n<p>å‘½åç©ºé—´ï¼Œç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“çš„ database æ¦‚å¿µï¼Œæ¯ä¸ªå‘½åç©ºé—´ä¸‹æœ‰å¤šä¸ªè¡¨ã€‚HBase ä¸¤ä¸ªè‡ªå¸¦çš„å‘½åç©ºé—´ï¼Œåˆ†åˆ«æ˜¯ hbase å’Œ defaultï¼Œhbase ä¸­å­˜æ”¾çš„æ˜¯ HBase å†…ç½®çš„è¡¨ï¼Œdefault è¡¨æ˜¯ç”¨æˆ·é»˜è®¤ä½¿ç”¨çš„å‘½åç©ºé—´ã€‚</p>\n<ul>\n<li>2.Table</li>\n</ul>\n<p>ç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“çš„è¡¨æ¦‚å¿µã€‚ä¸åŒçš„æ˜¯ï¼ŒHBase å®šä¹‰è¡¨æ—¶åªéœ€è¦å£°æ˜åˆ—æ—å³å¯ï¼Œä¸éœ€è¦å£°æ˜å…·ä½“çš„åˆ—ã€‚è¿™æ„å‘³ç€ï¼Œå¾€ HBase å†™å…¥æ•°æ®æ—¶ï¼Œå­—æ®µå¯ä»¥åŠ¨æ€ã€æŒ‰éœ€æŒ‡å®šã€‚å› æ­¤ï¼Œå’Œå…³ç³»å‹æ•°æ®åº“ç›¸æ¯”ï¼ŒHBase èƒ½å¤Ÿè½»æ¾åº”å¯¹å­—æ®µå˜æ›´çš„åœºæ™¯ã€‚</p>\n<ul>\n<li>3.Row</li>\n</ul>\n<p>HBase è¡¨ä¸­çš„æ¯è¡Œæ•°æ®éƒ½ç”±ä¸€ä¸ª RowKey å’Œå¤šä¸ª Columnï¼ˆåˆ—ï¼‰ç»„æˆï¼Œæ•°æ®æ˜¯æŒ‰ç…§ RowKey çš„å­—å…¸é¡ºåºå­˜å‚¨çš„ï¼Œå¹¶ä¸”æŸ¥è¯¢æ•°æ®æ—¶åªèƒ½æ ¹æ® RowKey è¿›è¡Œæ£€ç´¢ï¼Œæ‰€ä»¥ RowKey çš„è®¾è®¡ååˆ†é‡è¦ã€‚</p>\n<ul>\n<li>4.Column</li>\n</ul>\n<p>HBase ä¸­çš„æ¯ä¸ªåˆ—éƒ½ç”± Column Family (åˆ—æ—) å’Œ Column Qualifierï¼ˆåˆ—é™å®šç¬¦ï¼‰è¿›è¡Œé™å®šï¼Œä¾‹å¦‚ infoï¼šnameï¼Œinfoï¼šageã€‚å»ºè¡¨æ—¶ï¼Œåªéœ€æŒ‡æ˜åˆ—æ—ï¼Œè€Œåˆ—é™å®šç¬¦æ— éœ€é¢„å…ˆå®šä¹‰ã€‚</p>\n<ul>\n<li>5.Time Stamp</li>\n</ul>\n<p>ç”¨äºæ ‡è¯†æ•°æ®çš„ä¸åŒç‰ˆæœ¬ï¼ˆversionï¼‰ï¼Œæ¯æ¡æ•°æ®å†™å…¥æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä¸ºå…¶åŠ ä¸Šè¯¥å­—æ®µï¼Œå…¶å€¼ä¸ºå†™å…¥ HBase çš„æ—¶é—´ã€‚</p>\n<ul>\n<li>6.Cell</li>\n</ul>\n<p>ç”± {rowkey, column Familyï¼šcolumn Qualifier, time Stamp} å”¯ä¸€ç¡®å®šçš„å•å…ƒã€‚cell ä¸­çš„æ•°æ®æ˜¯æ²¡æœ‰ç±»å‹çš„ï¼Œå…¨éƒ¨æ˜¯å­—èŠ‚ç å½¢å¼å­˜è´®ã€‚</p>\n<h2 id=\"4-hbaseæ¶æ„\"><a class=\"anchor\" href=\"#4-hbaseæ¶æ„\">#</a> 4ã€ HBase æ¶æ„</h2>\n<ul>\n<li>1.Client</li>\n</ul>\n<p>Client åŒ…å«äº†è®¿é—® Hbase çš„æ¥å£ï¼Œå¦å¤– Client è¿˜ç»´æŠ¤äº†å¯¹åº”çš„ cache æ¥åŠ é€Ÿ Hbase çš„è®¿é—®ï¼Œæ¯”å¦‚ cache çš„.META. å…ƒæ•°æ®çš„ä¿¡æ¯ã€‚</p>\n<ul>\n<li>2.Zookeeper</li>\n</ul>\n<p>HBase é€šè¿‡ Zookeeper æ¥åš master çš„é«˜å¯ç”¨ã€RegionServer çš„ç›‘æ§ã€å…ƒæ•°æ®çš„å…¥å£ä»¥åŠé›†ç¾¤é…ç½®çš„ç»´æŠ¤ç­‰å·¥ä½œã€‚å…·ä½“å·¥ä½œå¦‚ä¸‹ï¼š</p>\n<blockquote>\n<p>é€šè¿‡ Zoopkeeper æ¥ä¿è¯é›†ç¾¤ä¸­åªæœ‰ 1 ä¸ª master åœ¨è¿è¡Œï¼Œå¦‚æœ master å¼‚å¸¸ï¼Œä¼šé€šè¿‡ç«äº‰æœºåˆ¶äº§ç”Ÿæ–°çš„ master æä¾›æœåŠ¡<br />\né€šè¿‡ Zoopkeeper æ¥ç›‘æ§ RegionServer çš„çŠ¶æ€ï¼Œå½“ RegionSevrer æœ‰å¼‚å¸¸çš„æ—¶å€™ï¼Œé€šè¿‡å›è°ƒçš„å½¢å¼é€šçŸ¥ MasterRegionServer ä¸Šä¸‹çº¿çš„ä¿¡æ¯<br />\né€šè¿‡ Zoopkeeper å­˜å‚¨å…ƒæ•°æ®çš„ç»Ÿä¸€å…¥å£åœ°å€</p>\n</blockquote>\n<ul>\n<li>3.Hmaster</li>\n</ul>\n<p>master èŠ‚ç‚¹çš„ä¸»è¦èŒè´£å¦‚ä¸‹ï¼š</p>\n<blockquote>\n<p>ä¸º RegionServer åˆ†é… Region<br />\n ç»´æŠ¤æ•´ä¸ªé›†ç¾¤çš„è´Ÿè½½å‡è¡¡<br />\nç»´æŠ¤é›†ç¾¤çš„å…ƒæ•°æ®ä¿¡æ¯<br />\nå‘ç°å¤±æ•ˆçš„ Regionï¼Œå¹¶å°†å¤±æ•ˆçš„ Region åˆ†é…åˆ°æ­£å¸¸çš„ RegionServer ä¸Š<br />\nå½“ RegionSever å¤±æ•ˆçš„æ—¶å€™ï¼Œåè°ƒå¯¹åº” Hlog çš„æ‹†åˆ†</p>\n</blockquote>\n<ul>\n<li>4.HregionServer</li>\n</ul>\n<p>HregionServer ç›´æ¥å¯¹æ¥ç”¨æˆ·çš„è¯»å†™è¯·æ±‚ï¼Œæ˜¯çœŸæ­£çš„ â€œå¹²æ´»â€ çš„èŠ‚ç‚¹ã€‚å®ƒçš„åŠŸèƒ½æ¦‚æ‹¬å¦‚ä¸‹ï¼š</p>\n<blockquote>\n<p>ç®¡ç† master ä¸ºå…¶åˆ†é…çš„ Region<br />\n å¤„ç†æ¥è‡ªå®¢æˆ·ç«¯çš„è¯»å†™è¯·æ±‚<br />\nè´Ÿè´£å’Œåº•å±‚ HDFS çš„äº¤äº’ï¼Œ<br />\nå­˜å‚¨æ•°æ®åˆ° HDFS<br />\n è´Ÿè´£ Region å˜å¤§ä»¥åçš„æ‹†åˆ†<br />\nè´Ÿè´£ Storefile çš„åˆå¹¶å·¥ä½œ</p>\n</blockquote>\n<ul>\n<li>5.HDFS</li>\n</ul>\n<p>HDFS ä¸º Hbase æä¾›æœ€ç»ˆçš„åº•å±‚æ•°æ®å­˜å‚¨æœåŠ¡ï¼ŒåŒæ—¶ä¸º HBase æä¾›é«˜å¯ç”¨ï¼ˆHlog å­˜å‚¨åœ¨ HDFSï¼‰çš„æ”¯æŒï¼Œå…·ä½“åŠŸèƒ½æ¦‚æ‹¬å¦‚ä¸‹ï¼š</p>\n<blockquote>\n<p>æä¾›å…ƒæ•°æ®å’Œè¡¨æ•°æ®çš„åº•å±‚åˆ†å¸ƒå¼å­˜å‚¨æœåŠ¡<br />\næ•°æ®å¤šå‰¯æœ¬ï¼Œä¿è¯çš„é«˜å¯é å’Œé«˜å¯ç”¨æ€§</p>\n</blockquote>\n<h2 id=\"5-hbaseä¸­çš„è§’è‰²\"><a class=\"anchor\" href=\"#5-hbaseä¸­çš„è§’è‰²\">#</a> 5ã€HBase ä¸­çš„è§’è‰²</h2>\n<h4 id=\"1-hmaster\"><a class=\"anchor\" href=\"#1-hmaster\">#</a> 1 HMaster</h4>\n<ul>\n<li>åŠŸèƒ½</li>\n<li>1ï¼ç›‘æ§ RegionServer</li>\n<li>2ï¼å¤„ç† RegionServer æ•…éšœè½¬ç§»</li>\n<li>3ï¼å¤„ç†å…ƒæ•°æ®çš„å˜æ›´</li>\n<li>4ï¼å¤„ç† region çš„åˆ†é…æˆ–è½¬ç§»</li>\n<li>5ï¼åœ¨ç©ºé—²æ—¶é—´è¿›è¡Œæ•°æ®çš„è´Ÿè½½å‡è¡¡</li>\n<li>6ï¼é€šè¿‡ Zookeeper å‘å¸ƒè‡ªå·±çš„ä½ç½®ç»™å®¢æˆ·ç«¯</li>\n</ul>\n<h4 id=\"2-regionserver\"><a class=\"anchor\" href=\"#2-regionserver\">#</a> 2 RegionServer</h4>\n<ul>\n<li>åŠŸèƒ½</li>\n<li>1ï¼è´Ÿè´£å­˜å‚¨ HBase çš„å®é™…æ•°æ®</li>\n<li>2ï¼å¤„ç†åˆ†é…ç»™å®ƒçš„ Region</li>\n<li>3ï¼åˆ·æ–°ç¼“å­˜åˆ° HDFS</li>\n<li>4ï¼ç»´æŠ¤ Hlog</li>\n<li>5ï¼æ‰§è¡Œå‹ç¼©</li>\n<li>6ï¼è´Ÿè´£å¤„ç† Region åˆ†ç‰‡</li>\n</ul>\n<h4 id=\"3-å…¶ä»–ç»„ä»¶\"><a class=\"anchor\" href=\"#3-å…¶ä»–ç»„ä»¶\">#</a> 3. å…¶ä»–ç»„ä»¶</h4>\n<ul>\n<li>1ï¼Write-Ahead logs</li>\n</ul>\n<p>HBase çš„ä¿®æ”¹è®°å½•ï¼Œå½“å¯¹ HBase è¯»å†™æ•°æ®çš„æ—¶å€™ï¼Œæ•°æ®ä¸æ˜¯ç›´æ¥å†™è¿›ç£ç›˜ï¼Œå®ƒä¼šåœ¨å†…å­˜ä¸­ä¿ç•™ä¸€æ®µæ—¶é—´ï¼ˆæ—¶é—´ä»¥åŠæ•°æ®é‡é˜ˆå€¼å¯ä»¥è®¾å®šï¼‰ã€‚ä½†æŠŠæ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­å¯èƒ½æœ‰æ›´é«˜çš„æ¦‚ç‡å¼•èµ·æ•°æ®ä¸¢å¤±ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ•°æ®ä¼šå…ˆå†™åœ¨ä¸€ä¸ªå«åš Write-Ahead logfile çš„æ–‡ä»¶ä¸­ï¼Œç„¶åå†å†™å…¥å†…å­˜ä¸­ã€‚æ‰€ä»¥åœ¨ç³»ç»Ÿå‡ºç°æ•…éšœçš„æ—¶å€™ï¼Œæ•°æ®å¯ä»¥é€šè¿‡è¿™ä¸ªæ—¥å¿—æ–‡ä»¶é‡å»ºã€‚</p>\n<ul>\n<li>2ï¼Region</li>\n</ul>\n<p>Hbase è¡¨çš„åˆ†ç‰‡ï¼ŒHBase è¡¨ä¼šæ ¹æ® RowKey å€¼è¢«åˆ‡åˆ†æˆä¸åŒçš„ region å­˜å‚¨åœ¨ RegionServer ä¸­ï¼Œåœ¨ä¸€ä¸ª RegionServer ä¸­å¯ä»¥æœ‰å¤šä¸ªä¸åŒçš„ regionã€‚</p>\n<ul>\n<li>3ï¼Store</li>\n</ul>\n<p>HFile å­˜å‚¨åœ¨ Store ä¸­ï¼Œä¸€ä¸ª Store å¯¹åº” HBase è¡¨ä¸­çš„ä¸€ä¸ªåˆ—æ—ã€‚</p>\n<ul>\n<li>4ï¼MemStore</li>\n</ul>\n<p>é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å†…å­˜å­˜å‚¨ï¼Œä½äºå†…å­˜ä¸­ï¼Œç”¨æ¥ä¿å­˜å½“å‰çš„æ•°æ®æ“ä½œï¼Œæ‰€ä»¥å½“æ•°æ®ä¿å­˜åœ¨ WAL ä¸­ä¹‹åï¼ŒRegsionServer ä¼šåœ¨å†…å­˜ä¸­å­˜å‚¨é”®å€¼å¯¹ã€‚</p>\n<ul>\n<li>5ï¼HFile</li>\n</ul>\n<p>è¿™æ˜¯åœ¨ç£ç›˜ä¸Šä¿å­˜åŸå§‹æ•°æ®çš„å®é™…çš„ç‰©ç†æ–‡ä»¶ï¼Œæ˜¯å®é™…çš„å­˜å‚¨æ–‡ä»¶ã€‚StoreFile æ˜¯ä»¥ Hfile çš„å½¢å¼å­˜å‚¨åœ¨ HDFS çš„ã€‚</p>\n",
            "tags": []
        },
        {
            "id": "https://methiony.work/2020/11/15/MySQL/",
            "url": "https://methiony.work/2020/11/15/MySQL/",
            "title": "MySQL",
            "date_published": "2020-11-15T10:43:49.000Z",
            "content_html": "<h2 id=\"mysqlæœåŠ¡çš„ç™»å½•å’Œé€€å‡º\"><a class=\"anchor\" href=\"#mysqlæœåŠ¡çš„ç™»å½•å’Œé€€å‡º\">#</a> MySql æœåŠ¡çš„ç™»å½•å’Œé€€å‡º</h2>\n<p>â€‹\t\tæ–¹å¼ä¸€ï¼šé€šè¿‡ mysql è‡ªå¸¦çš„å®¢æˆ·ç«¯ï¼šåªé™äº root ç”¨æˆ·</p>\n<p>â€‹\t\tæ–¹å¼äºŒï¼šé€šè¿‡ Windows è‡ªå¸¦çš„å®¢æˆ·ç«¯ï¼š1ã€ç™»å½•ï¼š</p>\n<pre><code class=\"language-mysql\">mysql\t[-hä¸»æœºå\t-pç«¯å£å·]\t-uç”¨æˆ·å\t-p å¯†ç \n</code></pre>\n<p>â€‹\t\té€€å‡ºï¼š</p>\n<pre><code class=\"language-mysql\">exitæˆ–ctrl + c\n</code></pre>\n<h2 id=\"mysqlçš„å¸¸è§å‘½ä»¤\"><a class=\"anchor\" href=\"#mysqlçš„å¸¸è§å‘½ä»¤\">#</a> MySql çš„å¸¸è§å‘½ä»¤</h2>\n<p>â€‹\t\t1ã€æŸ¥çœ‹å½“å‰æ‰€æœ‰çš„æ•°æ®åº“ï¼š</p>\n<pre><code class=\"language-mysql\">show\tdatabases;\n</code></pre>\n<p>â€‹\t\t2ã€æ‰“å¼€æŒ‡å®šçš„åº“ï¼š</p>\n<pre><code class=\"language-mysql\">use\tåº“å\n</code></pre>\n<p>â€‹\t\t3ã€æŸ¥çœ‹å½“å‰åº“çš„æ‰€æœ‰è¡¨ï¼š</p>\n<pre><code class=\"language-mysql\">show\ttables;\n</code></pre>\n<p>â€‹\t\t4ã€æŸ¥çœ‹å…¶ä»–åº“çš„æ‰€æœ‰è¡¨ï¼š</p>\n<pre><code class=\"language-mysql\">show\ttables\tfrom\tåº“å;\n</code></pre>\n<p>â€‹\t\t5ã€åˆ›å»ºè¡¨ï¼š</p>\n<pre><code class=\"language-mysql\">create\ttable\tè¡¨å(\n\nâ€‹\t\t\t\t\t\tåˆ—å\tåˆ—ç±»å‹,\n\nâ€‹\t\t\t\t\t\tåˆ—å\tåˆ—ç±»å‹,\n\nâ€‹\t\t\t\t\t\t...\n\nâ€‹\t\t\t)\n</code></pre>\n<p>â€‹\t\t6ã€æŸ¥çœ‹è¡¨ç»“æ„ï¼š</p>\n<pre><code class=\"language-mysql\">desc\tè¡¨å;\n</code></pre>\n<p>â€‹\t\t7ã€æŸ¥çœ‹æœåŠ¡å™¨çš„ç‰ˆæœ¬</p>\n<p>â€‹\t\t\tæ–¹å¼ä¸€ã€ç™»å½•åˆ° mysql æœåŠ¡ç«¯:</p>\n<pre><code class=\"language-mysql\">select\tversion();\n</code></pre>\n<p>â€‹\t\t\tæ–¹å¼äºŒã€æ²¡æœ‰ç™»å½•åˆ° mysql æœåŠ¡ç«¯:</p>\n<pre><code class=\"language-mysql\">mysql\t--versionæˆ–\tmysql\t--v\n</code></pre>\n<h3 id=\"è¿›é˜¶1åŸºç¡€æŸ¥è¯¢\"><a class=\"anchor\" href=\"#è¿›é˜¶1åŸºç¡€æŸ¥è¯¢\">#</a> è¿›é˜¶ 1ï¼šåŸºç¡€æŸ¥è¯¢</h3>\n<p>è¯­æ³•ï¼š</p>\n<pre><code class=\"language-mysql\">select\tæŸ¥è¯¢åˆ—è¡¨\tfrom\tè¡¨å;\n</code></pre>\n<p>ç‰¹ç‚¹ï¼š</p>\n<p>1ã€æŸ¥è¯¢åˆ—è¡¨å¯ä»¥æ˜¯ï¼šè¡¨ä¸­çš„å­—æ®µã€å¸¸é‡å€¼ã€è¡¨è¾¾å¼ã€å‡½æ•°</p>\n<p>2ã€æŸ¥è¯¢çš„ç»“æœæ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„è¡¨æ ¼</p>\n<p>aã€æŸ¥è¯¢è¡¨ä¸­çš„å•ä¸ªå­—æ®µï¼š</p>\n<pre><code class=\"language-mysql\">select\tæŸ¥è¯¢åˆ—è¡¨\tfrom\tè¡¨å;\n</code></pre>\n<p>bã€æŸ¥è¯¢è¡¨ä¸­çš„å¤šä¸ªå­—æ®µï¼š</p>\n<pre><code class=\"language-mysql\">select\tæŸ¥è¯¢åˆ—è¡¨1,æŸ¥è¯¢åˆ—è¡¨2,...\tfrom\tè¡¨å;\n</code></pre>\n<p>cã€æŸ¥è¯¢è¡¨ä¸­çš„æ‰€æœ‰å­—æ®µï¼š</p>\n<pre><code class=\"language-mysql\">select\t*\tfrom\tè¡¨å;\n</code></pre>\n<p>dã€æŸ¥è¯¢å¸¸é‡å€¼ï¼š</p>\n<pre><code class=\"language-mysql\">select\t100;\tselect\t'john';\n</code></pre>\n<p>eã€æŸ¥è¯¢è¡¨è¾¾å¼ï¼š</p>\n<pre><code class=\"language-mysql\">select\t100%98;\n</code></pre>\n<p>fã€æŸ¥è¯¢å‡½æ•°ï¼š</p>\n<pre><code class=\"language-mysql\">select\tversion();\n</code></pre>\n<p>3ã€èµ·åˆ«åï¼šä¾¿äºç†è§£ã€å¦‚æœæŸ¥è¯¢çš„å­—æ®µæœ‰é‡åçš„æƒ…å†µï¼Œä½¿ç”¨åˆ«ååŒºåˆ†</p>\n<p>aã€ä½¿ç”¨ as</p>\n<pre><code class=\"language-mysql\">select\t100%98\tas\tç»“æœ;\n</code></pre>\n<pre><code class=\"language-mysql\">select\tæŸ¥è¯¢åˆ—è¡¨1 as åˆ«å,æŸ¥è¯¢åˆ—è¡¨2 as åˆ«å\tfrom\tè¡¨å;\n</code></pre>\n<p>bã€ä½¿ç”¨ç©ºæ ¼</p>\n<pre><code class=\"language-mysql\">select\tæŸ¥è¯¢åˆ—è¡¨1  åˆ«å,æŸ¥è¯¢åˆ—è¡¨2  åˆ«å\tfrom\tè¡¨å;\n</code></pre>\n<p>4ã€å»é‡</p>\n<pre><code class=\"language-mysql\">select\tdistinct\tæŸ¥è¯¢åˆ—è¡¨\tfrom\tè¡¨å;\n</code></pre>\n<h3 id=\"è¿›é˜¶2æ¡ä»¶æŸ¥è¯¢\"><a class=\"anchor\" href=\"#è¿›é˜¶2æ¡ä»¶æŸ¥è¯¢\">#</a> è¿›é˜¶ 2ï¼šæ¡ä»¶æŸ¥è¯¢</h3>\n<p>è¯­æ³•ï¼š</p>\n<pre><code class=\"language-mysql\">select\tæŸ¥è¯¢åˆ—è¡¨\tfrom\tè¡¨å\twhere\tç­›é€‰æ¡ä»¶;\n</code></pre>\n<p>åˆ†ç±»ï¼š</p>\n<p>ä¸€ã€æŒ‰æ¡ä»¶è¡¨è¾¾å¼ç­›é€‰</p>\n<p>ç®€å•æ¡ä»¶è¿ç®—ç¬¦ï¼š</p>\n<pre><code class=\"language-mysql\">&gt;\t&lt;\t=\t!=\t&lt;&gt;\t&gt;=\t&lt;=\n</code></pre>\n<p>äºŒã€æŒ‰é€»è¾‘è¡¨è¾¾å¼ç­›é€‰</p>\n<p>é€»è¾‘è¿ç®—ç¬¦ï¼š</p>\n<pre><code class=\"language-mysql\">&amp;&amp;\t||\tï¼\tand\tor\tnot\n</code></pre>\n<p>ä¸‰ã€æ¨¡ç³ŠæŸ¥è¯¢</p>\n<pre><code class=\"language-mysql\">like\tbetween\tand\tin\tis\tnull\n</code></pre>\n<h2 id=\"mysqlçš„è¯­æ³•è§„èŒƒ\"><a class=\"anchor\" href=\"#mysqlçš„è¯­æ³•è§„èŒƒ\">#</a> Mysql çš„è¯­æ³•è§„èŒƒ</h2>\n<p>â€‹\t\t\t1ã€ä¸åŒºåˆ†å¤§å°å†™ï¼Œä½†å»ºè®®å…³é”®è¯å¤§å†™ï¼Œè¡¨åã€åˆ—åå°å†™</p>\n<p>â€‹\t\t\t2ã€æ¯æ¡å‘½ä»¤æœ€å¥½ç”¨åˆ†å·ç»“å°¾</p>\n<p>â€‹\t\t\t3ã€æ¯æ¡å‘½ä»¤æ ¹æ®éœ€è¦ï¼Œå¯ä»¥è¿›è¡Œç¼©è¿›æˆ–æ¢è¡Œ</p>\n<p>â€‹\t\t\t4ã€æ³¨é‡Šï¼šaã€å•è¡Œæ³¨é‡Šï¼š# æ³¨é‡Šæ–‡å­—\tbã€å•è¡Œæ³¨é‡Šï¼š-- æ³¨é‡Šæ–‡å­—\tcã€å•è¡Œæ³¨é‡Šï¼š/ *   æ³¨é‡Šæ–‡å­—   */</p>\n<p>â€‹\t\t\t5ã€mysql ä¸­çš„ + å·ï¼šåªæœ‰ä½œä¸ºè¿ç®—ç¬¦çš„åŠŸèƒ½</p>\n",
            "tags": []
        }
    ]
}